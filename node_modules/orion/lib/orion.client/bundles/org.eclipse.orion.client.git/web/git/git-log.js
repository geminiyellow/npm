!function(){function e(e,t,i,n,o,r){t[e]&&(i.push(e),(t[e]===!0||1===t[e])&&n.push(o+e+"/"+r))}function t(e,t,i,n,o){var r=n+t+"/"+o;require._fileExists(e.toUrl(r+".js"))&&i.push(r)}function i(e,t,n){var o;for(o in t)!t.hasOwnProperty(o)||e.hasOwnProperty(o)&&!n?"object"==typeof t[o]&&i(e[o],t[o],n):e[o]=t[o]}var n=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("i18n",["module"],function(o){var r=o.config?o.config():{};return r=r||{},{version:"2.0.1+",load:function(o,s,a,l){l=l||{},l.locale&&(r.locale=l.locale);var c,d,h,u=n.exec(o),p=u[1],m=u[4],g=u[5],f=m.split("-"),v=[],y={},C="";if(u[5]?(p=u[1],c=p+g):(c=o,g=u[4],m=r.locale,m||(m=r.locale="undefined"==typeof navigator?"root":(navigator.language||navigator.userLanguage||"root").toLowerCase()),f=m.split("-")),l.isBuild){for(v.push(c),t(s,"root",v,p,g),d=0;d<f.length;d++)h=f[d],C+=(C?"-":"")+h,t(s,C,v,p,g);s(v,function(){a()})}else s([c],function(t){var n,o=[];for(e("root",t,o,v,p,g),d=0;d<f.length;d++)n=f[d],C+=(C?"-":"")+n,e(C,t,o,v,p,g);s(v,function(){var e,n,r;for(e=o.length-1;e>-1&&o[e];e--)r=o[e],n=t[r],(n===!0||1===n)&&(n=s(p+r+"/"+g)),i(y,n);a(y)})})}}})}(),define("orion/i18n",[],function(){return{load:function(e,t,i,n){n=n||{};var o=/(^.*(?:^|\/)nls(?:\/|$))([^\/]*)\/?([^\/]*)/,r=o.exec(e);if(!r)return void i(null);if(!t.defined||t.defined(e))try{return void i(t(e))}catch(s){}if(n.isBuild||n.isTest)return void i({});if(t.specified&&!t.specified("orion/bootstrap"))return void i({});var a=r[1],l=r[3]?r[2]:"",c=r[3]||r[2];t(["orion/bootstrap"],function(s){s.startup().then(function(s){var d=s.serviceRegistry,h=d.getServiceReferences("orion.i18n.message");if(l){var u=h.some(function(t){return e===t.getProperty("name")?(d.getService(t).getMessageBundle().then(function(e){i(e)},function(){i({})}),!0):!1});u||i({})}else{var p,m={};h.forEach(function(e){var i=e.getProperty("name");if((r=o.exec(i))&&a===r[1]&&c===(r[3]||r[2]))if(l=r[3]?r[2]:""){var s=n.locale||("undefined"!=typeof navigator?navigator.language||navigator.userLanguage:null);if(!s||0!==s.toLowerCase().indexOf(l.toLowerCase()))return;m[l]=!0,t.specified&&t.specified(i)||define(i,["orion/i18n!"+i],function(e){return e})}else p=e}),t.specified&&t.specified(e)?i(m):p?d.getService(p).getMessageBundle().then(function(t){Object.keys(m).forEach(function(e){"undefined"==typeof t[e]&&(t[e]=m[e])}),define(e,[],t),i(t)},function(){define(e,[],m),i(m)}):(define(e,[],m),i(m))}})})}}}),define("git/nls/root/gitmessages",{Compare:"Compare","View the side-by-side compare":"View the side-by-side compare","Working Directory Version":"Working Directory Version","Working Directory":"Working Directory","View the working directory version of the file":"View the working directory version of the file","Loading...":"Loading...",Repositories:"All Git Repositories",Repo:"Repositories","0 on 1 - Git":"${0} on ${1} - Git",Git:"Git","Show in eclipse.org":"Show in eclipse.org","Show this repository at eclipse.org":"Show this repository at eclipse.org","Show in GitHub":"Show in GitHub","Show this repository in GitHub":"Show this repository in GitHub","Commit Details":"Commit Details","No Commits":"No Commits","commit: 0":"commit: ${0}","parent: 0":"parent: ${0}","authored by 0 (1) on 2":"authored by ${0} (${1}) on ${2}","committed by 0 (1)":"committed by ${0} (${1})","Tags:":"Tags:","No Tags":"No Tags",Diffs:"Changes",More:"More","Loading git log...":"Loading git log...",local:"local",remote:"remote","Git Log for ${0} branch ${1} on ":"Git Log for ${0} branch ${1} on ","Git Log for ${0} branch ${1}":"Git Log for ${0} branch ${1}","Log for branch ${0} - Git":"Log for branch ${0} - Git","Log for ${0} on ${1} - Git":"Log for ${0} on ${1} - Git","View All":"View All","Error ${0}: ":"Error ${0}: ","Loading ":"Loading ",Message:"Message",Author:"Author",Date:"Date",Actions:"Actions",Branches:"Branches",Tags:"Tags",Stage:"Stage","Unstaged removal":"Unstaged removal",Unstage:"Unstage","Staged removal":"Staged removal","Unstaged change":"Unstaged change","Staged change":"Staged change","Unstaged add":"Unstaged add","Staged add":"Staged add",Addition:"Addition",Deletion:"Deletion","Resolve Conflict":"Resolve Conflict",Conflicting:"Conflicting","Commit message":"Commit message","Record changes in the active branch":"Record changes in the active branch",Commit:"Commit",SmartCommit:"Type a message here to commit...",SmartCountCommit:"Commit ${0} file(s)","Amend last commit":"Amend last commit"," Amend":" Amend","Rebase in progress. Choose action:":"Rebase in progress. Choose action:",RebaseProgress:"Commits (Rebase in progress)",RebaseProgressDetails:"Rebasing branch.\n\n	Use Continue after resolving any conflicts;\n	Skip to bypass the current patch;\n	Abort to end the rebase at any time.","Committer name:":"Committer name:","email:":"email:","Author name: ":"Author name: ","Select a file on the left to compare...":"Select a file on the left to compare...",Unstaged:"Unstaged",Staged:"Staged",ChangedFiles:"Changed Files","Recent commits on":"Recent commits on","Git Status":"Git Status","Go to Git Status":"Open the Git Status page for the repository containing this file or folder.","Recent commits on ${0}":"Recent commits on ${0}","Status for ${0} - Git":"Status for ${0} - Git","Status (${0})":"Status (${0})","Getting git incoming changes...":"Getting git incoming changes...","Loading recent commits...":"Loading recent commits...","Show the side-by-side compare":"Show the side-by-side compare","Change Committer or Author":"Change Committer or Author","Use Default Committer and Author":"Use Default Committer and Author",Checkout:"Checkout","Checkout the file, discarding the unstaged change":"Checkout the file, discarding the unstaged change","Your changes to the file will be lost. Are you sure you want to checkout?":"Your changes to the file will be lost. Are you sure you want to checkout?","Checking out...":"Checking out...","Stage the change":"Stage the change","Stage the selected changes":"Stage the selected changes","Staging...":"Staging...","Checkout all the selected files, discarding all changes":"Checkout all the selected files, discarding all changes","Your changes to all the selected files will be lost. Are you sure you want to checkout?":"Your changes to all the selected files will be lost. Are you sure you want to checkout?","Save Patch":"Save Patch","Save workspace changes as a patch":"Save workspace changes as a patch","Unstage the change":"Unstage the change","Unstaging...":"Unstaging...",Undo:"Undo",UndoTooltip:"Revert this commit, keeping all changed files and not making any changes to the working directory.",UndoConfirm:"The content of your active branch will be replaced with ${0}. All changes in the commit and working directory will be kept. Are you sure?",Reset:"Reset","Reset the branch, discarding all staged and unstaged changes":"Reset the branch, discarding all staged and unstaged changes","All unstaged and staged changes in the working directory and index will be discarded and cannot be recovered.":"All unstaged and staged changes in the working directory and index will be discarded and cannot be recovered.","Are you sure you want to continue?":"Are you sure you want to continue?","Resetting local changes...":"Resetting local changes...","Continue rebase...":"Continue rebase...","Skipping patch...":"Skipping patch...","Aborting rebase...":"Aborting rebase...","Complete log":"Complete log","local VS index":"local VS index","index VS HEAD":"index VS HEAD","Compare(${0} : ${1})":"Compare(${0} : ${1})","Loading status...":"Loading status...","Committing...":"Committing...","The committer name is required.":"The committer name is required.","The committer mail is required.":"The committer mail is required.","The author name is required.":"The author name is required.","The author mail is required.":"The author mail is required.",". Repository still contains conflicts.":". Repository still contains conflicts.",". Repository contains unmerged paths. Resolve conflicts first.":". Repository contains unmerged paths. Resolve conflicts first.","Rendering ${0}":"Rendering ${0}",Configuration:"Configuration","Getting configuration of":"Getting configuration of ${0}"," - Git":" - Git","Repositories - Git":"Repositories - Git",Repository:"Repository","Repository Not Found":"Repository Not Found","No Repositories":"No Repositories","Loading repository":"Loading repository","Loading repositories":"Loading repositories","(no remote)":"(no remote)","location: ":"location: ","${0} file(s) to stage and ${1} file(s) to commit.":"${0} file(s) to stage and ${1} file(s) to commit.","Nothing to commit.":"Nothing to commit.","Nothing to push.":"Nothing to push."," commit(s) to push.":" commit(s) to push.","You have no changes to commit.":"You have no changes to commit.","You have changes to commit in your workspace!":"You have changes to commit in your workspace!","Rebase in progress!":"Rebase in progress!","View all local and remote tracking branches":"View all local and remote tracking branches","tracks no branch, ":"tracks no branch, ","tracks ${0}, ":"tracks ${0}, ","last modified ${0} by ${1}":"last modified ${0} by ${1}","No Remote Branches":"No Remote Branches","Rendering branches":"Rendering branches",Commits:"Commits",GettingCurrentBranch:"Getting current branch for ${0}","See Full Log":"See Full Log","See the full log":"See the full log",'Getting commits for "${0}" branch':'Getting commits for "${0}" branch',"Rendering commits":"Rendering commits","Getting outgoing commits":"Getting outgoing commits","The branch is up to date.":"The branch is up to date.","You have no outgoing or incoming commits.":"You have no outgoing or incoming commits.",") by ":") by "," (SHA ":" (SHA ","Getting tags":"Getting tags","View all tags":"View all tags"," on ":" on "," by ":" by ",Remotes:"Remotes","Rendering remotes":"Rendering remotes","No Remotes":"No Remotes","View all configuration entries":"View all configuration entries","Unstaged addition":"Unstaged addition","Staged addition":"Staged addition"," (Rebase in Progress)":" (Rebase in Progress)",Status:"Status","Log (0)":"Log (${0})","Log (0) - 1":"Log (${0}) - ${1}","Status for ${0} - Git ":"Status for ${0} - Git ","No Unstaged Changes":"No Unstaged Changes","No Staged Changes":"No Staged Changes",'Commits for "${0}" branch':'Commits for "${0}" branch','Commits for "${0}" branch against':'Commits for "${0}" branch against',"Add Remote":"Add Remote","Remote Name:":"Remote Name:","Remote URI:":"Remote URI:","Apply Patch":"Apply Patch","Git Repository":"Git Repository","Go to the git repository":"Open the Git Repository page for this file or folder.","Clone Git Repository":"Clone Git Repository","Repository URL:":"Repository URL:","Existing directory:":"Existing directory:","New folder:":"New folder:","Choose a Folder":"Choose a Folder","Commit Changes":"Commit Changes","Message:":"Message:","Amend:":"Amend:",SmartAmend:"Amend Previous Commit","ChangeId:":"ChangeId:",SmartChangeId:"Prepare for Gerrit","Committer Name:":"Committer Name:","Committer Email:":"Committer Email:","Author Name:":"Author Name:","Author Email:":"Author Email:","The commit message is required.":"The commit message is required.","Git Credentials":"Git Credentials","Username:":"Username:","Private key:":"Private key:","Passphrase (optional):":"Passphrase (optional):","commit:":"commit: ","parent:":"parent: ","branches: ":"branches: ","tags: ":"tags: "," authored by ${0} {${1}) on ${2}":" authored by ${0} (${1}) on ${2}",Content:"Content","Go to ${0} section":"Go to ${0} section","Find Commit":"Find Commit","Type the commit name (sha1):":"Type the commit name (sha1):",Search:"Search","Searching...":"Searching...","Looking for the commit":"Looking for the commit","New Branch:":"New Branch:","No remote selected":"No remote selected","Enter a name...":"Enter a name...",OK:"OK"," [New branch]":" [New branch]","Would you like to add ${0} key for host ${1} to continue operation? Key fingerpt is ${2}.":"Would you like to add ${0} key for host ${1} to continue operation? Key fingerpt is ${2}.","Link Repository":"Link Repository","Folder name:":"Folder name:","Repository was linked to ":"Repository was linked to ","Checkout the current tag, creating a local branch based on its contents.":"Checkout this commit, creating a local branch based on its contents.","Checking out tag ${0}":"Checking out tag ${0}","Checkout the branch or corresponding local branch and make it active. If the remote tracking branch does not have a corresponding local branch, the local branch will be created first.":"Checkout the branch or corresponding local branch and make it active. If the remote tracking branch does not have a corresponding local branch, the local branch will be created first.","Checking out branch...":"Checking out branch...","Checking out branch ${0}...":"Checking out branch ${0}...","Branch checked out.":"Branch checked out.","New Branch":"New Branch","Add a new local branch to the repository":"Add a new local branch to the repository","Branch name":"Branch name",Delete:"Delete","Delete the local branch from the repository":"Delete the local branch from the repository","Are you sure you want to delete branch ${0}?":"Are you sure you want to delete branch ${0}?","Delete the remote tracking branch from the repository":"Delete the remote tracking branch from the repository","Are you sure?":"Are you sure?","You're going to delete remote branch ${0} and push the change.":"You're going to delete remote branch ${0} and push the change.","Removing remote branch: ":"Removing remote branch: ","Delete Remote Branch":"Delete Remote Branch","New Remote":"New Remote","Git Remote":"Git Remote","Go to Git Remote":"Open the remote Git Log page for this file or folder.","Add a new remote to the repository":"Add a new remote to the repository","Delete the remote from the repository":"Delete the remote from the repository","Are you sure you want to delete remote ${0}?":"Are you sure you want to delete remote ${0}?",Pull:"Pull","Pull from the repository":"Pull from the repository","Pulling: ":"Pulling: ","Pull Git Repository":"Pull Git Repository","Git Log":"Git Log","Go to Git Log":"Open the local Git Log page for this file or folder.","Open the log for the branch":"Open the log for the branch","Open the log for the repository":"Open the log for the repository","Open the status for the repository":"Open the status for the repository",ShowInEditor:"Show in Editor",ShowInEditorTooltip:"Show the repository folder in the editor","Compare With Each Other":"Compare With Each Other","Compare With Working Tree":"Compare With Working Tree",Open:"Open",Fetch:"Fetch","Fetch from the remote":"Fetch from the remote","Password:":"Password:","User Name:":"User Name:","Fetching remote: ":"Fetching remote: ","Force Fetch":"Force Fetch","Fetch from the remote branch into your remote tracking branch overriding its current content":"Fetch from the remote branch into your remote tracking branch overriding its current content","You're going to override content of the remote tracking branch. This can cause the branch to lose commits.":"You're going to override content of the remote tracking branch. This can cause the branch to lose commits.",Merge:"Merge","Merge the content from the branch to your active branch":"Merge the content from the branch to your active branch",". Go to ${0}.":". Go to ${0}.","Git Status page":"Git Status page",Rebase:"Rebase","Rebase your commits by removing them from the active branch, starting the active branch again based on the latest state of the selected branch ":"Rebase your commits by removing them from the active branch, starting the active branch again based on the latest state of the selected branch ","Rebase on top of ":"Rebase on top of ",RebaseSTOPPED:". Some conflicts occurred. Please resolve them and continue, skip patch or abort rebasing.",RebaseFAILED_WRONG_REPOSITORY_STATE:". Repository state is invalid (i.e. already during rebasing).",RebaseFAILED_UNMERGED_PATHS:". Repository contains unmerged paths.",RebaseFAILED_PENDING_CHANGES:". Repository contains pending changes. Please commit or stash them.",RebaseUNCOMMITTED_CHANGES:". There are uncommitted changes.","Rebase your commits by removing them from the active branch, ":"Rebase your commits by removing them from the active branch, ","starting the active branch again based on the latest state of '":"starting the active branch again based on the latest state of '","and applying each commit again to the updated active branch.":"and applying each commit again to the updated active branch.","Push All":"Push All","Push commits and tags from your local branch into the remote branch":"Push commits and tags from your local branch into the remote branch","Push Branch":"Push Branch","Push commits without tags from your local branch into the remote branch":"Push commits without tags from your local branch into the remote branch","Push for Review":"Push for Review","Push commits to Gerrit Code Review":"Push commits to Gerrit Code Review","Force Push Branch":"Force Push Branch","Push commits without tags from your local branch into the remote branch overriding its current content":"Push commits without tags from your local branch into the remote branch overriding its current content","Pushing remote: ":"Pushing remote: ","Choose Branch":"Choose Branch","Choose the remote branch.":"Choose the remote branch.","Force Push All":"Force Push All","Push commits and tags from your local branch into the remote branch overriding its current content":"Push commits and tags from your local branch into the remote branch overriding its current content","You're going to override content of the remote branch. This can cause the remote repository to lose commits.":"You're going to override content of the remote branch. This can cause the remote repository to lose commits.","< Previous Page":"< Previous Page","Show previous page of git log":"Show previous page of git log","Show previous page of git tags":"Show previous page of git tags","Next Page >":"Next Page >","Show next page of git log":"Show next page of git log","Show next page of git tags":"Show next page of git tags","Push from your local branch into the selected remote branch":"Push from your local branch into the selected remote branch","Reset your active branch to the state of the selected branch. Discard all staged and unstaged changes.":"Reset your active branch to the state of the selected branch. Discard all staged and unstaged changes.",GitResetIndexConfirm:"The content of your active branch will be replaced with ${0}. All unstaged and staged changes will be discarded and cannot be recovered. Are you sure?","Resetting index...":"Resetting index...","Name:":"Name:",Tag:"Tag","Create a tag for the commit":"Create a tag for the commit","Tag name":"Tag name","Delete the tag from the repository":"Delete the tag from the repository","Are you sure you want to delete tag ${0}?":"Are you sure you want to delete tag ${0}?","Cherry-Pick":"Cherry-Pick","Apply the change introduced by the commit to your active branch":"Apply the change introduced by the commit to your active branch","Nothing changed.":"Nothing changed.",". Some conflicts occurred":". Some conflicts occurred.","Fetch from the remote branch into your remote tracking branch":"Fetch from the remote branch into your remote tracking branch","Fetch Git Repository":"Fetch Git Repository",Push:"Push","Push from your local branch into the remote branch":"Push from your local branch into the remote branch","Push Git Repository":"Push Git Repository","Key:":"Key:","Value:":"Value:","New Configuration Entry":"New Configuration Entry",Edit:"Edit","Edit the configuration entry":"Edit the configuration entry","Delete the configuration entry":"Delete the configuration entry","Are you sure you want to delete ${0}?":"Are you sure you want to delete ${0}?","Clone Repository":"Clone Repository","Clone an existing Git repository to a folder":"Clone an existing Git repository to a folder","Cloning repository: ":"Cloning repository: ","Init Repository":"Init Repository","Create a new Git repository in a new folder":"Create a new Git repository in a new folder","Initializing repository: ":"Initializing repository: ","Init Git Repository":"Init Git Repository","Delete the repository":"Delete the repository","Are you sure you want do delete ${0} repositories?":"Are you sure you want do delete ${0} repositories?","Apply a patch on the selected repository":"Apply a patch on the selected repository","Show content":"Show content","Commit name:":"Commit name:","Open Commit":"Open Commit","Open the commit with the given name":"Open the commit with the given name","No commits found":"No commits found","Staging changes":"Staging changes","Commit message:":"Commit message:","Committing changes":"Committing changes","Fetching previous commit message":"Fetching previous commit message","Resetting local changes":"Resetting local changes","Checkout files, discarding all changes":"Checkout files, discarding all changes","Show Patch":"Show Patch","Show workspace changes as a patch":"Show workspace changes as a patch","Show checked changes as a patch":"Show checked changes as a patch",Continue:"Continue","Contibue Rebase":"Contibue Rebase","Skip Patch":"Skip Patch",Abort:"Abort","Abort Rebase":"Abort Rebase",Discard:"Discard ${0} file(s)","Your changes to the selected files will be discarded and cannot be recovered.":"Your changes to the selected files will be discarded and cannot be recovered.","Getting git log":"Getting git log","Active Branch Log":"Git Log (Active Branch)","Show the log for the active local branch":"Show the log for the active local branch","Remote Branch Log":"Git Log (Remote Branch)","Show the log for the corresponding remote tracking branch":"Show the log for the corresponding remote tracking branch","See Full Status":"See Full Status","See the status":"See the status","Choose target location":"Choose target location","Default target location":"Default target location","Change...":"Change...","Merge Squash":"Merge Squash","Squash the content of the branch to the index":"Squash the content of the branch to the index","Local Branch Name:":"Local Branch Name:",Local:"local","Filter items":"Filter items","Filter remote branches":"Filter remote branches","Getting remote branches":"Getting remote branches ${0}","Getting branches":"Getting branches ${0}","Paste link in email or IM":"Paste link in email or IM","Show Commit in GitHub":"Show Commit in GitHub","Show Repository in GitHub":"Show Repository in GitHub","Show this commit in GitHub":"Show this commit in GitHub","Show Commit in eclipse.org":"Show Commit in eclipse.org","Show this commit in eclipse.org":"Show this commit in eclipse.org","Show Repository in eclipse.org":"Show Repository in eclipse.org","Show this repository in eclipse.org":"Show this repository in eclipse.org","Ask for review":"Ask for review","Ask for review tooltip":"Send email with request for commit review","Reviewer name":"Reviewer name","Contribution Review Request":"Contribution Review Request","Send the link to the reviewer":"Send the link to the reviewer","Private key file (optional):":"Private key file (optional):","Don't prompt me again:":"Don't prompt me again:","Your private key will be saved in the browser for further use":"Your private key will be saved in the browser for further use","Loading Contribution Review Request...":"Loading Contribution Review Request...","The commit can be found in the following repositories":"The commit can be found in the following repositories","Try to update your repositories":"Try to update your repositories","Create new repository":"Create new repository","Attach the remote to one of your existing repositories":"Attach the remote to one of your existing repositories","You are reviewing contribution ${0} from ${1}":"You are reviewing contribution ${0} from ${1}","Unfortunately the commit can not be found in your workspace. To see it try one of the following: ":"Unfortunately the commit can not be found in your workspace. To see it try one of the following: ","To review the commit you can also:":"To review the commit you can also:","Contribution Review Request for ${0} on ${1}":"Contribution Review Request for ${0} on ${1}","Failing paths: ${0}":"Failing paths: ${0}","Problem while performing the action":"Problem while performing the action","Go to the Orion repositories page to provide a git repository URL. Once the repository is created, it will appear in the Navigator.":"Go to the Orion repositories page to provide a git repository URL. Once the repository is created, it will appear in the Navigator.","URL:":"URL:","File:":"File:",Submit:"Submit","git url:":"git url: ",Revert:"Revert","Revert changes introduced by the commit into your active branch":"Revert changes introduced by the commit into your active branch",". Could not revert into active branch":". Could not revert into active branch.",Login:"Login","Authentication required for: ${0}. ${1} and re-try the request.":"Authentication required for: ${0}. ${1} and re-try the request.","Remember my committer name and email:":"Remember my committer name and email:","Successfully edited ${0} to have value ${1}":"Successfully edited ${0} to have value ${1}","Successfully added ${0} with value ${1}":"Successfully added ${0} with value ${1}","Signed-off-by: ":"Signed-off-by: ","Change-Id: ":"Change-Id: ",REJECTED_NONFASTFORWARD:"Push is non-fastforward and was rejected. Use Fetch to see new commits that must be merged.","Commit and Push":"Commit and Push",Sync:"Sync",SyncTooltip:"Fetch from the remote branch. Rebase your commits by removing them from the local branch, starting the local branch again based on the latest state of the remote branch and applying each commit to the updated local branch. Push commits and tags from your local branch into the remote branch.",NoCommits:"No Commits",Incoming:"Incoming",Outgoing:"Outgoing",Synchronized:"History",NoBranch:"No Branch",None:"None"}),define("git/nls/gitmessages",["orion/i18n!git/nls/gitmessages","git/nls/root/gitmessages"],function(e,t){var i={root:t};return Object.keys(e).forEach(function(t){"undefined"==typeof i[t]&&(i[t]=e[t])}),i}),function(){function e(){for(var e=navigator.userAgent,t={browser:!1,version:!1},i=1,n=[{name:"Chrome/Chromium",regExp:/(?:chrome|crios|chromium)\/(\d+)/i,minVersion:24},{name:"Firefox",regExp:/firefox\/(\d+)/i,minVersion:17},{name:"Microsoft Internet Explorer",regExp:/msie\s(\d+)/i,minVersion:10},{name:"Microsoft Internet Explorer",regExp:/Trident\/(\d+)/i,minVersion:6},{name:"Safari",regExp:/version\/(\d+).*?safari/i,minVersion:6}],o=0;o<n.length;o++){var r=n[o],s=e.match(r.regExp);if(s){t.browser=!0,t.version=s[i]>=r.minVersion,t.name=r.name;break}}return t}function t(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}function i(e){throw alert(e),new Error("unsupported browser")}var n=e();if(n.browser)n.version||i("Sorry, your browser version is not supported.\n\nTo use Orion, please upgrade to the latest version of "+n.name+".\n");else if(t()&&!localStorage.skipBrowserCheck){if(!confirm("Sorry, your browser is not supported. The latest version of Chrome, Firefox or Safari web browser is recommended.\nContinue anyway?"))throw"unsupported browser";localStorage.skipBrowserCheck=1}else t()||i("Sorry, your browser is not supported.\n\nTo use Orion, the latest version of the Chrome, Firefox, or Safari web browser is recommended.\n");return{isSupportedBrowser:e,supportsLocalStorage:t,throwBrowserAlert:i}}(),define("orion/browserCompatibility",function(){}),function(e,t){"function"==typeof define&&define.amd?define("orion/Deferred",t):"object"==typeof exports?module.exports=t():(e.orion=e.orion||{},e.orion.Deferred=t())}(this,function(){function e(){for(var e;e=r.shift();)e();s=!1}function t(e){r.push(e),s||(s=!0,a())}function i(e){return function(t){e(t)}}function n(e,t,n){try{var o=e(t),r=o&&("object"==typeof o||"function"==typeof o)&&o.then;if("function"==typeof r)if(o===n.promise)n.reject(new TypeError);else{var s=o.cancel;"function"==typeof s?n._parentCancel=s.bind(o):delete n._parentCancel,r.call(o,i(n.resolve),i(n.reject),i(n.progress))}else n.resolve(o)}catch(a){n.reject(a)}}function o(){function e(){for(var e;e=c.shift();){var t=e.deferred,i="fulfilled"===l?"resolve":"reject",o=e[i];"function"==typeof o?n(o,a,t):t[i](a)}}function i(i){delete d._parentCancel,l="rejected",a=i,c.length&&t(e)}function r(n){function s(e){return function(t){l&&"assumed"!==l||e(t)}}delete d._parentCancel;try{var h=n&&("object"==typeof n||"function"==typeof n)&&n.then;if("function"==typeof h)if(n===d)i(new TypeError);else{l="assumed";var u=n&&n.cancel;if("function"!=typeof u){var p=new o;n=p.promise;try{h(p.resolve,p.reject,p.progress)}catch(m){p.reject(m)}u=n.cancel,h=n.then}a=n,h.call(n,s(r),s(i)),d._parentCancel=u.bind(n)}else l="fulfilled",a=n,c.length&&t(e)}catch(g){s(i)(g)}}function s(){var e=d._parentCancel;if(e)delete d._parentCancel,e();else if(!l){var t=new Error("Cancel");t.name="Cancel",i(t)}}var a,l,c=[],d=this;this.resolve=function(e){return l||r(e),d},this.reject=function(e){return l||i(e),d},this.progress=function(e){return l||c.forEach(function(t){if(t.progress)try{t.progress(e)}catch(i){}}),d.promise},this.cancel=function(){return d._parentCancel?setTimeout(s,0):s(),d},this.then=function(i,n,r){var s=new o;return s._parentCancel=d.promise.cancel,c.push({resolve:i,reject:n,progress:r,deferred:s}),("fulfilled"===l||"rejected"===l)&&t(e),s.promise},this.promise={then:d.then,cancel:d.cancel}}var r=[],s=!1,a=function(){if("undefined"!=typeof process&&"function"==typeof process.nextTick){var t=process.nextTick;return function(){t(e)}}if("function"==typeof MutationObserver){var i=document.createElement("div"),n=new MutationObserver(e);return n.observe(i,{attributes:!0}),function(){i.setAttribute("class","_tick")}}return function(){setTimeout(e,0)}}();return o.all=function(e,t){function i(e,t){a||(s[e]=t,0===--r&&l.resolve(s))}function n(e,n){if(!a){if(t)try{return void i(e,t(n))}catch(o){n=o}l.reject(n)}}var r=e.length,s=[],a=!1,l=new o;return l.then(void 0,function(){a=!0,e.forEach(function(e){e.cancel&&e.cancel()})}),0===r?l.resolve(s):e.forEach(function(e,t){e.then(i.bind(void 0,t),n.bind(void 0,t))}),l.promise},o.when=function(e,t,i,n){var r,s;return e&&"function"==typeof e.then?r=e:(s=new o,s.resolve(e),r=s.promise),r.then(t,i,n)},o}),define("orion/EventTarget",[],function(){function e(){this._namedListeners={}}return e.prototype={dispatchEvent:function(e){if(!e.type)throw new Error("unspecified type");var t=this._namedListeners[e.type];return t&&t.forEach(function(t){try{"function"==typeof t?t(e):t.handleEvent(e)}catch(i){"undefined"!=typeof console&&console.log(i)}}),!e.defaultPrevented},addEventListener:function(e,t){("function"==typeof t||t.handleEvent)&&(this._namedListeners[e]=this._namedListeners[e]||[],this._namedListeners[e].push(t))},removeEventListener:function(e,t){var i=this._namedListeners[e];if(i)for(var n=0;n<i.length;n++)if(i[n]===t){1===i.length?delete this._namedListeners[e]:i.splice(n,1);break}}},e.prototype.constructor=e,e.attach=function(t){var i=new e;t.dispatchEvent=i.dispatchEvent.bind(i),t.addEventListener=i.addEventListener.bind(i),t.removeEventListener=i.removeEventListener.bind(i)},e}),define("orion/serviceregistry",["orion/Deferred","orion/EventTarget"],function(e,t){function i(e,t,i){this._properties=i||{},this._properties["service.id"]=e,this._properties.objectClass=t,this._properties["service.names"]=t}function n(e,t,i){this._serviceId=e,this._serviceReference=t,this._internalRegistry=i}function o(t,i){function n(n){return function(){var o;try{if(!i())throw new Error("Service was unregistered");var r=t[n].apply(t,Array.prototype.slice.call(arguments));if(r&&"function"==typeof r.then)return r;o=new e,o.resolve(r)}catch(s){o=new e,o.reject(s)}return o.promise
}}var o;for(o in t)"function"==typeof t[o]&&(this[o]=n(o))}function r(e,t){this.type=e,this.serviceReference=t}function s(){this._entries=[],this._namedReferences={},this._serviceEventTarget=new t;var e=this;this._internalRegistry={isRegistered:function(t){return e._entries[t]?!0:!1},unregisterService:function(t){var i=e._entries[t];if(!i)throw new Error("Service has already been unregistered: "+t);var n=i.reference;e._serviceEventTarget.dispatchEvent(new r("unregistering",n)),e._entries[t]=null;var o=n.getProperty("objectClass");o.forEach(function(t){for(var i=e._namedReferences[t],o=0;o<i.length;o++)if(i[o]===n){1===i.length?delete e._namedReferences[t]:i.splice(o,1);break}})},modifyService:function(t){var i=e._entries[t];if(!i)throw new Error("Service not found while trying to send modified event: "+t);var n=i.reference;e._serviceEventTarget.dispatchEvent(new r("modified",n))}}}return i.prototype={getPropertyKeys:function(){var e,t=[];for(e in this._properties)this._properties.hasOwnProperty(e)&&t.push(e);return t},getProperty:function(e){return this._properties[e]}},i.prototype.constructor=i,n.prototype={unregister:function(){this._internalRegistry.unregisterService(this._serviceId)},getReference:function(){if(!this._internalRegistry.isRegistered(this._serviceId))throw new Error("Service has already been unregistered: "+this._serviceId);return this._serviceReference},setProperties:function(e){var t=this._serviceReference._properties;this._serviceReference._properties=e||{},e["service.id"]=this._serviceId,e.objectClass=t.objectClass,e["service.names"]=t["service.names"],this._internalRegistry.modifyService(this._serviceId)}},n.prototype.constructor=n,s.prototype={getService:function(e){var t;if("string"==typeof e){var i=this._namedReferences[e];i&&i.some(function(e){return t=this._entries[e.getProperty("service.id")].service,!!t},this)}else{var n=this._entries[e.getProperty("service.id")];n&&(t=n.service)}return t||null},getServiceReferences:function(e){if(e)return this._namedReferences[e]?this._namedReferences[e]:[];var t=[];return this._entries.forEach(function(e){e&&t.push(e.reference)}),t},registerService:function(e,t,s){if("undefined"==typeof t||null===t)throw new Error("invalid service");"string"==typeof e?e=[e]:Array.isArray(e)||(e=[]);var a=this._entries.length,l=new i(a,e,s),c=this._namedReferences;e.forEach(function(e){c[e]=c[e]||[],c[e].push(l)});var d=new o(t,this._internalRegistry.isRegistered.bind(null,a));this._entries.push({reference:l,service:d});var h=this._internalRegistry;return this._serviceEventTarget.dispatchEvent(new r("registered",l)),new n(a,l,h)},addEventListener:function(e,t){this._serviceEventTarget.addEventListener(e,t)},removeEventListener:function(e,t){this._serviceEventTarget.removeEventListener(e,t)}},s.prototype.constructor=s,{ServiceRegistry:s}}),define("orion/xhr",["orion/Deferred"],function(e){function t(e,t,i,n){var o,r="undefined"!=typeof i.response?i.response:i.responseText,s="string"==typeof r?r:null;try{o=i.status}catch(a){o=0}var l={args:t,response:r,responseText:s,status:o,url:e,xhr:i};return"undefined"!=typeof n&&(l.error=n),l}function i(i,n,o){o=o||{};var r,s=arguments.length>3&&arguments[3]?arguments[3]:new XMLHttpRequest,a=new e,l=o.headers||{},c=o.log||!1;"undefined"==typeof l["X-Requested-With"]&&(l["X-Requested-With"]="XMLHttpRequest"),"undefined"==typeof o.data||"POST"!==i&&"PUT"!==i||(r=o.data);var d=!1,h=!1;a.promise.then(void 0,function(e){d=!0,!h&&e instanceof Error&&"Cancel"===e.name&&s.abort()}),s.onabort=function(){if(h=!0,!d){var e=new Error("Cancel");e.name="Cancel",a.reject(e)}},s.onload=function(){var e=t(n,o,s);200<=s.status&&s.status<400?a.resolve(e):(a.reject(e),c&&"undefined"!=typeof console&&console.log(new Error(s.statusText)))},s.onerror=function(){var e=t(n,o,s);a.reject(e),c&&"undefined"!=typeof console&&console.log(new Error(s.statusText))},s.onprogress=function(e){e.xhr=s,a.progress(e)};try{if(s.open(i,n,!0),"string"==typeof o.responseType&&(s.responseType=o.responseType),"number"==typeof o.timeout)if("number"==typeof s.timeout)s.timeout=o.timeout,s.addEventListener("timeout",function(){a.reject(t(n,o,s,"Timeout exceeded"))});else{var u=setTimeout(function(){a.reject(t(n,o,s,"Timeout exceeded"))},o.timeout);a.promise.then(clearTimeout.bind(null,u),clearTimeout.bind(null,u))}Object.keys(l).forEach(function(e){s.setRequestHeader(e,l[e])}),s.send(r||null)}catch(p){a.reject(t(n,o,s,p))}return a.promise}return i}),define("orion/preferences",["require","orion/Deferred","orion/xhr"],function(e,t,i){function n(e,t){this._name=e,this._providers=t,this._flushPending=!1,this._cached=null,this._stores=[],this._pendingDeletes=[],this._dirty=[]}function o(e,t){return{get:function(i,n){if(0===t)return null;var o=localStorage.getItem(e+i);if(null===o)return null;var r=JSON.parse(o);return n||-1===t||r._expires&&r._expires>(new Date).getTime()?(delete r._expires,r):null},set:function(i,n){if(0!==t)if(-1!==t&&(n._expires=(new Date).getTime()+1e3*t),0===Object.keys(n).length)localStorage.removeItem(e+i);else{var o=JSON.stringify(n);localStorage.setItem(e+i,o),delete n._expires}},remove:function(t){localStorage.removeItem(e+t)}}}function r(e){this._currentPromises={},this._cache=new o("/orion/preferences/user",3600),this._service=null,this.available=function(){if(!this._service){var t=e.getServiceReferences("orion.core.preference.provider");t.length>0&&(this._service=e.getService(t[0]))}return!!this._service}}function s(e){this._location=e,this._currentPromise=null,this._cache=new o("/orion/preferences/default",3600)}function a(){this._cache=new o("/orion/preferences/local",-1)}function l(t,i){this._userProvider=new r(t),this._localProvider=new a,i=i||"defaults.pref",-1===i.indexOf("://")&&(i=e.toUrl(i)),this._defaultsProvider=new s(i),this._serviceRegistration=t.registerService("orion.core.preference",this)}return n.prototype={_flush:function(){for(var e=[],i=0;i<this._stores.length;++i){var n=this._stores[i];if(-1!==this._dirty.indexOf(n)&&e.push(this._providers[i].put(this._name,n)),this._pendingDeletes[i]&&this._pendingDeletes[i].length>0){for(var o=0;o<this._pendingDeletes[i].length;o++)e.push(this._providers[i].remove(this._name,this._pendingDeletes[i][o]));delete this._pendingDeletes[i]}}return this._dirty=[],t.all(e)},_scheduleFlush:function(e){e&&-1===this._dirty.indexOf(e)&&this._dirty.push(e),this._flushPending||(this._flushPending=!0,window.setTimeout(function(){this._flushPending&&(this._flushPending=!1,this._flush())}.bind(this),0))},_getCached:function(){if(!this._cached){this._cached={};for(var e=0;e<this._stores.length;++e){var t=this._stores[e];for(var i in t)t.hasOwnProperty(i)&&"undefined"==typeof this._cached[i]&&(this._cached[i]=t[i])}}return this._cached},keys:function(){return Object.keys(this._getCached())},get:function(e){var t=this._getCached();return t[e]},put:function(e,t){if(0!==this._stores.length){var i=this._stores[0];i[e]!==t&&(i[e]=t,this._cached=null,this._scheduleFlush(i))}},remove:function(e){for(var t=0;t<this._stores.length;++t){var i=this._stores[t];if(i.hasOwnProperty(e))return delete i[e],this._pendingDeletes[t]||(this._pendingDeletes[t]=[]),this._pendingDeletes[t].push(e),this._cached=null,this._scheduleFlush(),!0}return!1},clear:function(){for(var e=0;e<this._stores.length;++e)this._stores[e]={},this._scheduleFlush(this._stores[e]);this._cached=null},sync:function(e){if(this._flushPending)return this._flushPending=!1,this._flush();for(var i=this,n=[],o=0;o<this._providers.length;++o)n.push(this._providers[o].get(this._name,e).then(function(e){return function(t){i._stores[e]=t}}(o)));return t.all(n).then(function(){i._cached=null,i._getCached()})},flush:function(){this._flush()}},r.prototype={get:function(e,i){if(this._currentPromises[e])return this._currentPromises[e];var n=new t,o=null;if(i?this._cache.remove(e):o=this._cache.get(e),null!==o)n.resolve(o);else{this._currentPromises[e]=n;var r=this;this._service.get(e).then(function(t){r._cache.set(e,t),delete r._currentPromises[e],n.resolve(t)},function(t){if(404===t.status){var i={};r._cache.set(e,i),delete r._currentPromises[e],n.resolve(i)}else delete r._currentPromises[e],n.resolve(r._cache.get(e,!0)||{})})}return n},put:function(e,t){return this._cache.set(e,t),this._service.put(e,t)},remove:function(e,t){var i=this._cache.get(e);return delete i[t],this._cache.set(e,i),this._service.remove(e,t)}},s.prototype={get:function(e,n){if(this._currentPromise)return this._currentPromise;var o=new t,r=null;if(n?this._cache.remove(e):r=this._cache.get(e),null!==r)o.resolve(r);else{this._currentPromise=o;var s=this;i("GET",this._location,{headers:{"Orion-Version":"1"},timeout:15e3}).then(function(t){var i=JSON.parse(t.response);s._cache.set(e,i[e]||{}),s._currentPromise=null,o.resolve(i[e]||{})},function(t){if(401===t.xhr.status||404===t.xhr.status)s._cache.set(e,{}),s._currentPromise=null,o.resolve({});else{s._currentPromise=null;var i=s._cache.get(e,!0);o.resolve(null!==i?i[e]||{}:{})}})}return o},put:function(){var e=new t;return e.resolve(),e},remove:function(e,t){var i=this._cache.get(e);delete i[t],this.put(e,i)}},a.prototype={get:function(e){var i=new t,n=this._cache.get(e);return i.resolve(null!==n?n:{}),i},put:function(e,i){var n=new t;return this._cache.set(e,i),n.resolve(),n},remove:function(e,t){var i=this._cache.get(e);delete i[t],this.put(e,i)}},l.DEFAULT_SCOPE=1,l.LOCAL_SCOPE=2,l.USER_SCOPE=4,l.prototype={listenForChangedSettings:function(e,t,i){return(!t||"number"!=typeof t||t>7||1>t)&&(i=t,t=l.DEFAULT_SCOPE|l.LOCAL_SCOPE|l.USER_SCOPE),window.addEventListener("storage",i,!1),0!==(l.USER_SCOPE&t)?"/orion/preferences/user"+e:0!==(l.LOCAL_SCOPE&t)?"/orion/preferences/local"+e:"/orion/preferences/default"+e},getPreferences:function(e,t){(!t||"number"!=typeof t||t>7||1>t)&&(t=l.DEFAULT_SCOPE|l.LOCAL_SCOPE|l.USER_SCOPE);var i=[];l.USER_SCOPE&t&&this._userProvider.available()&&i.push(this._userProvider),l.LOCAL_SCOPE&t&&i.push(this._localProvider),l.DEFAULT_SCOPE&t&&i.push(this._defaultsProvider);var o=new n(e,i),r=o.sync().then(function(){return o});return r},getSetting:function(e,t,i){for(var n,o=0;o<e.length;o++)if(e[o].label===t)for(var r=0;r<e[o].data.length;r++)if(e[o].data[r].label===i){n=e[o].data[r].value;break}return n}},{PreferencesService:l}}),function(){function e(e){if("string"!=typeof e)throw new TypeError}function t(e){return e?e.split("&"):[]}function i(e){return 0===e.length?"":e.join("&")}function n(e){var t=/([^=]*)(?:=?)(.*)/.exec(e),i=t[1]?decodeURIComponent(t[1]):"",n=t[2]?decodeURIComponent(t[2]):"";return[i,n]}function o(e){var t=encodeURIComponent(e[0]);return e[1]&&(t+="="+encodeURIComponent(e[1])),t}function r(e,i){var o="",r=[],s=0;return{next:function(){if(o!==e.query&&(o=e.query,r=t(o)),s<r.length){var a=n(r[s++]);switch(i){case"keys":return a[0];case"values":return a[1];case"keys+values":return[a[0],a[1]];default:throw new TypeError}}throw k}}}function s(e){Object.defineProperty(this,"_url",{get:function(){return e._url}})}function a(e,t){if(!e.scheme&&t&&(e.scheme=t.scheme,!e.host&&t.host&&(e.userinfo=t.userinfo,e.host=t.host,e.port=t.port,e.pathRelative=!0)),e.pathRelative)if(e.path){if("/"!==e.path[0]){var i=/^(.*\/)[^\/]*$/.exec(t.path)[1]||"/";e.path=i+e.path}}else e.path=t.path}function l(e){return e.toLowerCase()}function c(e){return e?/[1-9]\d*$/.exec(e)[0]:""}function d(e){var t=[];return e.split("/").forEach(function(e){".."===e?t.pop():"."!==e&&t.push(e)}),t.join("/")}function h(e){e.scheme&&(e.scheme=l(e.scheme)),e.port&&(e.port=c(e.port)),e.host&&e.path&&(e.path=d(e.path))}function u(e){return e.replace(/\s/g,function(e){return"%"+e.charCodeAt(0).toString(16)})}function p(e,t){if("string"!=typeof e)throw new TypeError;e=u(e);var i=y.exec(e);if(!i)return null;var n={};if(n.scheme=i[1]||"",n.scheme&&!_.test(n.scheme))return null;var o=i[2];if(o){var r=C.exec(o);if(n.userinfo=r[1],n.host=r[2],n.port=r[3],n.port&&!b.test(n.port))return null}return n.path=i[3],n.query=i[4],n.fragment=i[5],a(n,t),h(n),n}function m(e){var t=e.scheme?e.scheme+":":"";return e.host&&(t+="//",e.userinfo&&(t+=e.userinfo+"@"),t+=e.host,e.port&&(t+=":"+e.port)),t+=e.path,e.query&&(t+="?"+e.query),e.fragment&&(t+="#"+e.fragment),t}function g(e,t){var i;if(t){if(t=t.href||t,i=p(t),!i||!i.scheme)throw new SyntaxError;Object.defineProperty(this,"_baseURL",{value:i})}var n=p(e,i);if(!n)throw new SyntaxError;Object.defineProperty(this,"_input",{value:e,writable:!0}),Object.defineProperty(this,"_url",{value:n,writable:!0});var o=new s(this);Object.defineProperty(this,"query",{get:function(){return this._url?o:null},enumerable:!0})}try{var f;if("function"==typeof window.URL&&0!==window.URL.length&&"http:"===(f=new window.URL("http://www.w3.org?q")).protocol&&f.query)return}catch(v){}var y=/^(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?$/,C=/^(?:(.*)@)?(\[[^\]]*\]|[^:]*)(?::(.*))?$/,w=/^\S*$/,_=/^([a-zA-Z](?:[a-zA-Z0-9+-.])*)$/,b=/^\d*$/,S=/^(\[[^\]\/?#\s]*\]|[^:\/?#\s]*)$/,L=/^(\[[^\]\/?#\s]*\]|[^:\/?#\s]*)(?::(\d*))?$/,E=/^([^?#\s]*)$/,R=/^([^\s]*)$/,P=w,T=/([^:]*):?(.*)/,k="undefined"!=typeof StopIteration?StopIteration:new Error("Stop Iteration"),N={"ftp:":"21","gopher:":"70","http:":"80","https:":"443","ws:":"80","wss:":"443"};Object.defineProperties(s.prototype,{get:{value:function(i){e(i);var o,r=t(this._url.query);return r.some(function(e){var t=n(e);return t[0]===i?(o=t[1],!0):void 0}),o},enumerable:!0},set:{value:function(r,s){e(r),e(s);var a=t(this._url.query),l=a.some(function(e,t){var i=n(e);return i[0]===r?(i[1]=s,a[t]=o(i),!0):void 0});l||a.push(o([r,s])),this._url.query=i(a)},enumerable:!0},has:{value:function(i){e(i);var o=t(this._url.query);return o.some(function(e){var t=n(e);return t[0]===i?!0:void 0})},enumerable:!0},"delete":{value:function(o){e(o);var r=t(this._url.query),s=r.filter(function(e){var t=n(e);return t[0]!==o});return s.length!==r.length?(this._url.query=i(s),!0):!1},enumerable:!0},clear:{value:function(){this._url.query=""},enumerable:!0},forEach:{value:function(e,t){if("function"!=typeof e)throw new TypeError;var i=r(this._url,"keys+values");try{for(;;){var n=i.next();e.call(t,n[1],n[0],this)}}catch(o){if(o!==k)throw o}},enumerable:!0},keys:{value:function(){return r(this._url,"keys")},enumerable:!0},values:{value:function(){return r(this._url,"values")},enumerable:!0},items:{value:function(){return r(this._url,"keys+values")}},size:{get:function(){return t(this._url.query).length},enumerable:!0},getAll:{value:function(i){e(i);var o=[],r=t(this._url.query);return r.forEach(function(e){var t=n(e);t[0]===i&&o.push(t[1])}),o},enumerable:!0},append:{value:function(n,r){e(n),e(r);var s=t(this._url.query);s.push(o([n,r])),this._url.query=i(s)},enumerable:!0}}),Object.defineProperties(g.prototype,{href:{get:function(){return this._url?m(this._url):this._input},set:function(t){e(t),this._input=t,this._url=p(this._input,this._baseURL)},enumerable:!0},origin:{get:function(){return this._url&&this._url.host?this.protocol+"//"+this.host:""},enumerable:!0},protocol:{get:function(){return this._url?this._url.scheme+":":":"},set:function(t){if(e(t),this._url){var i=":"===t.slice(-1)?t.substring(0,t.length-1):t;(""===i||_.test(i))&&(this._url.scheme=l(i))}},enumerable:!0},_userinfo:{get:function(){return this._url?this._url.userinfo:""},set:function(t){e(t),this._url&&(this._url.userinfo=t)}},username:{get:function(){if(!this._url)return"";var e=T.exec(this._userinfo),t=decodeURIComponent(e[1]||"");return t},set:function(t){if(e(t),this._url){var i=T.exec(this._userinfo),n=[encodeURIComponent(t||"")];i[2]&&n.push(i[2]),this._userinfo=n.join(":")}},enumerable:!0},password:{get:function(){if(!this._url)return"";var e=T.exec(this._userinfo),t=decodeURIComponent(e[2]||"");return t},set:function(t){if(e(t),this._url){var i=T.exec(this._userinfo),n=[i[1]||""];t&&n.push(encodeURIComponent(t)),this._userinfo=n.join(":")}},enumerable:!0},host:{get:function(){var e="";return this._url&&this._url.host&&(e+=this._url.host,this._url.port&&(e+=":"+this._url.port)),e},set:function(t){if(e(t),this._url){var i=L.exec(t);i&&(this._url.host=i[1],this._url.port=c(i[2]))}},enumerable:!0},hostname:{get:function(){return this._url?this._url.host:""},set:function(t){if(e(t),this._url){var i=S.exec(t);i&&(this._url.host=t)}},enumerable:!0},port:{get:function(){var e=this._url?this._url.port||"":"";return e&&e===N[this.protocol]&&(e=""),e},set:function(t){if(e(t),this._url){var i=b.exec(t);i&&(this._url.port=c(t))}},enumerable:!0},pathname:{get:function(){return this._url?this._url.path:""},set:function(t){if(e(t),this._url){var i=E.exec(t);i&&(this._url.host&&t&&"/"!==t[0]&&(t="/"+t),this._url.path=t?d(t):"")}},enumerable:!0},search:{get:function(){return this._url&&this._url.query?"?"+this._url.query:""},set:function(t){if(e(t),this._url){t&&"?"===t[0]&&(t=t.substring(1));var i=R.exec(t);i&&(this._url.query=t)}},enumerable:!0},hash:{get:function(){return this._url&&this._url.fragment?"#"+this._url.fragment:""},set:function(t){if(e(t),this._url){t&&"#"===t[0]&&(t=t.substring(1));var i=P.exec(t);i&&(this._url.fragment=t)}},enumerable:!0}});var x=window.URL||window.webkitURL;x&&x.createObjectURL&&(Object.defineProperty(g,"createObjectURL",{value:x.createObjectURL.bind(x),enumerable:!1}),Object.defineProperty(g,"revokeObjectURL",{value:x.revokeObjectURL.bind(x),enumerable:!1})),window.URL=g}(),define("orion/URL-shim",function(){}),define("orion/pluginregistry",["orion/Deferred","orion/EventTarget","orion/URL-shim"],function(e,t){function i(e,t){var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;i.sort(),n.sort();for(var o=0,r=i.length;r>o;o++){var s=i[o];if(s!==n[o])return!1;var a=e[s],l=t[s];if(a!==l&&JSON.stringify(a)!==JSON.stringify(l))return!1}return!0}function n(e){if(-1===e.indexOf("://"))try{return new URL(e,location.href).href}catch(t){}return e}function o(e){function t(){return i=i||Object.keys(e)}var i=null,n={key:function(e){return t()[e]},getItem:function(t){return e[t]},setItem:function(t,n){e[t]=n,i=null},removeItem:function(t){delete e[t],i=null},clear:function(){t().forEach(function(t){delete e[t]}.bind(this)),i=null}};return Object.defineProperty(n,"length",{get:function(){return t().length}}),n}function r(e,t){if(t&&t instanceof XMLHttpRequest){var i,n;try{i=t.status,n=t.statusText}catch(o){i=0,n=""}return{status:i||0,statusText:n}}return t}function s(e){var t=e?JSON.parse(JSON.stringify(e,r)):e;return e instanceof Error&&(t.__isError=!0,t.message=t.message||e.message,t.name=t.name||e.name),t}function a(e,t){this.type=e,this.plugin=t}function l(e,t){this.__objectId=e,this.__methods=t}function c(n,o,r){function c(e){_&&r.postMessage(e,_)}function d(t){if(!_)return(new e).reject(new Error("plugin not connected"));t.id=String(x++);var i=new e;O[t.id]=i,i.then(null,function(e){"active"===k&&e instanceof Error&&"Cancel"===e.name&&c({requestId:t.id,method:"cancel",params:e.message?[e.message]:[]})});var n=Object.prototype.toString;return t.params.forEach(function(e,o){if("[object Object]"===n.call(e)&&!(e instanceof l)){var r,s;for(r in e)"[object Function]"===n.call(e[r])&&(s=s||[],s.push(r));if(s){var a=A++;D[a]=e;var c=function(){delete D[a]};i.then(c,c),t.params[o]=new l(a,s)}}}),r.postMessage(t,_),i.promise}function h(e,t){e||0===e?c({id:e,result:null,error:t}):console.log(t)}function u(e,t,i,n){n.forEach(function(e,t){if(e&&"undefined"!=typeof e.__objectId){var i={};e.__methods.forEach(function(t){i[t]=function(){return d({objectId:e.__objectId,method:t,params:Array.prototype.slice.call(arguments)})}}),n[t]=i}});var o=void 0===typeof e?null:{id:e,result:null,error:null};try{var r=i.apply(t,n);if(!o)return;r&&"function"==typeof r.then?(I[e]=r,r.then(function(t){delete I[e],o.result=t,c(o)},function(t){I[e]&&(delete I[e],o.error=s(t),c(o))},function(){c({responseId:e,method:"progress",params:Array.prototype.slice.call(arguments)})})):(o.result=r,c(o))}catch(a){o&&(o.error=s(a),c(o))}}function p(e){try{if(e.method){var t=e.method,i=e.params||[];if("serviceId"in e){var n=M[e.serviceId];n||h(e.id,"service not found"),t in n?u(e.id,n,n[t],i):h(e.id,"method not found")}else if("objectId"in e){var o=D[e.objectId];o||h(e.id,"object not found"),t in o?u(e.id,o,o[t],i):h(e.id,"method not found")}else if("requestId"in e){var s=I[e.requestId];s&&"cancel"===t&&s.cancel&&s.cancel.apply(s,i)}else if("responseId"in e){var a=O[e.responseId];a&&"progress"===t&&a.progress&&a.progress.apply(a,i)}else if("plugin"===e.method){var l=e.params[0];S({headers:l.headers,services:l.services}).then(function(){w&&w.resolve(y)})}else{if("timeout"!==e.method)throw new Error("Bad method: "+e.method);w&&w.reject(e.error)}}else{var c=O[String(e.id)];if(delete O[String(e.id)],e.error){var d=r.handleServiceError(y,e.error);c.reject(d)}else c.resolve(e.result)}}catch(p){console.log("Plugin._messageHandler "+p)}}function m(e){var i={};if(e.methods&&(e.methods.forEach(function(t){i[t]=function(){var i={serviceId:e.serviceId,method:t,params:Array.prototype.slice.call(arguments)};return"active"===k?d(i):y.start({"transient":!0}).then(function(){return d(i)})}}),i.addEventListener&&i.removeEventListener)){var n=new t,o=A++;D[o]={handleEvent:n.dispatchEvent.bind(n)};var r=new l(o,["handleEvent"]),s=i.addEventListener;i.addEventListener=function(e,t){n._namedListeners[e]||s(e,r),n.addEventListener(e,t)};var a=i.removeEventListener;i.removeEventListener=function(e,t){n.removeEventListener(e,t),n._namedListeners[e]||a(e,r)}}return i}function g(e){var t=JSON.parse(JSON.stringify(e.properties));t.__plugin__=n;var i=e.names||e.type||[];return Array.isArray(i)||(i=[i]),t.objectClass=i,t}function f(e){var t=m(e),i=g(e),n=r.registerService(e.names||e.type,t,i);N[e.serviceId]={registration:n,proxy:t}}function v(){r.persist(n,{created:L,headers:E,services:R,autostart:P,lastModified:T})}var y=this;o=o||{};var C,w,_,b,S,L=o.created||(new Date).getTime(),E=o.headers||{},R=o.services||[],P=o.autostart,T=o.lastModified||0,k="installed",N={},x=0,A=0,I={},O={},D={},M={};this._persist=v,this._resolve=function(){k="resolved",r.dispatchEvent(new a("resolved",y))},this._getAutostart=function(){return P},this._getCreated=function(){return L},this.getLocation=function(){return n},this.getHeaders=function(){return JSON.parse(JSON.stringify(E))},this.getName=function(){var e=this.getHeaders();return e?e.name||"":null},this.getVersion=function(){var e=this.getHeaders();return e?e.version||"0.0.0":null},this.getLastModified=function(){return T},this.getServiceReferences=function(){var e=[];return Object.keys(N).forEach(function(t){e.push(N[t].registration.getReference())}),e},this.setParent=function(t){return b!==t?(b=t,y.stop({"transient":!0}).then(function(){return"started"===P?y.start({"transient":!0}):"lazy"===P?y.start({lazy:!0,"transient":!0}):void 0})):(new e).resolve()},this.getState=function(){return k},this.start=function(t){if("uninstalled"===k)return(new e).reject(new Error("Plugin is uninstalled"));if(C)return C.promise.then(this.start.bind(this,t));if("active"===k)return(new e).resolve();if(!t||!t.transient){var i=t&&t.lazy?"lazy":"started";i!==P&&(P=i,v())}var o=r.getState();if("starting"!==o&&"active"!==o)return t.transient?(new e).reject(new Error("start transient error")):(new e).resolve();if("installed"===k)try{this._resolve()}catch(s){return(new e).reject(s)}if("resolved"===k&&R.forEach(function(e){f(e)}),t&&t.lazy)return"starting"!==k&&(k="starting",r.dispatchEvent(new a("lazy activation",y))),(new e).resolve();var l=new e;return C=l,k="starting",r.dispatchEvent(new a("starting",y)),w=new e,_=r.connect(n,p,b),w.then(function(){w=null,k="active",r.dispatchEvent(new a("started",y)),C=null,l.resolve()},function(){w=null,k="stopping",r.dispatchEvent(new a("stopping",y)),Object.keys(N).forEach(function(e){N[e].registration.unregister(),delete N[e]}),r.disconnect(_),_=null,k="resolved",C=null,r.dispatchEvent(new a("stopped",y)),l.reject(new Error("plugin activation error"))}),l.promise},this.stop=function(t){if("uninstalled"===k)return(new e).reject(new Error("Plugin is uninstalled"));if(C)return C.promise.then(this.stop.bind(this,t));if(t&&t.transient||"stopped"!==P&&(P="stopped",v()),"active"!==k&&"starting"!==k)return(new e).resolve();var i=new e;return C=i,k="stopping",r.dispatchEvent(new a("stopping",y)),Object.keys(N).forEach(function(e){N[e].registration.unregister(),delete N[e]}),_&&(r.disconnect(_),_=null),k="resolved",C=null,r.dispatchEvent(new a("stopped",y)),i.resolve(),i.promise},S=function(t){if("uninstalled"===k)return(new e).reject(new Error("Plugin is uninstalled"));if(!t)return 0===T&&(T=(new Date).getTime(),v()),r.loadManifest(n).then(S);var o=E,s=R,l=P;if(E=t.headers||{},R=t.services||{},P=t.autostart||P,t.lastModified?T=t.lastModified:(T=(new Date).getTime(),v()),i(E,o)&&i(R,s)&&P===l)return(new e).resolve();if("active"===k||"starting"===k){var c=[];Object.keys(R).forEach(function(e){var t=R[e];c.push(e);var n=N[e];if(n){if(i(t.methods,Object.keys(n.proxy))){var o=g(t),r=n.registration.getReference(),s={};return r.getPropertyKeys().forEach(function(e){s[e]=r.getProperty(e)}),void(i(o,s)||n.registration.setProperties(o))}n.registration.unregister(),delete N[e]}f(t)}),Object.keys(N).forEach(function(e){-1===c.indexOf(e)&&(N[e].registration.unregister(),delete N[e])})}return"active"===k&&(r.disconnect(_),w=new e,_=r.connect(n,p,b),w.then(function(){w=null},function(){w=null,k="stopping",r.dispatchEvent(new a("stopping"),y),Object.keys(N).forEach(function(e){N[e].registration.unregister(),delete N[e]}),r.disconnect(_),_=null,k="resolved",r.dispatchEvent(new a("stopped",y))})),(new e).resolve()},this.update=function(e){return S(e).then(function(){r.dispatchEvent(new a("updated",y))})},this.uninstall=function(){return"uninstalled"===k?(new e).reject(new Error("Plugin is uninstalled")):"active"===k||"starting"===k||"stopping"===k?this.stop().then(this.uninstall.bind(this),this.uninstall.bind(this)):(r.removePlugin(this),k="uninstalled",r.dispatchEvent(new a("uninstalled",y)),(new e).resolve())}}function d(i,r){function s(e){var t=e.source;m.some(function(i){if(t===i.target){try{var n;if("undefined"==typeof i.useStructuredClone){var o="string"!=typeof e.data;n=o?e.data:JSON.parse(e.data),i.useStructuredClone=o}else n=i.useStructuredClone?e.data:JSON.parse(e.data);i.handler(n)}catch(r){}return!0}})}r=r||{};var l=r.storage||localStorage;l.getItem||(l=o(l));var d,u="installed",p=[],m=[],g=new t,f={},v={registerService:i.registerService.bind(i),connect:function(e,t,i,n){function o(e){var i=new Error(e);i.name="timeout",t({method:"timeout",error:i})}var r={handler:t,url:e},s=setTimeout(o.bind(null,"Load timeout for: "+e),n||15e3),a=document.createElement("iframe");return a.name=e+"_"+(new Date).getTime(),a.src=e,a.onload=function(){clearTimeout(s),s=setTimeout(o.bind(null,"Plugin handshake timeout for: "+e),5e3)},a.sandbox="allow-scripts allow-same-origin",a.style.width=a.style.height="100%",a.frameBorder=0,(i||d).appendChild(a),r.target=a.contentWindow,r.close=function(){if(clearTimeout(s),a){var e=a.parentNode;e&&e.removeChild(a),a=null}},m.push(r),r},disconnect:function(e){for(var t=0;t<m.length;t++)if(e===m[t]){m.splice(t,1);try{e.close()}catch(i){}break}},removePlugin:function(e){for(var t=0;t<p.length;t++)if(e===p[t]){p.splice(t,1);break}l.removeItem("plugin."+e.getLocation())},persist:function(e,t){l.setItem("plugin."+e,JSON.stringify(t))},postMessage:function(e,t){t.target.postMessage(t.useStructuredClone?e:JSON.stringify(e),t.url)},dispatchEvent:function(e){try{g.dispatchEvent(e)}catch(t){console&&console.log("PluginRegistry.dispatchEvent "+t)}},loadManifest:function(t){var i=new e,n=v.connect(t,function(e){if(n&&e.method)if("manifest"===e.method||"plugin"===e.method){var t=e.params[0];v.disconnect(n),n=null,i.resolve(t)}else"timeout"===e.method&&(v.disconnect(n),n=null,i.reject(e.error))});return i.promise},getState:function(){return u},handleServiceError:function(e,t){if(t&&401===t.status){var i=e.getHeaders(),n=e.getName()||e.getLocation(),o=document.createElement("span");if(o.appendChild(document.createTextNode("Authentication required for: "+n+".")),i.login){o.appendChild(document.createTextNode(" "));var r=document.createElement("a");r.target="_blank",r.textContent="Login",r.href=i.login,h.test(r.href)?(o.appendChild(r),o.appendChild(document.createTextNode(" and re-try the request."))):console.log("Illegal Login URL: "+i.login)}var s=new XMLSerializer;return{Severity:"Error",HTML:!0,Message:s.serializeToString(o)}}if(t.__isError){var a=t;t=new Error(a.message),Object.keys(a).forEach(function(e){t[e]=a[e]}),delete t.__isError}return t}};this.getLocation=function(){return"System"},this.getHeaders=function(){return{}},this.getName=function(){return"System"},this.getVersion=function(){return"0.0.0"},this.getLastModified=function(){return 0},this.getState=v.getState,this.init=function(){if("starting"!==u&&"active"!==u&&"stopping"!==u){addEventListener("message",s,!1);for(var e=[],t=0,i=l.length;i>t;t++)e.push(l.key(t));e.forEach(function(e){if(0===e.indexOf("plugin.")){var t=e.substring("plugin.".length),i=JSON.parse(l.getItem(e));i.created&&p.push(new c(t,i,v))}}),p.sort(function(e,t){return e._getCreated()<t._getCreated()?-1:1}),r.parent?d=r.parent:(d=document.createElement("div"),r.visible||(d.style.display="none",d.style.visibility="hidden"),document.body.appendChild(d)),r.plugins&&Object.keys(r.plugins).forEach(function(e){e=n(e);var t=this.getPlugin(e);if(!t){var i=r.plugins[e];"object"!=typeof i&&(i={}),i.autostart=i.autostart||r.defaultAutostart||"lazy",p.push(new c(e,i,v))}}.bind(this)),u="starting"}},this.start=function(){if("starting"!==u&&this.init(),"starting"!==u)return(new e).reject("Cannot start framework. Framework is already "+u+".");var t=[],i=(new Date).getTime();return p.forEach(function(e){var n=e._getAutostart();return 0===e.getLastModified()?void t.push(e.update().then(function(){return"started"===n?e.start({"transient":!0}):"lazy"===n?e.start({lazy:!0,"transient":!0}):void e._resolve()})):void("started"===n?t.push(e.start({"transient":!0})):"lazy"===n?(t.push(e.start({lazy:!0,"transient":!0})),i>e.getLastModified()+864e5&&e.update()):e._resolve())}),e.all(t,function(e){console.log("PluginRegistry.stop "+e)}).then(function(){u="active"})},this.stop=function(){if("starting"!==u&&"active"!==u)return(new e).reject("Cannot stop registry. Registry is already "+u+".");u="stopping";var t=[];return p.forEach(function(e){t.push(e.stop({"transient":!0}))}),e.all(t,function(e){console.log("PluginRegistry.stop "+e)}).then(function(){if(!r.parent){var e=d.parentNode;e&&e.removeChild(d)}d=null,removeEventListener("message",s),u="resolved"})},this.update=function(){this.stop().then(this.start.bind(this))},this.uninstall=function(){return(new e).reject("Cannot uninstall registry")},this.installPlugin=function(t,i){t=n(t);var o=this.getPlugin(t);if(o)return(new e).resolve(o);if(f[t])return f[t];if(i)return o=new c(t,i,v),p.push(o),o._persist(),v.dispatchEvent(new a("installed",o)),(new e).resolve(o);var r=v.loadManifest(t).then(function(e){return o=new c(t,e,v),p.push(o),o._persist(),delete f[t],v.dispatchEvent(new a("installed",o)),o},function(e){throw delete f[t],e});return f[t]=r,r},this.getPlugins=function(){return p.slice()},this.getPlugin=function(e){var t=null;return e=n(e),p.some(function(i){return e===i.getLocation()?(t=i,!0):void 0}),t},this.addEventListener=g.addEventListener.bind(g),this.removeEventListener=g.removeEventListener.bind(g),this.resolvePlugins=function(){var e=!0;return p.forEach(function(t){e=e&&t._resolve()}),e}}var h=new RegExp("^http[s]?","i");return{Plugin:c,PluginRegistry:d}}),define("orion/objects",[],function(){function e(e){for(var t=Object.prototype.hasOwnProperty,i=1,n=arguments.length;n>i;i++){var o=arguments[i];for(var r in o)t.call(o,r)&&(e[r]=o[r])}return e}return{clone:function(t){if(Array.isArray(t))return Array.prototype.slice.call(t);var i=Object.create(Object.getPrototypeOf(t));
return e(i,t),i},mixin:e,toArray:function(e){return Array.isArray(e)?e:[e]}}}),define("orion/serviceTracker",[],function(){function e(e,n){function o(e){var t=e.getProperty("service.id"),i=this.addingService(e);i&&(c[t]=e,d[t]=i)}function r(e){var t=e.getProperty("service.id"),i=d[t];delete c[t],delete d[t],this.removedService(e,i)}function s(e){return-1!==e.getProperty("objectClass").indexOf(n)}this.serviceRegistry=e;var a,l,c={},d={},h=t;this.close=function(){if(h!==i)throw"Already closed";h=t,e.removeEventListener("registered",a),e.removeEventListener("unregistering",l),a=null,l=null;var n=this;this.getServiceReferences().forEach(function(e){r.call(n,e)}),"function"==typeof this.onClose&&this.onClose()},this.getServiceReferences=function(){var e=Object.keys(c);return e.length?e.map(function(e){return c[e]}):null},this.open=function(){if(h!==t)throw"Already open";h=i;var c=this;a=function(e){return s(e.serviceReference)&&(o.call(c,e.serviceReference),"function"==typeof c.onServiceAdded)?c.onServiceAdded(e.serviceReference,c.serviceRegistry.getService(e.serviceReference)):void 0},l=function(e){s(e.serviceReference)&&r.call(c,e.serviceReference)},e.addEventListener("registered",a),e.addEventListener("unregistering",l),e.getServiceReferences(n).forEach(function(t){return o.call(c,t),"function"==typeof c.onServiceAdded?c.onServiceAdded(t,e.getService(t)):void 0}),"function"==typeof this.onOpen&&this.onOpen()}}var t=0,i=1;return e.prototype={addingService:function(e){return this.serviceRegistry.getService(e)},onOpen:null,onClose:null,onServiceAdded:null,removedService:function(){}},e}),define("orion/config",["orion/Deferred","orion/objects","orion/preferences","orion/serviceTracker"],function(e,t,i,n){var o,r,s,a,l,c=i.PreferencesService,d=c.DEFAULT_SCOPE,h="pid",u="orion.cm.managedservice",p="/cm/configurations";return o=function(t,i,o){function r(e,t,i){d[e]||(d[e]=[]),p[e]||(p[e]=[]),d[e].push(t),p[e].push(i)}function s(e,t,i){var n=d[e],o=p[e];n.length>1?n.splice(n.indexOf(t),1):delete d[e],o.length>1?o.splice(o.indexOf(i),1):delete p[e]}function a(e){return d[e]||[]}function l(e){return p[e]||[]}function c(e,t,n){t.forEach(function(o,r){try{var s=e[r].getProperty("__plugin__"),a=s&&i.getPlugin(s);(!s||a&&"active"===a.getState())&&t[r].updated(n)}catch(l){"undefined"!=typeof console&&console.log(l)}})}n.call(this,t,u);var d={},p={},m=function(i){var n=[];return i.plugin.getServiceReferences().forEach(function(e){if(-1!==e.getProperty("objectClass").indexOf(u)){var i=e.getProperty(h),r=t.getService(e);if(i&&r){var s=o._find(i),a=s&&s.getProperties();n.push(r.updated(a))}}}),e.all(n)};this.addingService=function(e){var i=e.getProperty(h),n=t.getService(e);return i&&n?(r(i,e,n),n):null},this.onServiceAdded=function(e,t){var i=e.getProperty(h),n=o._find(i);c([e],[t],n&&n.getProperties())},this.onOpen=function(){i.addEventListener("started",m)},this.onClose=function(){i.removeEventListener("started",m)},this.notifyUpdated=function(e){var t=e.getPid();c(a(t),l(t),e.getProperties())},this.notifyDeleted=function(e){var t=e.getPid();c(a(t),l(t),null)},this.removedService=function(e,t){var i=e.getProperty(h);s(i,e,t)}},r=function(){function e(e,t,i){this.store=new s(this,i),this.configAdmin=new a(this,this.store),this.tracker=new o(e,t,this.store)}return e.prototype={getConfigurationAdmin:function(){var e=this;return this.configAdmin._init().then(function(t){return e.tracker.open(),t})},notifyDeleted:function(e){this.tracker.notifyDeleted(e)},notifyUpdated:function(e){this.tracker.notifyUpdated(e)}},e}(),a=function(){function e(e,t){this.factory=e,this.store=t}return e.prototype={_prefName:p,_init:function(){var e=this;return this.store._init().then(function(){return e})},getConfiguration:function(e){return this.store.get(e)},getDefaultConfiguration:function(e){return this.store._find(e,d)},listConfigurations:function(){return this.store.list()}},e}(),s=function(){function t(t,i){this.factory=t,this.prefsService=i,this.configs=this.defaultConfigs=null,this.pref=null;var n=this;this.initPromise=e.all([this.prefsService.getPreferences(p,d),this.prefsService.getPreferences(p)]).then(function(e){var t=e[0];n.pref=e[1],n.defaultConfigs=n._toConfigs(t,!0),n.configs=n._toConfigs(n.pref,!1,t)})}return t.prototype={_toConfigs:function(e,t,i){var n=Object.create(null),o=this;return e.keys().forEach(function(r){if(!n[r]){var s=e.get(r),a=i&&i.get(r);"object"==typeof s&&null!==s&&Object.keys(s).length>0&&(s[h]=r,n[r]=new l(o.factory,o,s,t,a))}}),n},_init:function(){return this.initPromise},_find:function(e,t){return t===c.DEFAULT_SCOPE?this.defaultConfigs[e]||null:this.configs[e]||null},get:function(e){var t=this._find(e),i=this._find(e,d);if(!t){var n=i&&i.getProperties(!0);t=new l(this.factory,this,e,!1,n),this.configs[e]=t}return t},list:function(){var e=this,t=[];return this.pref.keys().forEach(function(i){var n=e._find(i);n&&null!==n.getProperties()&&t.push(n)}),t},remove:function(e){this.pref.remove(e),delete this.configs[e]},save:function(e,t){var i=t.getProperties(!0)||{},n=this._find(e,d);if(n){var o=n.getProperties(!0);Object.keys(o).forEach(function(e){Object.prototype.hasOwnProperty.call(i,e)&&i[e]===o[e]&&delete i[e]})}this.pref.put(e,i)}},t}(),l=function(){function e(e,i){i=t.clone(i),delete i[h],e.properties=i}function i(t,i,n,o,r){if(this.factory=t,this.store=i,this.readOnly=o,null!==n&&"object"==typeof n)this.pid=n[h],e(this,n);else{if("string"!=typeof n)throw new Error("Invalid pid/properties "+n);this.pid=n,this.properties=null}if(r){var s=this;Object.keys(r).forEach(function(e){e===h||Object.prototype.hasOwnProperty.call(s.properties,e)||(s.properties[e]=r[e])})}}return i.prototype={_checkReadOnly:function(){if(this.readOnly)throw new Error("Configuration is read only")},_checkRemoved:function(){if(this.removed)throw new Error("Configuration was removed")},getPid:function(){return this._checkRemoved(),this.pid},getProperties:function(e){this._checkRemoved();var i=null;return this.properties&&(i=t.clone(this.properties),e||(i[h]=this.pid)),i},remove:function(){this._checkReadOnly(),this._checkRemoved(),this.factory.notifyDeleted(this),this.store.remove(this.pid),this.removed=!0},update:function(t){this._checkReadOnly(),this._checkRemoved(),e(this,t),this.store.save(this.pid,this),this.factory.notifyUpdated(this)},toString:function(){return"[ConfigImpl pid: "+this.pid+", properties: "+JSON.stringify(this.properties)+"]"}},i}(),{ConfigurationAdminFactory:r}}),define("orion/bootstrap",["require","orion/Deferred","orion/serviceregistry","orion/preferences","orion/pluginregistry","orion/config"],function(e,t,i,n,o,r){function s(){if(a)return a;a=new t;var s=new i.ServiceRegistry,l=new n.PreferencesService(s);return l.getPreferences("/plugins").then(function(i){var n={plugins:{}};i.keys().forEach(function(t){var o=e.toUrl(t);n.plugins[o]=i[t]});var c=new o.PluginRegistry(s,n);return c.start().then(function(){return s.getServiceReferences("orion.core.preference.provider").length>0?l.getPreferences("/plugins",l.USER_SCOPE).then(function(i){var n=[];return i.keys().forEach(function(t){var i=e.toUrl(t);c.getPlugin(i)||n.push(c.installPlugin(i,{autostart:"lazy"}).then(function(e){return e.update().then(function(){return e.start({lazy:!0})})}))}),t.all(n,function(e){console.log(e)})}):void 0}).then(function(){return new r.ConfigurationAdminFactory(s,c,l).getConfigurationAdmin().then(s.registerService.bind(s,"orion.cm.configadmin"))}).then(function(){var e=s.getService("orion.core.auth");if(e){var t=e.getUser().then(function(t){return t?void localStorage.setItem("lastLogin",(new Date).getTime()):e.getAuthForm(window.location.href).then(function(e){setTimeout(function(){window.location=e},0)})}),i=localStorage.getItem("lastLogin");if(!i||i<(new Date).getTime()-9e5)return t}}).then(function(){var e={serviceRegistry:s,preferences:l,pluginRegistry:c};return a.resolve(e),e})})}var a;return{startup:s}}),define("orion/nls/root/messages",{Navigator:"Navigator",Sites:"Sites",Shell:"Shell",ShellLinkWorkspace:"Workspace Shell","Get Plugins":"Get Plugins",Global:"Global",Editor:"Editor",EditorRelatedLink:"Show Current Folder",EditorRelatedLinkParent:"Show Enclosing Folder",EditorLinkWorkspace:"Show Workspace",EditorRelatedLinkProj:"Show Project","Filter bindings":"Filter bindings","Orion Editor":"Orion Editor","Orion Image Viewer":"Orion Image Viewer","Orion Markdown Editor":"Orion Markdown Editor","Orion Markdown Viewer":"Orion Markdown Viewer","Orion JSON Editor":"Orion JSON Editor","View on Site":"View on Site","View this file or folder on a web site hosted by Orion":"View this file or folder on a web site hosted by Orion.","Show a list of all the keybindings on this page":"Show a list of all the keybindings on this page","Show Keys":"Show Keys","Hide or show the page banner and footer":"Hide or show the page banner and footer","Toggle banner and footer":"Toggle banner and footer","Choose a file by name and open an editor on it":"Choose a file by name and open an editor on it","Find File Named...":"Find File Named...","System Configuration Details":"System Configuration Details","System Config Tooltip":"Go to the System Configuration Details page","Background Operations":"Background Operations","Background Operations Tooltip":"Go to the Background Operations page","Operation status is unknown":"Operation status is unknown","Unknown item":"Unknown item","Can't search: no search service is available":"Can't search: no search service is available","could not find banner parent, id was ":"could not find banner parent, id was ",Related:"Related",Options:"Options",FAQ:"FAQ","Report a Bug":"Bugs","Privacy Policy":"Privacy","Terms of Use":"Terms","Copyright Agent":"Copyright","Orion Logo":"Orion Logo","Orion is in Beta. Please try it out but BEWARE your data may be lost.":"@buildLabel@","LOG: ":"LOG: ",View:"View","no parent":"no parent","no tree model":"no tree model","no renderer":"no renderer","could not find table row ":"could not find table row ","Resource is out of sync with the server. Do you want to save it anyway?":"Resource is out of sync with the server. Do you want to save it anyway?",Operations:"Operations","Operations running":"Operations running","Some operations finished with warning":"Some operations finished with warning","Some operations finished with error":"Some operations finished with error","no service registry":"no service registry",Tasks:"Tasks",Close:"Close","Expand all":"Expand all","Collapse all":"Collapse all",Search:"Search","Advanced search":"Advanced search",Submit:"Submit",More:"More","Recent searches":"Recent searches","Regular expression":"Regular expression","Search options":"Search options","Global search":"Global search","Orion Home":"Orion Home","Close notification":"Close notification","Operations - Press spacebar to show current operations":"Operations - Press spacebar to show current operations","Type a keyword or wild card to search in root":"Type a keyword or wild card to search in root","Toggle side panel":"Toggle side panel","Open or close the side panel":"Open or close the side panel",Projects:"Projects","Toggle Sidebar":"Toggle Sidebar","Sample HTML5 Site":"Sample HTML5 Site","Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.":"Generate an HTML5 'Hello World' website, including JavaScript, HTML, and CSS files.","Sample Orion Plugin":"Sample Orion Plugin","Generate a sample plugin for integrating with Orion.":"Generate a sample plugin for integrating with Orion.",Browser:"Web Browser",OutlineProgress:"Getting outline for ${0} from ${1}",UnknownError:"An unknown error occurred.",UnknownWarning:"An unknown warning occurred.",Filter:"Filter (* = any string, ? = any character)","To view the browser's context menu, trigger the context menu again.":"To view the browser's context menu, trigger the context menu again.",Edit:"Edit",CentralNavTooltip:"Toggle Navigation Menu"}),define("orion/nls/messages",["orion/i18n!orion/nls/messages","orion/nls/root/messages"],function(e,t){var i={root:t};return Object.keys(e).forEach(function(t){"undefined"==typeof i[t]&&(i[t]=e[t])}),i}),define("orion/util",[],function(){function e(e){var t=arguments;return e.replace(/\$\{([^\}]+)\}/g,function(e,i){return t[(i<<0)+1]})}function t(e,t){return e.createElementNS?e.createElementNS(y,t):e.createElement(t)}var i=navigator.userAgent,n=-1!==i.indexOf("MSIE")||-1!==i.indexOf("Trident")?document.documentMode:void 0,o=parseFloat(i.split("Firefox/")[1]||i.split("Minefield/")[1])||void 0,r=-1!==i.indexOf("Opera")?parseFloat(i.split("Version/")[1]):void 0,s=parseFloat(i.split("Chrome/")[1])||void 0,a=-1!==i.indexOf("Safari")&&!s,l=parseFloat(i.split("WebKit/")[1])||void 0,c=-1!==i.indexOf("Android"),d=-1!==i.indexOf("iPad"),h=-1!==i.indexOf("iPhone"),u=d||h,p=-1!==navigator.platform.indexOf("Mac"),m=-1!==navigator.platform.indexOf("Win"),g=-1!==navigator.platform.indexOf("Linux"),f="undefined"!=typeof document&&"ontouchstart"in document.createElement("input"),v=m?"\r\n":"\n",y="http://www.w3.org/1999/xhtml";return{formatMessage:e,createElement:t,isIE:n,isFirefox:o,isOpera:r,isChrome:s,isSafari:a,isWebkit:l,isAndroid:c,isIPad:d,isIPhone:h,isIOS:u,isMac:p,isWindows:m,isLinux:g,isTouch:f,platformDelimiter:v}}),define("orion/webui/littlelib",["orion/util"],function(e){function t(e,t){return t||(t=document),t.querySelector(e)}function i(e,t){return t||(t=document),t.querySelectorAll(e)}function n(e,t){return Array.prototype.slice.call(i(e,t))}function o(e){var t=e;return"string"==typeof e&&(t=document.getElementById(e)),t}function r(e,t){if(!e||!t)return!1;if(e===t)return!0;var i=e.compareDocumentPosition(t);return Boolean(16&i)}function s(e){var t=e.getBoundingClientRect();return{left:t.left+document.documentElement.scrollLeft,top:t.top+document.documentElement.scrollTop,width:t.width,height:t.height}}function a(e){for(;e.hasChildNodes();){var t=e.firstChild;e.removeChild(t)}}function l(t){var i=t.tabIndex;if(0===i&&e.isIE){var n={a:!0,body:!0,button:!0,frame:!0,iframe:!0,img:!0,input:!0,isindex:!0,object:!0,select:!0,textarea:!0};n[t.nodeName.toLowerCase()]||t.attributes.tabIndex||(i=-1)}return i}function c(e){if(l(e)>=0)return e;if(e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++){var i=c(e.childNodes[t]);if(i)return i}return null}function d(e){if(l(e)>=0)return e;if(e.hasChildNodes())for(var t=e.childNodes.length-1;t>=0;t--){var i=d(e.childNodes[t]);if(i)return i}return null}function h(e,t){if(3===e.nodeType){var i=y.exec(e.nodeValue);i&&i.length>1&&t(e,i)}if(e.hasChildNodes())for(var n=0;n<e.childNodes.length;n++)h(e.childNodes[n],t)}function u(e,t){h(e,function(e,i){var n=t[i[1]]||i[1];e.parentNode.replaceChild(document.createTextNode(n),e)})}function p(e,t){h(e,function(e,i){var n=t[i[1]];if(n){var o=document.createRange(),r=i.index;o.setStart(e,r),o.setEnd(e,r+i[0].length),o.deleteContents(),o.insertNode(n)}})}function m(t,i){function n(e){C.forEach(function(t){var i=!1,n=t.excludeNodes.some(function(t){return document.body.contains(t)?(i=!0,t.contains(e.target)):!1});if(i&&!n)try{t.dismiss(e)}catch(o){"undefined"!=typeof console&&console&&console.error(o&&o.message)}}),C=C.filter(function(e){return e.excludeNodes.some(function(e){return document.body.contains(e)})})}null===C&&(C=[],document.addEventListener("click",n,!0),e.isIOS&&document.addEventListener("touchend",function(e){function t(){e.target.removeEventListener("click",t)}0===e.touches.length&&e.target.addEventListener("click",t)},!1)),C.push({excludeNodes:t,dismiss:i})}function g(e){C=C.filter(function(t){return e!==t.dismiss})}function f(e){window.document.all&&(e.keyCode=0),e.preventDefault&&(e.preventDefault(),e.stopPropagation())}function v(e){for(var t=document.getElementsByTagName("iframe"),i=0;i<t.length;i++)t[i].parentNode.style.pointerEvents=e?"":"none"}var y=/\$\{([^\}]+)\}/,C=null,w={BKSPC:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DEL:46};return{$:t,$$:i,$$array:n,node:o,contains:r,bounds:s,empty:a,firstTabbable:c,lastTabbable:d,stop:f,processTextNodes:u,processDOMNodes:p,addAutoDismiss:m,setFramesEnabled:v,removeAutoDismiss:g,KEY:w}}),define("text",["module"],function(e){var t,i,n=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],o=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,r=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,s="undefined"!=typeof location&&location.href,a=s&&location.protocol&&location.protocol.replace(/\:/,""),l=s&&location.hostname,c=s&&(location.port||void 0),d=[],h=e.config&&e.config()||{};return t={version:"2.0.5",strip:function(e){if(e){e=e.replace(o,"");var t=e.match(r);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:h.createXhr||function(){var e,t,i;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){i=n[t];try{e=new ActiveXObject(i)}catch(o){}if(e){n=[i];break}}return e},parseName:function(e){var t,i,n,o=!1,r=e.indexOf("."),s=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!s||r>1)?(t=e.substring(0,r),i=e.substring(r+1,e.length)):t=e,n=i||t,r=n.indexOf("!"),-1!==r&&(o="strip"===n.substring(r+1),n=n.substring(0,r),i?i=n:t=n),{moduleName:t,ext:i,strip:o}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,i,n,o){var r,s,a,l=t.xdRegExp.exec(e);return l?(r=l[2],s=l[3],s=s.split(":"),a=s[1],s=s[0],!(r&&r!==i||s&&s.toLowerCase()!==n.toLowerCase()||(a||s)&&a!==o)):!0},finishLoad:function(e,i,n,o){n=i?t.strip(n):n,h.isBuild&&(d[e]=n),o(n)},load:function(e,i,n,o){if(o.isBuild&&!o.inlineText)return void n();h.isBuild=o.isBuild;var r=t.parseName(e),d=r.moduleName+(r.ext?"."+r.ext:""),u=i.toUrl(d),p=h.useXhr||t.useXhr;!s||p(u,a,l,c)?t.get(u,function(i){t.finishLoad(e,r.strip,i,n)},function(e){n.error&&n.error(e)}):i([d],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,n)})},write:function(e,i,n){if(d.hasOwnProperty(i)){var o=t.jsEscape(d[i]);n.asModule(e+"!"+i,"define(function () { return '"+o+"';});\n")}},writeFile:function(e,i,n,o,r){var s=t.parseName(i),a=s.ext?"."+s.ext:"",l=s.moduleName+a,c=n.toUrl(s.moduleName+a)+".js";t.load(l,n,function(){var i=function(e){return o(c,e)};i.asModule=function(e,t){return o.asModule(e,c,t)},t.write(e,l,i,r)},r)}},"node"===h.env||!h.env&&"undefined"!=typeof process&&process.versions&&process.versions.node?(i=require.nodeRequire("fs"),t.get=function(e,t){var n=i.readFileSync(e,"utf8");0===n.indexOf("﻿")&&(n=n.substring(1)),t(n)}):"xhr"===h.env||!h.env&&t.createXhr()?t.get=function(e,i,n,o){var r,s=t.createXhr();if(s.open("GET",e,!0),o)for(r in o)o.hasOwnProperty(r)&&s.setRequestHeader(r.toLowerCase(),o[r]);h.onXhr&&h.onXhr(s,e),s.onreadystatechange=function(){var t,o;4===s.readyState&&(t=s.status,t>399&&600>t?(o=new Error(e+" HTTP status: "+t),o.xhr=s,n(o)):i(s.responseText))},s.send(null)}:("rhino"===h.env||!h.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java)&&(t.get=function(e,t){var i,n,o="utf-8",r=new java.io.File(e),s=java.lang.System.getProperty("line.separator"),a=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),o)),l="";try{for(i=new java.lang.StringBuffer,n=a.readLine(),n&&n.length()&&65279===n.charAt(0)&&(n=n.substring(1)),null!==n&&i.append(n);null!==(n=a.readLine());)i.append(s),i.append(n);l=String(i.toString())}finally{a.close()}t(l)}),t}),define("text!orion/banner/slideout.html",[],function(){return'<div id="slideContainer" class="slideParameters slideContainer">\r\n	<span id="pageCommandParameters" class="layoutLeft parameters"></span>\r\n	<span id="pageCommandDismiss" class="layoutRight parametersDismiss"></span>\r\n</div>'}),define("orion/commonHTMLFragments",["require","orion/webui/littlelib","text!orion/banner/slideout.html"],function(e,t,i){function n(e){var n=document.createElement("div");n.innerHTML=i;var o=t.$("#slideContainer",n);return o.id=e+o.id,o=t.$("#pageCommandParameters",n),o.id=e+o.id,o=t.$("#pageCommandDismiss",n),o.id=e+o.id,n.innerHTML}return{slideoutHTMLFragment:n}}),define("orion/keyBinding",["orion/util"],function(e){function t(e,t,i,n,o,r){this.type=r||"keydown",this.keyCode="string"==typeof e&&"keydown"===this.type?e.toUpperCase().charCodeAt(0):e,this.mod1=void 0!==t&&null!==t?t:!1,this.mod2=void 0!==i&&null!==i?i:!1,this.mod3=void 0!==n&&null!==n?n:!1,this.mod4=void 0!==o&&null!==o?o:!1}function i(e){this.keys=e}return t.prototype={getKeys:function(){return[this]},match:function(t,i){if(void 0!==i){if(0!==i)return!1}else if(t instanceof Array){if(t.length>1)return!1;t=t[0]}if(t.type!==this.type)return!1;if(this.keyCode===t.keyCode||this.keyCode===String.fromCharCode(e.isOpera?t.which:void 0!==t.charCode?t.charCode:t.keyCode)){var n=e.isMac?t.metaKey:t.ctrlKey;return this.mod1!==n?!1:"keydown"===this.type&&this.mod2!==t.shiftKey?!1:this.mod3!==t.altKey?!1:e.isMac&&this.mod4!==t.ctrlKey?!1:!0}return!1},equals:function(e){return e?this.keyCode!==e.keyCode?!1:this.mod1!==e.mod1?!1:this.mod2!==e.mod2?!1:this.mod3!==e.mod3?!1:this.mod4!==e.mod4?!1:this.type!==e.type?!1:!0:!1}},i.prototype={getKeys:function(){return this.keys.slice(0)},match:function(e,t){var i=this.keys;if(void 0!==t)return t>i.length?!1:i[t].match(e)?t===i.length-1?!0:t+1:!1;if(e instanceof Array||(e=[e]),e.length>i.length)return!1;var n;for(n=0;n<e.length;n++)if(!i[n].match(e[n]))return!1;return n===i.length?!0:n},equals:function(e){if(!e.keys)return!1;if(e.keys.length!==this.keys.length)return!1;for(var t=0;t<e.keys.length;t++)if(!e.keys[t].equals(this.keys[t]))return!1;return!0}},{KeyBinding:t,KeyStroke:t,KeySequence:i}}),define("orion/webui/dropdown",["require","orion/webui/littlelib","orion/EventTarget"],function(e,t,i){function n(e){i.attach(this),this._init(e)}function o(e,t){t=void 0===t?"span":t;var i=document.createElement(t);i.tabIndex=0,i.className="dropdownMenuItem",i.role="menuitem";var n=document.createElement("span");n.appendChild(document.createTextNode(e)),n.classList.add("dropdownCommandName"),i.appendChild(n);var o=document.createElement("li");return o.appendChild(i),o}function r(){var e=document.createElement("li");return e.classList.add("dropdownSeparator"),e}function s(e,t){var i=document.createElement("span");i.classList.add("dropdownKeyBinding"),i.appendChild(document.createTextNode(t)),e.appendChild(i)}return n.prototype={_init:function(e){if(this._dropdownNode=t.node(e.dropdown),!this._dropdownNode)throw"no dom node for dropdown found";if(this._populate=e.populate,this._selectionClass=e.selectionClass,this._parentDropdown=e.parentDropdown,this._positioningNode=e.positioningNode,!this._parentDropdown)for(var i=this._dropdownNode.parentNode;i&&document!==i;){if(i.classList&&i.classList.contains("dropdownMenu")){this._parentDropdown=i.dropdown;break}i=i.parentNode}if(this._dropdownNode.tabIndex=0,this._triggerNode=e.triggerNode?e.triggerNode:t.$(".dropdownTrigger",this._dropdownNode.parentNode),!this._triggerNode)throw"no dom node for dropdown trigger found";if(!e.skipTriggerEventListeners){var n=this;this._triggerNode.addEventListener("click",function(e){n.toggle(e)&&t.stop(e)},!1),"span"===this._triggerNode.tagName.toLowerCase()&&this._triggerNode.addEventListener("keydown",function(e){(e.keyCode===t.KEY.ENTER||e.keyCode===t.KEY.SPACE)&&(n.toggle(),t.stop(e))},!1)}this._dropdownNode.addEventListener("keydown",this._dropdownKeyDown.bind(this),!1)},addTriggerNode:function(e){var i=this;e.addEventListener("click",function(e){i.toggle(e)&&t.stop(e)},!1)},toggle:function(e){return this.isVisible()?this.close():this.open(e)},isVisible:function(){return this._isVisible},open:function(e){var i=!1;if(!this.isVisible()){this.dispatchEvent({type:"triggered",dropdown:this,event:e}),t.setFramesEnabled(!1),this._populate&&(this.empty(),this._populate(this._dropdownNode));var n=this.getItems();if(n.length>0){if(!this._hookedAutoDismiss){this._boundAutoDismiss?t.removeAutoDismiss(this._boundAutoDismiss):this._boundAutoDismiss=this._autoDismiss.bind(this);var o=t.$$array(".dropdownSubMenu",this._dropdownNode);t.addAutoDismiss([this._triggerNode].concat(o),this._boundAutoDismiss),this._hookedAutoDismiss=!0}this._triggerNode.classList.add("dropdownTriggerOpen"),this._selectionClass&&this._triggerNode.classList.add(this._selectionClass),this._dropdownNode.classList.add("dropdownMenuOpen"),this._isVisible=!0,this._positionDropdown(e),this._focusDropdownNode(),i=!0,this._parentDropdown&&this._parentDropdown.submenuOpen(this)}}return i},_focusDropdownNode:function(){this._dropdownNode.focus()},_autoDismiss:function(e){if(this.close(!1)&&this._dropdownNode.contains(e.target))for(var t=this._parentDropdown;t;)t.close(!1),t=t._parentDropdown},_positionDropdown:function(){if(this._dropdownNode.style.left="",this._dropdownNode.style.top="",this._positioningNode)return void(this._dropdownNode.style.left=this._positioningNode.offsetLeft+"px");var e=t.bounds(this._dropdownNode),i=t.bounds(document.body);if(e.left+e.width>i.left+i.width)if(this._triggerNode.classList.contains("dropdownMenuItem"))this._dropdownNode.style.left=-e.width+"px";else{var n=t.bounds(this._boundingNode(this._triggerNode)),o=t.bounds(this._triggerNode);this._dropdownNode.style.left=o.left-n.left-e.width+o.width+"px"}var r=e.top+e.height-(i.top+i.height);r>0&&(this._dropdownNode.style.top=Math.floor(this._dropdownNode.style.top-r)+"px")},_boundingNode:function(e){var t=window.getComputedStyle(e,null);if(null===t)return e;var i=t.getPropertyValue("position");return"absolute"!==i&&e.parentNode&&e!==document.body?this._boundingNode(e.parentNode):e},close:function(e){var i=!1;return this.isVisible()&&(this._triggerNode.classList.remove("dropdownTriggerOpen"),this._selectionClass&&this._triggerNode.classList.remove(this._selectionClass),this._dropdownNode.classList.remove("dropdownMenuOpen"),t.setFramesEnabled(!0),e&&this._triggerNode.focus(),this._isVisible=!1,this._selectedItem&&(this._selectedItem.classList.remove("dropdownMenuItemSelected"),this._selectedItem=null),i=!0),i},getItems:function(){var e=t.$$array("li:not(.dropdownSeparator) > .dropdownMenuItem",this._dropdownNode,!0),i=[],n=this;return e.forEach(function(e){e.parentNode.parentNode===n._dropdownNode&&i.push(e)}),i.forEach(function(e){e._hasDropdownMouseover||(e.addEventListener("mouseover",function(i){e.dropdown?e.dropdown.open(i):(n._closeSelectedSubmenu(),t.stop(i)),n._selectItem(e)}),e._hasDropdownMouseover=!0)}),i},empty:function(){var e=t.$$array("li",this._dropdownNode),i=this;e.forEach(function(e){e.parentNode===i._dropdownNode&&e.parentNode.removeChild(e)}),this._hookedAutoDismiss=!1},_dropdownKeyDown:function(e){if(e.keyCode===t.KEY.UP||e.keyCode===t.KEY.DOWN||e.keyCode===t.KEY.RIGHT||e.keyCode===t.KEY.ENTER||e.keyCode===t.KEY.LEFT){var i=this.getItems();if(i.length&&i.length>0){if(this._selectedItem){var n=i.indexOf(this._selectedItem);0>n&&(n=i.indexOf(this._selectedItem.parentNode)),n>=0&&(e.keyCode===t.KEY.UP&&n>0?(n--,this._selectItem(i[n])):e.keyCode===t.KEY.DOWN&&n<i.length-1?(n++,this._selectItem(i[n])):e.keyCode===t.KEY.ENTER||e.keyCode===t.KEY.RIGHT?this._selectedItem.classList.contains("dropdownTrigger")&&this._selectedItem.dropdown?(this._selectedItem.dropdown.open(),this._selectedItem.dropdown._selectItem()):e.keyCode===t.KEY.ENTER&&this._selectedItem.click():e.keyCode===t.KEY.LEFT&&this._selectedItem.parentNode.parentNode.classList.contains("dropdownMenuOpen")&&(this.close(!0),this._parentDropdown&&this._parentDropdown._dropdownNode.focus()))}else this._selectItem(i[0]);t.stop(e)}}else e.keyCode===t.KEY.ESCAPE&&(this.close(!0),t.stop(e))},_selectItem:function(e){var t=e||this.getItems()[0];t&&(this._selectedItem&&this._selectedItem.classList.remove("dropdownMenuItemSelected"),this._selectedItem=t,this._selectedItem.classList.add("dropdownMenuItemSelected")),document.activeElement!==this._dropdownNode&&this._dropdownNode.focus()},submenuOpen:function(e){e!==this._selectedSubmenu&&(this._closeSelectedSubmenu(),this._selectedSubmenu=e)},_closeSelectedSubmenu:function(){for(var e=this._selectedSubmenu;e;)e.close(),e=e._selectedSubmenu},destroy:function(){this.empty(),this._boundAutoDismiss&&t.removeAutoDismiss(this._boundAutoDismiss)},appendMenuItem:function(e,t){var i=o(e,t);return this._dropdownNode.appendChild(i),i},appendSeparator:function(){var e=r();return this._dropdownNode.appendChild(e),e}},n.prototype.constructor=n,{Dropdown:n,appendKeyBindingString:s,createMenuItem:o,createSeparator:r}}),define("text!orion/webui/dropdowntriggerbutton.html",[],function(){return'<button class="dropdownTrigger">${ButtonText}<!--span class="dropdownArrowDown core-sprite-openarrow"></span--></button><ul class="dropdownMenu"></ul>'}),define("text!orion/webui/dropdowntriggerbuttonwitharrow.html",[],function(){return'<button class="dropdownTrigger dropdownDefaultButton">${ButtonText}<span class="dropdownArrowDown core-sprite-openarrow"></span></button><ul class="dropdownMenu"></ul>'}),define("text!orion/webui/submenutriggerbutton.html",[],function(){return'<li class="dropdownSubMenu"><span class="dropdownTrigger dropdownMenuItem" role="menuitem" tabindex="0"><span class="dropdownCommandName">${ButtonText}</span><span class="dropdownArrowRight core-sprite-closedarrow"></span></span><ul class="dropdownMenu"></ul></li>'}),define("text!orion/webui/checkedmenuitem.html",[],function(){return'<li><label class="dropdownMenuItem"><input class="checkedMenuItem" role="menuitem" type="checkbox" />${ItemText}</label></li>'}),define("orion/webui/tooltip",["require","orion/webui/littlelib"],function(e,t){function i(e){this._init(e)}return i.prototype={_init:function(e){if(this._node=t.node(e.node),!this._node)throw"no dom node for tooltip found";this._position=e.position||["right","above","below","left"],this._text=e.text,this._hideDelay=void 0===e.hideDelay?200:e.hideDelay,this._tailSize=e.tailSize||10,this._trigger=e.trigger||"mouseover",this._afterShowing=e.afterShowing,this._afterHiding=e.afterHiding;var i=this;if("click"===this._trigger)this._showDelay=0,this._node.addEventListener("click",this._clickHandler=function(e){e.target===i._node&&(i.show(),t.stop(e))},!1);else if("mouseover"===this._trigger){this._showDelay=void 0===e.showDelay?500:e.showDelay;var n=["mouseout","click"];this._node.addEventListener("mouseover",this._mouseoverHandler=function(e){t.contains(i._node,e.target)&&(i.show(),t.stop(e))},!1),this._leaveHandler=function(e){t.contains(i._node,e.target)&&i.hide()};for(var o=0;o<n.length;o++)this._node.addEventListener(n[o],this._leaveHandler,!1)}},_makeTipNode:function(){if(!this._tip){if(this._tip=document.createElement("span"),this._tip.classList.add("tooltipContainer"),this._tipInner=document.createElement("div"),this._tipInner.classList.add("tooltip"),this._text){this._tipTextContent=document.createElement("div"),this._tipTextContent.classList.add("textContent"),this._tipInner.appendChild(this._tipTextContent);var e=document.createTextNode(this._text);this._tipTextContent.appendChild(e)}this._tip.appendChild(this._tipInner),document.body.appendChild(this._tip);var i=this;t.addAutoDismiss([this._tip,this._node],function(){i.hide()}),"mouseover"===this._trigger&&(this._tipInner.role="tooltip",this._tipInner.id="tooltip"+(new Date).getTime().toString(),this._node.setAttribute("aria-describedby",this._tipInner.id),this._tip.addEventListener("mouseover",function(){i._timeout&&(window.clearTimeout(i._timeout),i._timeout=null),i._tip.addEventListener("mouseout",function(e){t.contains(i._tip,e.target)&&(i.hide(),t.stop(e))},!1)},!1))}return this._tip},_positionTip:function(e,i){this._makeTipNode(),"left"===e?this._tipInner.classList.add("left"):this._tipInner.classList.remove("left");var n,o=this._node;for(n=t.bounds(o);o&&!n.width&&!n.height;o=o.parentNode)n=t.bounds(o);
var r,s,a=t.bounds(this._tipInner);switch(e){case"above":r=n.top-a.height-this._tailSize-1,s=n.left-this._tailSize;break;case"below":r=n.top+n.height+this._tailSize+1,s=n.left-this._tailSize;break;case"left":r=n.top-this._tailSize/2,s=n.left-a.width-this._tailSize-1;break;default:r=n.top-this._tailSize/2,s=n.left+n.width+this._tailSize+1}var l=t.bounds(document.documentElement);if(r+a.height>l.height){if(!i)return!1;r=l.height-a.height-1}if(s+a.width>l.width){if(!i)return!1;s=l.width-a.width-1}if(0>s){if(!i)return!1;s=4}if(0>r){if(!i)return!1;r=4}return this._tail&&this._tail.previousPosition!==e&&(this._tip.removeChild(this._tail),this._tail=null),this._tail||(this._tail=document.createElement("span"),this._tail.classList.add("tooltipTailFrom"+e),"above"===e||"left"===e?this._tip.appendChild(this._tail):this._tip.insertBefore(this._tail,this._tipInner),this._tail.previousPosition=e),this._tip.style.top=r+"px",this._tip.style.left=s+"px",!0},contentContainer:function(){return this._makeTipNode(),this._tipInner},show:function(){this._tip&&this._tip.classList.contains("tooltipShowing")||(this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),this._showDelay?this._timeout=window.setTimeout(this._showImmediately.bind(this),this._showDelay):this._showImmediately())},_showImmediately:function(){for(var e=!1,t=0;!e&&t<this._position.length;)e=this._positionTip(this._position[t]),t++;e||this._positionTip(this._position[0],!0),this._tip.classList.add("tooltipShowing"),this._afterShowing&&this._afterShowing()},hide:function(e){if(this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),this._tip&&this._tip.classList.contains("tooltipShowing")){void 0===e&&(e=this._hideDelay);var t=this;this._timeout=window.setTimeout(function(){t._tip.classList.remove("tooltipShowing"),t._tip.removeAttribute("style"),t._afterHiding&&t._afterHiding()},e)}},destroy:function(){if(this._timeout&&(window.clearTimeout(this._timeout),this._timeout=null),this._tip&&(document.body.removeChild(this._tip),this._tip=null,this._tipInner=null,this._tipTextContent=null,this._tail=null),this._node){this._node.removeEventListener("click",this._clickHandler,!1),this._node.removeEventListener("mouseover",this._mouseoverHandler,!1);for(var e=["mouseout","click"],t=0;t<e.length;t++)this._node.removeEventListener(e[t],this._leaveHandler,!1)}}},i.prototype.constructor=i,{Tooltip:i}}),define("orion/commands",["orion/util","orion/webui/littlelib","orion/webui/dropdown","text!orion/webui/dropdowntriggerbutton.html","text!orion/webui/dropdowntriggerbuttonwitharrow.html","text!orion/webui/submenutriggerbutton.html","text!orion/webui/checkedmenuitem.html","orion/webui/tooltip"],function(e,t,i,n,o,r,s,a){function l(e){S=e}function c(e){var t=e.invocation;if(t){var i=e.command;if(i.hrefCallback){var n=i.hrefCallback.call(t.handler||window,t);return n.then?n.then(function(e){window.open(e)}):window.open(n),!0}if(t.commandRegistry)return t.commandRegistry._invoke(t),!0;if(i.onClick||i.callback)return window.setTimeout(function(){(i.onClick||i.callback).call(t.handler||window,t)},0),!0}return!1}function d(e,i){for(var n in i)if(i[n]&&i[n].keyBinding&&i[n].command&&i[n].keyBinding.match(e)){var o=i[n],r=o.keyBinding;if((!r.domScope||t.contains(t.node(r.domScope),e.target))&&c(o))return void t.stop(e)}}function h(){var e={};if(S){var t,i,n;for(i=Object.keys(L),t=0;t<i.length;t++)n=i[t],e[n]=L[n];var o=S();for(i=Object.keys(o),t=0;t<i.length;t++)n=i[t],e[n]=o[n]}else e=L;return e}function u(e){d(e,h())}function p(t,i){function n(t){if(e.isMac){if(t.metaKey&&!t.altKey)return t.shiftKey||t.ctrlKey||65!==t.keyCode&&67!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode&&90!==t.keyCode?!1:!0;if(t.ctrlKey)return!1}else{if(t.ctrlKey&&!t.altKey)return t.shiftKey||65!==t.keyCode&&67!==t.keyCode&&86!==t.keyCode&&88!==t.keyCode&&90!==t.keyCode?!1:!0;if(t.altKey&&!t.ctrlKey)return!1}if(t["char"])return t["char"].length>0;if(t.charCode||t.keyCode){var i=t.charCode||t.keyCode;switch(i){case 8:case 9:case 13:case 46:return!0;default:return i>=32&&112>i||i>123}}return!1}if(t=t||window.event,n(t)){if("true"===t.target.contentEditable)return;var o=t.target.nodeName.toLowerCase();if("input"===o){var r=t.target.type.toLowerCase();switch(r){case"text":case"password":case"search":case"color":case"date":case"datetime":case"datetime-local":case"email":case"month":case"number":case"range":case"tel":case"time":case"url":case"week":return}}else if("textarea"===o)return}i?i(t):u(t)}function m(){this._init()}function g(e,t,i){t.classList.add("commandImage");var n;return e.imageClass?e.addImageClassToElement?t.classList.add(e.imageClass):(n=document.createElement("span"),t.appendChild(n),n.classList.add(e.spriteClass),n.classList.add(e.imageClass)):(n=new Image,n.alt=e.name,n.name=i,n.id=i,n.src=e.image,t.appendChild(n)),n}function f(e,r,s,a,l,c,d,h,u){if(e=t.node(e),!e)throw"no parent node was specified";var p=document.createRange();p.selectNode(e);var m=p.createContextualFragment(u?o:n);t.processTextNodes(m,{ButtonText:r}),e.appendChild(m);var f,v,y=e.lastChild;return u?(f=y.previousSibling,v=f.lastChild):f=y.previousSibling,a?f.classList.add(a):(f.classList.add("orionButton"),f.classList.add("commandButton")),l&&(c||(f.textContent="",f.setAttribute("aria-label",r)),g({spriteClass:"commandSprite",imageClass:l},f,r),f.classList.add("orionButton")),f.dropdown=new i.Dropdown({dropdown:y,populate:s,selectionClass:d,skipTriggerEventListeners:!!v,positioningNode:h}),y.dropdown=f.dropdown,{menuButton:f,menu:y,dropdown:f.dropdown,dropdownArrow:v}}function v(e,i,n,o){if(e=t.node(e),!e)throw"no parent node was specified";var r=document.createRange();r.selectNode(e);var a=r.createContextualFragment(s);t.processTextNodes(a,{ItemText:i}),e.appendChild(a);var l=e.lastChild,c=t.$(".checkedMenuItem",l);return c.checked=n,c.addEventListener("change",o,!1),c}function y(e,t,i,n,o,r,s){var l;if(r=r||!t.name&&t.hasImage(),t.hrefCallback){l=document.createElement("a"),l.id=n,r&&t.hasImage()?g(t,l,n):(l.className="commandLink",l.appendChild(document.createTextNode(t.name)));var c=t.hrefCallback.call(i.handler,i);c.then?c.then(function(e){l.href=e}):l.href=c?c:"#"}else{if(l=document.createElement("button"),l.className="orionButton",r)t.hasImage()?(g(t,l,n),t.name&&l.setAttribute("aria-label",t.name)):(l.classList.add("commandButton"),l.classList.add("commandMissingImageButton"),l.appendChild(document.createTextNode(t.name)));else{l.classList.add("commandButton");var d=document.createTextNode(t.name);l.appendChild(d)}var h=s||t.callback;h&&(t.onClick=h,l.addEventListener("click",function(){h.call(i.handler,i)},!1))}if("ul"===e.nodeName.toLowerCase()){var u=document.createElement("li");e.appendChild(u),e=u}else l.classList.add("commandMargins");return e.appendChild(l),t.tooltip&&(l.commandTooltip=new a.Tooltip({node:l,text:t.tooltip,position:["above","below","right","left"]})),o&&(L[t.id]={keyBinding:o,command:t,invocation:i}),l}function C(e,n,o,r,s,l){var c,d,h=e.dropdown;if(n.hrefCallback){d=i.createMenuItem(n.name,"a"),c=d.firstElementChild;var u=n.hrefCallback.call(o.handler,o);u.then?u.then(function(e){c.href=e}):c.href=u?u:"#",c.addEventListener("keydown",function(e){(e.keyCode===t.KEY.ENTER||e.keyCode===t.KEY.SPACE)&&c.click()},!1)}else{d=i.createMenuItem(n.name),c=d.firstElementChild;var p=s||n.callback;p&&(n.onClick=p,c.addEventListener("click",function(){h.close(!0),p.call(o.handler,o)},!1),c.addEventListener("keydown",function(e){(e.keyCode===t.KEY.ENTER||e.keyCode===t.KEY.SPACE)&&(e.preventDefault(),c.click())},!1))}return n.tooltip&&(c.commandTooltip=new a.Tooltip({node:c,text:n.tooltip,position:["above","below","right","left"]})),l&&i.appendKeyBindingString(c,l),e.appendChild(d),r&&(L[n.id]={keyBinding:r,command:n,invocation:o}),c}function w(e,t,i,n,o){this.commandRegistry=o,this.handler=e,this.items=t,this.userData=i,this.command=n,n.parameters&&(this.parameters=n.parameters.makeCopy()),this.id=n.id}function _(e){this._init(e)}var b="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQAQMAAAAlPW0iAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAAtJREFUCNdjIBEAAAAwAAFletZ8AAAAAElFTkSuQmCC",S=null,L={};return m.prototype={setProxy:function(e){this.proxy=e},setKeyBindings:function(e){this.bindings=e},_init:function(){var e=this;document.addEventListener("keydown",function(i){return p(i,function(i){var n=e.proxy,o=e.bindings;if(o&&n)for(var r=0;r<o.length;r++)o[r].match(i)&&(n.processKey({type:i.type,keyCode:i.keyCode,altKey:i.altKey,ctrlKey:i.ctrlKey,metaKey:i.metaKey,shiftKey:i.shiftKey}),t.stop(i))})})}},window.document.addEventListener("keydown",p,!1),w.prototype={collectsParameters:function(){return this.commandRegistry&&this.commandRegistry.collectsParameters()},makeCopy:function(e){var t=new w(this.handler,this.items,this.userData,this.command,this.commandRegistry);return t.domNode=this.domNode,t.domParent=this.domParent,e?t.parameters=e.makeCopy():this.parameters&&(t.parameters=this.parameters.makeCopy()),t}},w.prototype.constructor=w,_.prototype={_init:function(e){this.id=e.id,this.name=e.name,this.tooltip=e.tooltip,this.callback=e.callback,this.hrefCallback=e.hrefCallback,this.choiceCallback=e.choiceCallback,this.positioningNode=e.positioningNode,this.image=e.image||b,this.imageClass=e.imageClass,this.addImageClassToElement=e.addImageClassToElement,this.selectionClass=e.selectionClass,this.spriteClass=e.spriteClass||"commandSprite",this.visibleWhen=e.visibleWhen,this.parameters=e.parameters,this.isEditor=e.isEditor},populateChoicesMenu:function(e,i,n,o,r){var s=this.getChoices(i,n,o),a=s.some(function(e){return e.checked});s.forEach(function(n){if(n.name){var o=document.createElement("li");e.appendChild(o);var s=document.createElement("span");if(s.tabIndex=0,s.role="menuitem",s.classList.add("dropdownMenuItem"),a){var l=document.createElement("span");l.classList.add("check"),l.appendChild(document.createTextNode(n.checked?"●":"")),s.appendChild(l)}var c=document.createTextNode(n.name);s.appendChild(c),o.appendChild(s),s.choice=n,s.addEventListener("click",function(e){e.target.choice&&e.target.choice.callback.call(e.target.choice,i)},!1),s.addEventListener("keydown",function(e){(e.keyCode===t.KEY.ENTER||e.keyCode===t.KEY.SPACE)&&e.target.choice&&e.target.choice.callback.call(e.target.choice,i)},!1)}else r._generateMenuSeparator(e)})},getChoices:function(e,t,i){return this.choiceCallback?this.choiceCallback.call(t,e,i):null},makeChoiceCallback:function(e,t){return function(i){e.callback&&e.callback.call(e,t,i)}},hasImage:function(){return this.imageClass||this.image!==b}},_.prototype.constructor=_,{Command:_,CommandInvocation:w,createDropdownMenu:f,createCheckedMenuItem:v,createCommandItem:y,createCommandMenuItem:C,executeBinding:c,setKeyBindingProvider:l,localKeyBindings:L,CommandsProxy:m,getKeyBindings:h,processKey:u,NO_IMAGE:b,_testMethodProcessKey:d}}),define("orion/explorers/navigationUtils",[],function(){function e(e,t){o||e&&(e.push({domNode:t}),t.tabIndex=-1,t.style.outline="none")}function t(t,i,n){if(t){var o=t.getGridNavHolder(i,!0);o&&e(o,n)}}function i(e,t){if(e)for(var i=0;i<e.length;i++)if(e[i].domNode===t)return void e.splice(i,1)}var n=navigator.userAgent,o=-1!==n.indexOf("iPad");return{addNavGrid:t,generateNavGrid:e,removeNavGrid:i}}),define("orion/PageUtil",[],function(){function e(){var e=window.location.href.split("#")[1];return e=e?"#"+e:""}function t(e){e=e||window.location.toString();var t={resource:""},i=e.indexOf("#");if(-1!==i){var n=e.substring(i+1);if(0!==n.length){var o=n.split(",");t.resource=decodeURIComponent(o[0]);for(var r=1;r<o.length;r++){var s=o[r],a=/([^=]*)(=?)(.*)/.exec(s),l=decodeURIComponent(a[1]||""),c=decodeURIComponent(a[3]||"");""!==l&&"resource"!==l&&(t[l]=c)}}}return t}function i(e,t){var i=e;if(-1===e.indexOf("://")){var o=document.createElement("a");o.href=e,i=o.href}var r=!1;return r=t?t.some(function(e){return new RegExp("^"+e+":","i").test(i)}):n.test(i),r?e:(console.log("Illegal URL Scheme: '"+e+"'"),"")}var n=new RegExp("^http[s]?","i");return{hash:e,matchResourceParameters:t,validateURLScheme:i}}),define("orion/uiUtils",["orion/webui/littlelib"],function(e){function t(t){var i="",n=-1!==navigator.platform.indexOf("Mac");if(n?(t.mod4&&(i+="⌃"),t.mod3&&(i+="⌥"),t.mod2&&(i+="⇧"),t.mod1&&(i+="⌘")):(t.mod1&&(i+="Ctrl+"),t.mod2&&(i+="Shift+"),t.mod3&&(i+="Alt+")),t.alphaKey)return i+t.alphaKey;if("keypress"===t.type)return i+t.keyCode;for(var o in e.KEY)if(e.KEY[o]===t.keyCode){if(n)switch(e.KEY[o]){case e.KEY.BKSPC:o="⌫";break;case e.KEY.TAB:o="⇥";break;case e.KEY.ENTER:o="⏎";break;case e.KEY.ESCAPE:o="⎋";break;case e.KEY.SPACE:o="␣";break;case e.KEY.PAGEUP:o="⇞";break;case e.KEY.PAGEDOWN:o="⇟";break;case e.KEY.END:o="⇲";break;case e.KEY.HOME:o="⇱";break;case e.KEY.DEL:o="⌦"}switch(e.KEY[o]){case e.KEY.DOWN:o="↓";break;case e.KEY.UP:o="↑";break;case e.KEY.RIGHT:o="→";break;case e.KEY.LEFT:o="←"}return i+o}var r;switch(t.keyCode){case 59:r=t.mod2?":":";";break;case 61:r=t.mod2?"+":"=";break;case 188:r=t.mod2?"<":",";break;case 190:r=t.mod2?">":".";break;case 191:r=t.mod2?"?":"/";break;case 192:r=t.mod2?"~":"`";break;case 219:r=t.mod2?"{":"[";break;case 220:r=t.mod2?"|":"\\";break;case 221:r=t.mod2?"}":"]";break;case 222:r=t.mod2?'"':"'"}return r?i+r:t.keyCode>=112&&t.keyCode<=123?i+"F"+(t.keyCode-111):i+String.fromCharCode(t.keyCode)}function i(e){for(var i="",n=e.getKeys(),o=0;o<n.length;o++)0!==o&&(i+=" "),i+=t(n[o]);return i}function n(t){var i=t.id,n=t.refNode,o=t.hideRefNode,r=t.initialText,s=t.onComplete,a=t.onEditDestroy,l=t.selectTo,c=t.isInitialValid,d=t.insertAsChild,h=!1,u=function(t){return function(l){if(!h){var d=e.node(i),u=d.value;if(d)return t&&l.keyCode===e.KEY.ESCAPE?(o&&(n.style.display="inline"),h=!0,d.parentNode.removeChild(d),void(a&&a())):void(t&&l.keyCode!==e.KEY.ENTER||(0===u.length||!c&&u===r?(o&&(n.style.display="inline"),h=!0):(s(u),o&&n.parentNode&&(n.style.display="inline"),h=!0),d.parentNode&&d.parentNode.removeChild(d),a&&a()))}}},p=document.createElement("input");p.id=i,p.value=r||"",d?n.appendChild(p):n.parentNode.insertBefore(p,n.nextSibling),p.classList.add("userEditBoxPrompt"),o&&(n.style.display="none"),p.addEventListener("keydown",u(!0),!1),p.addEventListener("blur",u(!1),!1),window.setTimeout(function(){if(p.focus(),r){var t=e.node(i),n=l?r.indexOf(l):-1;if(n>0)if(t.createTextRange){var o=t.createTextRange();o.collapse(!0),o.moveStart("character",0),o.moveEnd("character",n),o.select()}else t.setSelectionRange?t.setSelectionRange(0,n):void 0!==t.selectionStart&&(t.selectionStart=0,t.selectionEnd=n);else t.select()}},0)}function o(e){var t=-1!==window.navigator.platform.indexOf("Mac");return t&&e.metaKey||!t&&e.ctrlKey}function r(e,t){t&&o(t)?window.open(e):window.location=e}function s(t,i){var n=document.createElement("button");return n.className="orionButton commandButton commandMargins",n.addEventListener("click",function(t){i(),e.stop(t)},!1),t&&n.appendChild(document.createTextNode(t)),n}function a(){}function l(e){switch(e.tagName.toLowerCase()){case"button":case"fieldset":case"form":case"input":case"keygen":case"label":case"legend":case"meter":case"optgroup":case"output":case"progress":case"select":case"textarea":return!0}return!1}return{getUserKeyString:i,getUserText:n,openInNewWindow:o,followLink:r,createButton:s,createDropdownButton:a,isFormElement:l}}),define("orion/commandRegistry",["orion/commands","orion/explorers/navigationUtils","orion/PageUtil","orion/uiUtils","orion/webui/littlelib","orion/webui/dropdown","orion/webui/tooltip","text!orion/webui/checkedmenuitem.html","text!orion/webui/dropdowntriggerbutton.html","text!orion/webui/submenutriggerbutton.html"],function(e,t,i,n,o,r,s,a,l,c){function d(e){this._commandList={},this._contributionsByScopeId={},this._activeBindings={},this._urlBindings={},this._pendingBindings={},this._init(e),this._parameterCollector=null}function h(e,t){this.token=e,this.parameterName=t}function u(e,t,i){this.event=e,this.handler=t,this.capture=i||!1}function p(e,t,i,n,o,r){this.name=e,this.type=t,this.label=i,this.value=n,this.lines=o||1,this.eventListeners=Array.isArray(r)?r:r?[r]:[]}function m(e,t,i){this._storeParameters(e),this._hasOptionalParameters=t&&t.hasOptionalParameters,this._options=t,this.optionsRequested=!1,this.getParameters=i,this.clientCollect=t&&t.clientCollect,this.getParameterElement=t&&t.getParameterElement,this.getSubmitName=t&&t.getSubmitName}return d.prototype={_init:function(t){this._selectionService=t.selection;var i=this;e.setKeyBindingProvider(function(){return i._activeBindings})},processURL:function(e){for(var t in this._urlBindings)if(this._urlBindings[t]&&this._urlBindings[t].urlBinding&&this._urlBindings[t].command){var i=this._urlBindings[t].urlBinding.match(e);if(i){var n=this._urlBindings[t],o=n.command,r=n.invocation;if(r&&r.parameters&&o.callback){r.parameters.setValue(i.parameterName,i.parameterValue);var s=this;return void window.setTimeout(function(){s._invoke(r)},0)}}}},findCommand:function(e){return this._commandList[e]},runCommand:function(t,i,n,o,r,s){var a=this;if(i){var l=this._commandList[t],c=l&&(l.visibleWhen?l.visibleWhen(i):!0);if(c&&l.callback){var d=new e.CommandInvocation(n,i,r,l,a);return d.domParent=s,a._invoke(d,o)}}else{var h=this._urlBindings[t];if(h&&h.command&&h.command.callback)return a._invoke(h.invocation,o)}},getSelectionService:function(){return this._selectionService},setParameterCollector:function(e){this._parameterCollector=e},openParameterCollector:function(e,t,i){this._parameterCollector&&(this._parameterCollector.close(),this._parameterCollector.open(e,t,i))},confirm:function(e,t,i,n,o,r){var s=!1;if(this._parameterCollector&&!o){var a=this;this._parameterCollector.close();var l=this._parameterCollector.open(e,function(e,o){var r=document.createElement("span");r.classList.add("parameterPrompt"),r.textContent=t,e.appendChild(r);var l=document.createElement("button");l.addEventListener("click",function(){s=!0,a._parameterCollector.close()},!1),o.appendChild(l),l.appendChild(document.createTextNode(i)),l.className="dismissButton";var c=document.createElement("button");return c.addEventListener("click",function(){s=!1,a._parameterCollector.close()},!1),o.appendChild(c),c.appendChild(document.createTextNode(n)),c.className="dismissButton",l},function(){r(s)});if(l)return}s=window.confirm(t),r(s)},closeParameterCollector:function(){this._parameterCollector&&this._parameterCollector.close()},collectsParameters:function(){return this._parameterCollector},_invoke:function(e,t){return this._collectAndInvoke(e.makeCopy(t),!1)},_collectAndInvoke:function(e,t,i){if(e){if(!(this._parameterCollector&&e.parameters&&e.parameters.hasParameters()&&(t||e.parameters.shouldCollectParameters())))return e.command.callback.call(e.handler||window,e);var n=!1;if(e.parameters.updateParameters(e),e.parameters.shouldCollectParameters()&&(n=this._parameterCollector.collectParameters(e,i),!n)){var o=new s.Tooltip({node:e.domNode,afterHiding:function(){this.destroy()},trigger:"click",position:["below","right","above","left"]}),r=o.contentContainer();r.classList.add("parameterPopup");var a=window.document.activeElement,l=this._parameterCollector.getFillFunction(e,function(){a&&a.focus(),o.destroy()},i)(r);o.show(),window.setTimeout(function(){l.focus(),l.select()},0),n=!0}if(!n)return e.command.callback.call(e.handler||window,e)}else window.console.log("Client attempted to invoke command without an available (rendered) command invocation")},collectParameters:function(e,t){this._collectAndInvoke(e,!0,t)},showKeyBindings:function(t){function i(t){return function(){e.executeBinding(t)}}var o,r,s={},a=[];for(var l in this._activeBindings)r=this._activeBindings[l],r&&r.keyBinding&&r.command&&(r.command.name||r.command.tooltip)&&a.push(r);a.sort(function(e,t){var i=e.command.name||e.command.tooltip,n=t.command.name||t.command.tooltip;return i.localeCompare(n)});for(var c=0;c<a.length;c++)r=a[c],r.keyBinding.scopeName?(s[r.keyBinding.scopeName]||(s[r.keyBinding.scopeName]=[]),s[r.keyBinding.scopeName].push(r)):(o=n.getUserKeyString(r.keyBinding),t.createItem(o,r.command.name||r.command.tooltip,i(r)));for(var d in s)s[d].length&&s[d].length>0&&(t.createHeader(d),s[d].forEach(function(e){o=n.getUserKeyString(e.keyBinding),t.createItem(o,e.command.name||e.command.tooltip,i(e))}))},addCommand:function(e){this._commandList[e.id]=e;var t=this._pendingBindings[e.id];if(t){var i=this;t.forEach(function(t){i._addBinding(e,t.type,t.binding,t.bindingOnly)}),delete this._pendingBindings[e.id]}},addCommandGroup:function(e,t,i,n,o,r,s,a,l,c){this._contributionsByScopeId[e]||(this._contributionsByScopeId[e]={});var d=this._contributionsByScopeId[e];o&&(d=this._createEntryForPath(d,o)),d[t]?(n&&(d[t].title=n),i&&(d[t].position=i),s&&(d[t].imageClass=s),a&&(d[t].tooltip=a),l&&(d[t].selectionClass=l),c===!0?d[t].pretendDefaultActionId=!0:d[t].defaultActionId=c,d[t].emptyGroupMessage=r):(d[t]={title:n,position:i,emptyGroupMessage:r,imageClass:s,tooltip:a,selectionClass:l,defaultActionId:c===!0?null:c,pretendDefaultActionId:c===!0,children:{}},d.sortedContributions=null)},_createEntryForPath:function(e,t){if(t){var i=t.split("/");i.forEach(function(t){t.length>1&&(e[t]||(e[t]={position:0,children:{}},e.sortedContributions=null),e=e[t].children)})}return e},registerSelectionService:function(e,t){this._contributionsByScopeId[e]||(this._contributionsByScopeId[e]={}),this._contributionsByScopeId[e].localSelectionService=t},registerCommandContribution:function(e,t,i,n,o,r,s){this._contributionsByScopeId[e]||(this._contributionsByScopeId[e]={});var a=this._contributionsByScopeId[e];n&&(a=this._createEntryForPath(a,n)),a[t]={position:i};var l;r&&(l=this._commandList[t],l?this._addBinding(l,"key",r,o):this._addPendingBinding(t,"key",r,o)),s&&(l=this._commandList[t],l?this._addBinding(l,"url",s,o):this._addPendingBinding(t,"url",s,o)),a.sortedContributions=null},unregisterCommandContribution:function(e,t,i){if(this._contributionsByScopeId[e]){delete this._commandList[t],delete this._activeBindings[t],delete this._urlBindings[t],delete this._pendingBindings[t];var n=this._contributionsByScopeId[e];if(i){var o=i.split("/");o.forEach(function(e){if(e.length>1){if(!n[e])return;n=n[e].children}})}delete n[t],n.sortedContributions=null}},_addBinding:function(e,t,i,n){if(!e.id)throw new Error("No command id: "+e);"key"===t?this._activeBindings[e.id]={command:e,keyBinding:i,bindingOnly:n}:"url"===t&&(this._urlBindings[e.id]={command:e,urlBinding:i,bindingOnly:n})},_addPendingBinding:function(e,t,i,n){this._pendingBindings[e]=this._pendingBindings[e]||[],this._pendingBindings[e].push({type:t,binding:i,bindingOnly:n})},_checkForTrailingSeparator:function(e,t,i){var n;if(("tool"===t||"button"===t)&&(n=e.childNodes.length>0?e.childNodes[e.childNodes.length-1]:null,n&&n.classList.contains("commandSeparator")))return i?(e.removeChild(n),!1):!0;if("menu"===t){var r=o.$$array("li > *",e);if(r.length>0&&r[r.length-1].classList.contains("dropdownSeparator"))return n=r[r.length-1],i?(n.parentNode.parentNode.removeChild(n.parentNode),!1):!0}return!1},renderCommands:function(e,t,i,n,r,s,a){if("string"!=typeof e)throw"a scope id for rendering must be specified";if(t=o.node(t),!t)throw"no parent";var l=this._contributionsByScopeId[e];if(!i&&l){var c=l.localSelectionService||this._selectionService,d=this;return void(c&&c.getSelections(function(i){d.renderCommands(e,t,i,n,r,s)}))}l&&(this._render(l,t,i,n,r||"button",s,a),this._checkForTrailingSeparator(t,r,!0))},destroy:function(e){if(e=o.node(e),!e)throw"no parent";for(;e.hasChildNodes();){var t=e.firstChild;t.commandTooltip&&t.commandTooltip.destroy(),t.emptyGroupTooltip&&t.emptyGroupTooltip.destroy(),this.destroy(t),e.removeChild(t)}},_render:function(i,o,r,a,l,c,d){var h=i.sortedContributions;if(!h){h=[];var u=!1;for(var p in i)if(Object.prototype.hasOwnProperty.call(i,p)){var m=i[p];m&&"number"==typeof m.position&&(m.id=p,h.push(m),u=!0)}u&&(h.sort(function(e,t){return e.position-t.position}),i.sortedContributions=h)}var g=0,f=this;h.forEach(function(i){function h(e){e&&e.parentNode&&e.parentNode.removeChild(e)}var u,p;if(i.imageClass||(i.imageClass=null),i.children&&Object.getOwnPropertyNames(i.children).length>0){var m,v=i.children;if("tool"===l||"button"===l)if(i.title){var y;if(i.defaultActionId){var C=f._commandList[i.defaultActionId];C&&(C.visibleWhen?C.visibleWhen(r):!0)?(y=new e.CommandInvocation(a,r,c,C,f),y.domParent=o):i.pretendDefaultActionId=!0}m=f._createDropdownMenu(o,i.title,null,null,i.imageClass,i.tooltip,i.selectionClass,null,y,i.pretendDefaultActionId),d&&t.generateNavGrid(d,m.menuButton),m&&(f._render(i.children,m.menu,r,a,"menu",c,d),f._checkForTrailingSeparator(m.menu,"menu",!0),0===m.menu.childNodes.length?i.emptyGroupMessage?m.menuButton.emptyGroupTooltip||(m.menuButton.emptyGroupTooltip=new s.Tooltip({node:m.menuButton,text:i.emptyGroupMessage,trigger:"click",position:["below","right","above","left"]})):(d&&t.removeNavGrid(d,m.menuButton),h(m.menu),h(m.menuButton),h(m.destroyButton)):m.menuButton.style.visibility="visible")}else{var w;if(o.childNodes.length>0&&!f._checkForTrailingSeparator(o,l)&&(w=f.generateSeparatorImage(o)),f._render(v,o,r,a,l,c,d),o.childNodes.length>0){var _=o.childNodes[o.childNodes.length-1];_!==w&&(w=f.generateSeparatorImage(o))}}else if(i.title){var b=f._createDropdownMenu(o,i.title,!0,null,null,i.imageClass);b&&(f._render(v,b.menu,r,a,"menu",c,d),f._checkForTrailingSeparator(b.menu,"menu",!0),0===b.menu.childNodes.length&&b.destroyButton&&o.removeChild(b.destroyButton))}else o.childNodes.length>0&&f._generateMenuSeparator(o),f._render(v,o,r,a,l,c,d),f._generateMenuSeparator(o)}else{var S=f._commandList[i.id],L=S?!0:!1,E=null,R=null;if(S){p=new e.CommandInvocation(a,r,c,S,f),p.domParent=o;var P=!1;try{P=L&&(S.visibleWhen?S.visibleWhen(r):!0)}catch(T){throw console.log(T),T}f._activeBindings[S.id]&&f._activeBindings[S.id].keyBinding&&(E=f._activeBindings[S.id],E.invocation=P?p:null,E.bindingOnly&&(L=!1)),f._urlBindings[S.id]&&f._urlBindings[S.id].urlBinding&&(R=f._urlBindings[S.id],R.invocation=P?p:null,R.bindingOnly&&(L=!1)),L=L&&P}if(L)if(S.choiceCallback){var k,N;"tool"===l||"button"===l?(k=o,N=!1,"ul"===o.nodeName.toLowerCase()&&(k=document.createElement("li"),o.appendChild(k))):(k=o,N=!0);var x=function(e){S.populateChoicesMenu(e,r,a,c,f)};f._createDropdownMenu(k,S.name,N,x.bind(S),S.imageClass,S.tooltip||S.title,S.selectionClass,S.positioningNode)}else{p.handler=p.handler||this,p.domParent=o;var A,I=function(){f._invoke(p)};if("menu"===l){var O=null;E&&E.keyBinding&&(O=n.getUserKeyString(E.keyBinding)),A=e.createCommandMenuItem(o,S,p,null,I,O)}else u=l+S.id+g,A=e.createCommandItem(o,S,p,u,null,"tool"===l,I);t.generateNavGrid(d,A),p.domNode=A,g++}}})},_createDropdownMenu:function(t,i,n,a,l,d,h,u,p,m){if(t=o.node(t),!t||!o.contains(document.body,t))return null;var g,f,v,y,C=t;if(n){var w=document.createRange();w.selectNode(t);var _=w.createContextualFragment(c);o.processTextNodes(_,{ButtonText:i}),t.appendChild(_),y=t.lastChild,f=y.lastChild,g=f.previousSibling,g.dropdown=new r.Dropdown({dropdown:f,populate:a,parentDropdown:t.dropdown}),f.dropdown=g.dropdown}else{"ul"===t.nodeName.toLowerCase()&&(C=document.createElement("li"),t.appendChild(C),y=C);var b=null;l&&(b="dropdownButtonWithIcon",d=d||i),d=l?d||i:d;var S=e.createDropdownMenu(C,i,a,b,l,!1,h,u,p||m);if(v=S.dropdownArrow,g=S.menuButton,v){p&&(p.domNode=S.menuButton);var L=this;g.onclick=function(e){var t=o.bounds(v);e.clientX>=t.left&&S.dropdown?S.dropdown.toggle(e):L._invoke(p)},S.dropdown&&(g.onkeydown=function(e){o.KEY.DOWN===e.keyCode&&(S.dropdown.toggle(e),o.stop(e))})}f=S.menu;var E,R=p&&p.command&&(p.command.tooltip||p.command.name);R?E=p.command.tooltip||p.command.name:R&&(E=d),E&&(g.commandTooltip=new s.Tooltip({node:g,text:E,position:["above","below","right","left"]}))}return{menuButton:g,menu:f,dropdown:g.dropdown,destroyButton:y,dropdownArrow:v}},_generateMenuSeparator:function(e){if(!this._checkForTrailingSeparator(e,"menu")){var t=document.createElement("li");t.classList.add("dropdownSeparator");var i=document.createElement("span");i.classList.add("dropdownSeparator"),t.appendChild(i),e.appendChild(t)}},generateSeparatorImage:function(e){var t;return"ul"===e.nodeName.toLowerCase()?(t=document.createElement("li"),e.appendChild(t)):(t=document.createElement("span"),e.appendChild(t)),t.classList.add("core-sprite-sep"),t.classList.add("imageSprite"),t.classList.add("commandSeparator"),t}},d.prototype.constructor=d,h.prototype={match:function(e){var t=i.matchResourceParameters(e);return"undefined"!=typeof t[this.token]?(this.parameterValue=t[this.token],this):null}},h.prototype.constructor=h,u.prototype.constructor=u,p.prototype={optionsRequested:function(){return this.optionsRequested}},p.prototype.constructor=p,m.prototype={_storeParameters:function(e){if(this.parameterTable=null,e){var t=this.parameterTable={};e.forEach(function(e){t[e.name]=e})}},updateParameters:function(e){"function"==typeof this.getParameters&&this._storeParameters(this.getParameters(e))},hasParameters:function(){return null!==this.parameterTable},shouldCollectParameters:function(){return!this.clientCollect&&this.hasParameters()},parameterNamed:function(e){return this.parameterTable[e]},valueFor:function(e){var t=this.parameterTable[e];return t?t.value:null},setValue:function(e,t){var i=this.parameterTable[e];i&&(i.value=t)},forEach:function(e){for(var t in this.parameterTable)this.parameterTable[t].type&&this.parameterTable[t].name&&e(this.parameterTable[t])},makeCopy:function(){var e=[];this.forEach(function(t){var i=new p(t.name,t.type,t.label,t.value,t.lines,t.eventListeners);e.push(i)});var t=new m(e,this._options,this.getParameters);return t.clientCollect=this.clientCollect,t},hasOptionalParameters:function(){return this._hasOptionalParameters}},m.prototype.constructor=m,{CommandRegistry:d,URLBinding:h,ParametersDescription:m,CommandParameter:p,CommandEventListener:u}}),define("orion/parameterCollectors",["i18n!orion/nls/messages","require","orion/webui/littlelib"],function(e,t,i){function n(e,t){this._activeContainer=null,this._getElementsFunction=e,this._toolbarLayoutFunction=t}return n.prototype={close:function(){this._activeElements&&(this._activeElements.parameterArea&&i.empty(this._activeElements.parameterArea),this._activeElements.slideContainer&&this._activeElements.slideContainer.classList.remove("slideContainerActive"),this._activeElements.dismissArea&&i.empty(this._activeElements.dismissArea),this._activeElements.commandNode&&this._activeElements.commandNode.classList.remove("activeCommand"),this._toolbarLayoutFunction(this._activeElements),this._activeElements.onClose&&this._activeElements.onClose(),this._oldFocusNode&&(this._oldFocusNode.focus(),this._oldFocusNode=null)),this._activeElements=null},open:function(t,n,o){if("string"==typeof t&&(t=i.node(t)),this._activeElements&&this._activeElements.slideContainer&&this._activeElements.commandNode===t)return this._activeElements.focusNode&&this._activeElements.focusNode.focus(),!0;if(this.close(),this._activeElements=null,this._activeElements=this._getElementsFunction(t),this._activeElements&&this._activeElements.parameterArea&&this._activeElements.slideContainer){this._activeElements.onClose=o;var r=n(this._activeElements.parameterArea,this._activeElements.dismissArea);if(!r)return!1;this._activeElements.focusNode=r;var s=i.$$array("#closebox",this._activeElements.dismissArea||this._activeElements.parameterArea);if(0===s.length){var a=this._activeElements.dismissArea||this._activeElements.parameterArea;s=document.createElement("button"),s.id="closebox",s.className="imageSprite core-sprite-close dismissButton",s.title=e.Close,a.appendChild(s);var l=this;s.addEventListener("click",function(){l.close()},!1)}return this._activeElements.slideContainer.classList.add("slideContainerActive"),this._toolbarLayoutFunction(this._activeElements),r&&(this._oldFocusNode=window.document.activeElement,window.setTimeout(function(){r.focus(),r.select&&r.select()
},0)),this._activeElements.commandNode&&this._activeElements.commandNode.classList.add("activeCommand"),!0}return!1},_collectAndCall:function(e,t){i.$$array("input",t).forEach(function(t){"checkbox"===t.type?e.parameters.setValue(t.parameterName,t.checked):"button"!==t.type&&e.parameters.setValue(t.parameterName,t.value.trim())}),i.$$array("textArea",t).forEach(function(t){e.parameters.setValue(t.parameterName,t.value.trim())});var n=e.parameters.getParameterElement;n&&e.parameters.forEach(function(i){var o=n(i,t);o&&("checkbox"===o.type?e.parameters.setValue(o.parameterName,o.checked):"button"!==o.type?e.parameters.setValue(o.parameterName,o.value.trim()):"textarea"!==o.type&&e.parameters.setValue(o.parameterName,o.value.trim()))}),e.command.callback&&e.command.callback.call(e.handler,e)},collectParameters:function(e,t){return e.parameters?(e.domNode&&e.domNode.classList.add("commandMarker"),this.open(e.domNode||e.domParent,this.getFillFunction(e,null,t))):!1},getFillFunction:function(t,n,o){var r=this;return function(s,a){var l=null,c=function(){n&&n(),r.close()},d=function(e){e.keyCode===i.KEY.ENTER&&(r._collectAndCall(t,s),c(),i.stop(e)),e.keyCode===i.KEY.ESCAPE&&("function"==typeof o&&o(),c(),i.stop(e))},h=t.parameters;h.forEach(function(e){var n=h.getParameterElement?h.getParameterElement(e,s):null,o=null;!n&&e.label&&(o=document.createElement("label"),o.classList.add("parameterInput"),o.setAttribute("for",e.name+"parameterCollector"),o.textContent=e.label,s.appendChild(o));var r=e.type,a=e.name+"parameterCollector",u=o||s;"text"===r&&"number"==typeof e.lines&&e.lines>1?(n||(n=document.createElement("textarea"),n.rows=e.lines,n.type="textarea",n.id=a,u.appendChild(n)),d=function(e){e.keyCode===i.KEY.ESCAPE&&(c(),i.stop(e))}):"boolean"===e.type?(n||(n=document.createElement("input"),n.type="checkbox",n.id=a,u.appendChild(n)),e.value&&(n.checked=!0)):(n||(n=document.createElement("input"),n.type=e.type,n.id=a,u.appendChild(n)),e.value&&(n.value=e.value)),n.classList.add("parameterInput"),n.setAttribute("speech","speech"),n.setAttribute("x-webkit-speech","x-webkit-speech"),n.parameterName=e.name,l||(l=n),e.eventListeners.length>0&&e.eventListeners.forEach(function(e){n.addEventListener(e.event,function(i){return e.handler(i,t)},e.capture)}),n.addEventListener("keydown",d,!1)});var u=a;u||(u=document.createElement("span"),u.classList.add("layoutRight"),u.classList.add("parametersDismiss"),s.appendChild(u));var p=function(e){e._collectAndCall(t,s),c()},m=function(e,t){var i=document.createElement("button");return t.appendChild(i),e&&i.appendChild(document.createTextNode(e)),i.classList.add("dismissButton"),i};if(t.parameters.hasOptionalParameters()){t.parameters.optionsRequested=!1;var g=m(e.More,u);g.addEventListener("click",function(){t.parameters.optionsRequested=!0,p(r)},!1)}var f=m(h.getSubmitName?h.getSubmitName(t):e.Submit,u);f.addEventListener("click",function(){p(r)},!1);var v=m(null,u);return v.id="closebox",v.classList.add("imageSprite"),v.classList.add("core-sprite-close"),v.title=e.Close,v.addEventListener("click",function(){c(),"function"==typeof o&&o()},!1),l}}},n.prototype.constructor=n,{CommandParameterCollector:n}}),define("orion/regex",[],function(){function e(e){return e.replace(/([\\$\^*\/+?\.\(\)|{}\[\]])/g,"\\$&")}function t(e){var t=/^\s*\/(.+)\/([gim]{0,3})\s*$/.exec(e);return t?{pattern:t[1],flags:t[2]}:null}return{escape:e,parse:t}}),define("orion/contentTypes",[],function(){function e(e,t){return-1!==e.indexOf(t)}function t(t,i){function n(t,i,n,o){var r=i.filename.indexOf(n)>=0,s=e(i.extension,o.toLowerCase());return(r||s)&&(!t||r&&e(t.extension,o.toLowerCase()))?i:t}if("string"!=typeof t)return null;for(var o=t&&t.split(".").pop(),r=null,s=0;s<i.length;s++){var a=i[s];n(r,a,t,o)===a&&(r=a)}return r}function i(e){return null===e||"undefined"==typeof e?[]:Array.isArray(e)?e:[e]}function n(e){return i(e).map(function(e){return String.prototype.toLowerCase.call(e)})}function o(e){return{id:e.id,name:e.name,image:e.image,imageClass:e.imageClass,"extends":e["extends"],extension:n(e.extension),filename:i(e.filename)}}function r(e){var t=Object.create(null);return e.map(o).forEach(function(e){Object.prototype.hasOwnProperty.call(t,e.id)||(t[e.id]=e)}),t}function s(e){for(var t=e.getServiceReferences(c).concat(e.getServiceReferences(d)),n=[],o=0;o<t.length;o++)for(var s=t[o],a=i(s.getProperty("contentTypes")),l=0;l<a.length;l++)n.push(a[l]);return r(n)}function a(e){if(e&&e.registerService)this.serviceRegistry=e,this.map=s(e),e.registerService(l,this);else{if(!Array.isArray(e))throw new Error("Invalid parameter");this.serviceRegistry=null,this.map=r(e)}}var l="orion.core.contentTypeRegistry",c="orion.core.contenttype",d="orion.file.contenttype";return a.prototype={getContentTypes:function(){var e=this.getContentTypesMap(),t=[];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.push(e[i]);return t},getContentTypesMap:function(){return this.map},getFileContentType:function(e){return t(e.Name,this.getContentTypes())},getFilenameContentType:function(e){return t(e,this.getContentTypes())},getContentType:function(e){return this.map[e]||null},isExtensionOf:function(e,t){if(e="string"==typeof e?this.getContentType(e):e,t="string"==typeof t?this.getContentType(t):t,!e||!t)return!1;if(e.id===t.id)return!0;for(var i=e,n={};i&&(i=this.getContentType(i["extends"]));){if(i.id===t.id)return!0;if(n[i.id])throw new Error("Cycle: "+i.id);n[i.id]=!0}return!1},isSomeExtensionOf:function(e,t){for(var i=0;i<t.length;i++)if(this.isExtensionOf(e,t[i]))return!0;return!1}},{ContentTypeRegistry:a,getFilenameContentType:t}}),define("orion/URITemplate",[],function(){function e(e){this._text=e}function t(e){return e.replace("%25","%")}function i(e,i){if("U"===i)return encodeURIComponent(e).replace(/[!'()*]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()});if("U+R"===i)return encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(h,t);if("U+R-,"===i)return encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]").replace(/,/g,"%2C");throw new Error("Unknown allowed character set: "+i)}function n(e,t,n){for(var o=[],r=0;r<e.length;r++)"undefined"!=typeof e[r]&&o.push(i(e[r],t));return o.join(n)}function o(e,t,n,o){for(var r=Object.keys(e),s=[],a=0;a<r.length;a++)"undefined"!=typeof e[r[a]]&&s.push(i(r[a],t)+n+i(e[r[a]],t));return s.join(o)}function r(e){for(var t=[],i=e.split(","),n=0;n<i.length;n++){var o=i[n].match(d);if(null===o)throw new Error("Bad VarSpec: "+e);t.push({name:o[1],explode:!!o[2],prefix:o[3]?parseInt(o[3],10):-1})}return t}function s(e){if(0===e.length)throw new Error("Invalid Expression: 0 length expression");this._operator=c[e[0]],this._operator?e=e.substring(1):this._operator=c.NUL,this._varSpecList=r(e)}function a(t){for(var i=[],n=0,o=t.indexOf("{",n);-1!==o;){i.push(new e(t.substring(n,o)));var r=t.indexOf("}",o+1);if(-1===r)throw new Error("Invalid template: "+t);i.push(new s(t.substring(o+1,r))),n=r+1,o=t.indexOf("{",n)}return i.push(new e(t.substring(n))),i}function l(e){this._templateComponents=a(e)}var c={NUL:{first:"",sep:",",named:!1,ifemp:"",allow:"U"},"+":{first:"",sep:",",named:!1,ifemp:"",allow:"U+R"},".":{first:".",sep:",",named:!1,ifemp:"",allow:"U"},"/":{first:"/",sep:"/",named:!1,ifemp:"",allow:"U"},";":{first:";",sep:";",named:!0,ifemp:"",allow:"U"},"?":{first:"?",sep:"&",named:!0,ifemp:"=",allow:"U"},"&":{first:"&",sep:"&",named:!0,ifemp:"=",allow:"U"},"#":{first:"#",sep:",",named:!1,ifemp:"",allow:"U+R"},",":{first:"",sep:",",named:!1,ifemp:"",allow:"U+R-,"}},d=/^((?:(?:[a-zA-Z0-9_])|(?:%[0-9A-F][0-9A-F]))(?:(?:[a-zA-Z0-9_.])|(?:%[0-9A-F][0-9A-F]))*)(?:(\*)|:([0-9]+))?$/,h=/%25[0-9A-F][0-9A-F]/g;return e.prototype={expand:function(){return encodeURI(this._text)}},s.prototype={expand:function(e){for(var t=[],r=0;r<this._varSpecList.length;r++){var s=this._varSpecList[r],a=s.name,l=e[a],c=typeof l;if("undefined"!==c&&null!==l){var d=0===t.length?this._operator.first:this._operator.sep;if("string"===c)this._operator.named&&(d+=i(a,"U+R"),d+=0===l.length?this._operator.ifemp:"="),-1!==s.prefix&&s.prefix<l.length&&(l=l.substring(0,s.prefix)),d+=i(l,this._operator.allow);else if(Array.isArray(l)){if(0===l.length)continue;if(s.explode)d+=n(l,this._operator.allow,this._operator.sep);else{var h=n(l,this._operator.allow,",");this._operator.named&&(d+=i(a,"U+R"),d+=0===h.length?this._operator.ifemp:"="),d+=h}}else{if("object"!==c)throw new Error("bad param type: "+a+" : "+c);if(0===Object.keys(l).length)continue;if(s.explode)d+=o(l,this._operator.allow,"=",this._operator.sep);else{var u=o(l,this._operator.allow,",",",");this._operator.named&&(d+=i(a,"U+R"),d+=0===u.length?this._operator.ifemp:"="),d+=u}}t.push(d)}}return t.join("")}},l.prototype={expand:function(e){for(var t=[],i=0;i<this._templateComponents.length;i++)t.push(this._templateComponents[i].expand(e));return t.join("")}},l}),define("orion/i18nUtil",["require","orion/Deferred"],function(e,t){function i(e){var t=arguments;return e.replace(/\$\{([^\}]+)\}/g,function(e,i){return t[(i<<0)+1]})}function n(e){var t=localStorage.getItem("orion/messageBundle/"+e);if(t){var i=JSON.parse(t);if(i._expires&&i._expires>(new Date).getTime())return delete i._expires,i}return null}function o(e,t){t._expires=(new Date).getTime()+9e5,localStorage.setItem("orion/messageBundle/"+e,JSON.stringify(t)),delete t._expires}function r(i){function r(t){t?e(["i18n!"+i],function(e){e&&o(i,e),l.resolve(e)}):a(new Error(i))}function a(e){l.reject(e)}if(s[i])return s[i];var l=new t;s[i]=l;var c=n(i);if(c)return l.resolve(c),l;try{e([i],r,a)}catch(d){e(["orion/i18n!"+i],r,a)}return l}var s={};return{getMessageBundle:r,formatMessage:i}}),define("orion/PageLinks",["require","orion/Deferred","orion/PageUtil","orion/URITemplate","orion/i18nUtil","orion/objects","orion/URL-shim"],function(e,t,i,n,o,r){function s(){return e.toUrl?new URL(e.toUrl("orion/../"),window.location.href).href.slice(0,-1):new URL("/",window.location.href).href.slice(0,-1)}function a(e,t){return d(e,t).then(function(e){return new p(e)})}function l(e){var t={};return e.getPropertyKeys().forEach(function(i){"objectClass"!==i&&"service.names"!==i&&"service.id"!==i&&"__plugin__"!==i&&(t[i]=e.getProperty(i))}),t}function c(e){return o.getMessageBundle(e.nls).then(function(t){return e.textContent=e.nameKey?t[e.nameKey]:e.name,e},function(){return e.textContent=e.nameKey||e.name,e})}function d(e,o){o=o||"orion.page.link";var r=e.getServiceReferences(o),a=i.matchResourceParameters(window.location.href),d=s(),h={OrionHome:d,Location:a.resource},u=[];return r.forEach(function(e){var o=l(e);if(o.uriTemplate&&(o.nls||o.name)){var r=new n(o.uriTemplate),s=r.expand(h);s=i.validateURLScheme(s),o.href=s,o.nls?u.push(c(o)):(o.textContent=o.name,u.push((new t).resolve(o)))}}),t.all(u)}function h(e){var i;if(!f){i=[];var n=e.getServiceReferences("orion.page.link.category");return n.forEach(function(n){var o=l(n);o.id&&(o.name||o.nameKey)&&(o.service=e.getService(n),o.nls?i.push(c(o)):(o.textContent=o.name,i.push((new t).resolve(o))))}),t.all(i).then(function(e){return f=new u(e)})}return(new t).resolve(f)}function u(e){var t=this.categories=Object.create(null);e.forEach(function(e){t[e.id]=e})}function p(e){this.allPageLinks=e,this.allPageLinks.sort(m)}function m(e,t){var i=e.textContent&&e.textContent.toLowerCase(),n=t.textContent&&t.textContent.toLowerCase();return n>i?-1:i>n?1:0}function g(e,t,i){var n=document.createElement("a");return n.href=e,n.target=t,n.classList.add("targetSelector"),n.textContent=i,n}var f;return r.mixin(u.prototype,{getCategoryIDs:function(){return Object.keys(this.categories)},getCategory:function(e){return this.categories[e]||null}}),r.mixin(p.prototype,{createLinkElements:function(){return this.allPageLinks.map(function(e){return g(e.href,"_self",e.textContent)})},getAllLinks:function(){return this.allPageLinks}}),{getCategoriesInfo:h,getPageLinksInfo:a,getOrionHome:s}}),define("orion/edit/nls/root/messages",{Editor:"Editor",switchEditor:"Switch Editor",Fetching:"Fetching: ${0}",confirmUnsavedChanges:"There are unsaved changes.  Do you still want to navigate away?",searchFiles:"Search Files...",searchTerm:"Enter search term:",unsavedChanges:"There are unsaved changes.",unsavedAutoSaveChanges:"Please stay on the page until Auto Save is complete.",Save:"Save",Saved:"Saved",Blame:"Blame",BlameTooltip:"Show blame annotations",saveOutOfSync:"Resource is out of sync with the server. Do you want to save it anyway?",loadOutOfSync:"Resource is out of sync with the server. Do you want to load it anyway? This will overwrite your local changes.",ReadingMetadata:"Reading metadata of ${0}",ReadingMetadataError:"Can not get metadata of ${0}",Reading:"Reading ${0}",readonly:"Read Only.",saveFile:"Save this file",gotoLine:"Go to Line...",gotoLineTooltip:"Go to specified line number",gotoLinePrompt:"Go to line:",Undo:"Undo",Redo:"Redo",Find:"Find...",noResponse:"No response from server.  Check your internet connection and try again.",savingFile:"Saving file ${0}",running:"Running ${0}","Saving...":"Saving...",View:"View",SidePanel:"Side Panel",SidePanelTooltip:"Choose what to show in the side panel.",Actions:"Actions",Navigator:"Navigator",FolderNavigator:"Folder Navigator",Project:"Project",New:"New",File:"File",Edit:"Edit",Tools:"Tools",Add:"Add",noActions:"There are no actions for the current selection.",NoFile:"Use the ${0} to create new files and folders. Click a file to start coding.",LocalEditorSettings:"Local Editor Settings",NoProject:"${0} is not a project. To convert it to a project use ${1}.",NoProjects:"There are no projects in your workspace. Use the ${0} menu to create projects.",disconnected:"(disconnected)",ChooseFS:"Choose Filesystem",ChooseFSTooltip:"Choose the filesystem you want to view.",FSTitle:"${0} (${1})",Deploy:"Deploy","Deploy As":"Deploy As",Import:"Import",Export:"Export",OpenWith:"Open With",OpenRelated:"Open Related",Dependency:"Dependency",UnnamedCommand:"Unnamed"}),define("orion/edit/nls/messages",["orion/i18n!orion/edit/nls/messages","orion/edit/nls/root/messages"],function(e,t){var i={root:t};return Object.keys(e).forEach(function(t){"undefined"==typeof i[t]&&(i[t]=e[t])}),i}),define("orion/extensionCommands",["require","orion/Deferred","orion/commands","orion/regex","orion/contentTypes","orion/URITemplate","orion/i18nUtil","orion/URL-shim","orion/PageLinks","i18n!orion/edit/nls/messages"],function(e,t,i,n,o,r,s,a,l,c){function d(e){var t={},i=e.getPropertyKeys();return i.forEach(function(i){t[i]=e.getProperty(i)}),t}function h(e){return e.id||e.name}var u={},p=l.getOrionHome();u._cloneItemWithoutChildren=function v(e){if(null===e||"object"!=typeof e)return e;var t=e.constructor();for(var i in e)"children"!==i&&"Children"!==i&&(t[i]=v(e[i]));return t},u._getOpenWithNavCommandExtensions=function(e){function t(){for(var t=e.getServiceReferences("orion.edit.editor"),i=[],n=0;n<t.length;n++){var o=t[n],r=o.getProperty("id");i.push({id:r,"default":o.getProperty("default")||!1,name:o.getProperty("name"),nameKey:o.getProperty("nameKey"),nls:o.getProperty("nls"),uriTemplate:o.getProperty("orionTemplate")||o.getProperty("uriTemplate"),validationProperties:o.getProperty("validationProperties")||[]})}return i}function i(e,t){for(var i=e.getServiceReferences("orion.navigate.openWith"),n=[],o=[],r=0;r<i.length;r++){var s=i[r];if(s.getProperty("editor")===t.id){var a=s.getProperty("contentType");a instanceof Array?n=n.concat(a):n.push(a||"*/*");var l=s.getProperty("excludedContentTypes");l instanceof Array?o=o.concat(l):null!==l&&"undefined"!=typeof l&&o.push(l)}}return 0===n.length&&(n=null),0===o.length&&(o=null),{contentTypes:n,excludedContentTypes:o}}for(var n,o=t(),r=[],s="orion.editor",a=0;a<o.length;a++){var l=o[a],c=i(e,l),d=c.contentTypes,h=c.excludedContentTypes,u={name:l.name||l.id,nameKey:l.nameKey,id:"eclipse.openWithCommand."+l.id,contentType:d,excludedContentTypes:h,uriTemplate:l.uriTemplate,nls:l.nls,forceSingleItem:!0,isEditor:l["default"]?"default":"editor",validationProperties:l.validationProperties},p={properties:u,service:{}};l.id===s?n=p:r.push(p)}return n&&r.push(n),r},u._makeValidator=function(e,t,i,n){function s(e,t,i,n,o){var r,s=!1;if("!"===t.charAt(0))return"undefined"==typeof e[t.substring(1)];if("undefined"!=typeof e[t]){if("undefined"==typeof i)r=e[t],s=!0;else if("string"==typeof i){if(!n.variableName)return new RegExp(i).test(e[t]);var a=new RegExp(i).exec(e[t]);if(a){var l=a[0];r="before"===n.variableMatchPosition?e[t].substring(0,a.index):"after"===n.variableMatchPosition?e[t].substring(a.index+l.length):"only"===n.variableMatchPosition?l:e[t],s=!0}}else e[t]===i&&(r=e[t],s=!0);var c=n.variableName,d=n.replacements;if(s&&c&&(o[c]=r,o.itemCached=e,d)){if("string"!=typeof r)return window.console.log("Cannot replace "+c+", value is not a string: "+r),s;for(var h=0;h<d.length;h++){var u=!1;if(d[h].pattern){var p=d[h].pattern,m=d[h].replacement||"";o[c]=o[c].replace(new RegExp(p),m).replace(new RegExp(p),m)}else u=!0;u&&window.console.log("Invalid replacements specified in validation property.  "+d[h])}}return s}return!1}function a(e,t,i,n){var o,r,l,c,d=i.match;if((l=t.indexOf("["))>=0){if((c=t.indexOf("]"))<0)return!1;var h,u,p=t.substring(0,l);if(!(h=e[p])||!Array.isArray(h))return!1;if(o=t.substring(l+1,c),u=parseInt(o,10),isNaN(u))return!1;0>u&&(u+=h.length),r=t.substring(c+1),t=p+":"+String(u)+r}return t.indexOf("|")>=0?(o=t.substring(0,t.indexOf("|")),r=t.substring(t.indexOf("|")+1),a(e,o,i,n)?!0:a(e,r,i,n)):t.indexOf(":")>=0?(o=t.substring(0,t.indexOf(":")),r=t.substring(t.indexOf(":")+1),e[o]?a(e[o],r,i,n):!1):s(e,t,d,i,n)}function l(t,i,n){if(n.info.validationProperties)for(var r=0;r<n.info.validationProperties.length;r++){var s=n.info.validationProperties[r];if("undefined"==typeof s.source)return window.console.log("Invalid validationProperties in "+e.id+".  No source property specified."),!1;var l=a(t,s.source,s,n);if(!l)return!1}var c=!0,d=i?o.getFilenameContentType(t.Name,i):null;return d=d||{id:"application/octet-stream"},n.info.excludedContentTypes&&i&&(c=n.info.excludedContentTypes.every(function(e){var t=e.replace(/([*?])/g,".$1");return-1!==d.id.search(t)?!1:!0})),c&&n.info.contentType&&i&&(c=n.info.contentType.some(function(e){var t=e.replace(/([*?])/g,".$1");return-1!==d.id.search(t)?!0:!1})),c}var c={info:e};return c.validationFunction=function(e){if("function"==typeof n&&(e=n.call(this,e)),e){if(Array.isArray(e)){if((this.info.forceSingleItem||this.info.uriTemplate)&&1!==e.length)return!1;if(e.length<1)return!1}else e=[e];for(var t=0;t<e.length;t++)if(!l(e[t],i,this))return!1;return!0}return!1},c.generatesURI=function(){return!!this.info.uriTemplate},c.getURI=function(e){if(this.info.uriTemplate){var t={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);if(this.info.validationProperties)for(var n=0;n<this.info.validationProperties.length;n++){var o=this.info.validationProperties[n];if(o.source&&o.variableName){var s=this.itemCached===e&&this[o.variableName];s||a(e,o.source,o,this),e[o.variableName]?window.console.log("Variable name "+o.variableName+" in the extension "+this.info.id+" conflicts with an existing property in the item metadata."):t[o.variableName]=this[o.variableName]}}t.OrionHome=p;var l=new r(this.info.uriTemplate);return l.expand(t)}return null},c};var m=c.UnnamedCommand,g="";u._createCommandOptions=function(e,i,n,o,r,a){function l(t,s){var l=u._makeValidator(e,n,o,a);if(t.visibleWhen=l.validationFunction.bind(l),r)if(l.generatesURI.bind(l)())t.hrefCallback=function(e){var t=Array.isArray(e.items)?e.items[0]:e.items;return l.getURI.bind(l)(t)};else{var c=e;t.callback=function(e){var o;if(c.forceSingleItem){var r=Array.isArray(e.items)?e.items[0]:e.items;o=u._cloneItemWithoutChildren(r)}else if(Array.isArray(e.items)){o=[];for(var s=0;s<e.items.length;s++)o.push(u._cloneItemWithoutChildren(e.items[s]))}else o=u._cloneItemWithoutChildren(e.items);if(n)var a=n.getService("orion.page.progress");i.run?a?a.progress(i.run(o),"Running command: "+t.name):i.run(o):n&&(a?a.progress(n.getService(i).run(o),"Running command: "+t.name):n.getService(i).run(o))}}s.resolve(t)}var c=new t;if(e.nls){var d=function(t){var i,n;if(t){var o=e.nameKey&&t[e.nameKey],r=e.tooltipKey&&t[e.tooltipKey];i=o||e.name||m,n=r||e.tooltip||g}else i=e.name||e.nameKey||m,n=e.tooltip||e.tooltipKey||g;var s={name:i,image:e.image,id:h(e),tooltip:n,isEditor:e.isEditor,showGlobally:e.showGlobally};l(s,c)};s.getMessageBundle(e.nls).then(d,d.bind(this,null))}else{var p={name:e.name,image:e.image,id:h(e),tooltip:e.tooltip,isEditor:e.isEditor,showGlobally:e.showGlobally};l(p,c)}return c},u.getOpenWithCommand=function(e,t,i){for(var n,o=i||u.getOpenWithCommands(e),r=0;r<o.length;r++)if(o[r].visibleWhen(t)){var s="default"===o[r].isEditor;if((!n||s)&&(n=o[r],s))break}return n},u.getOpenWithCommands=function(e){var t=[];for(var i in e._commandList){var n=e._commandList[i];n.isEditor&&t.push(n)}return t};var f;return u.createAndPlaceFileCommandsExtension=function(e,t,i,n,o,r){var s=r?"all":void 0,a=!!r;return u.createFileCommands(e,null,s,a,t).then(function(e){return o&&0<e.length&&(t.addCommandGroup(i,"eclipse.openWith",1e3,c.OpenWith,o,null,null,null,"dropdownSelection"),t.addCommandGroup(i,"eclipse.fileCommandExtensions",1e3,c.OpenRelated,o)),e.forEach(function(e){var r=null;o&&(r=e.isEditor?o+"/eclipse.openWith":o+"/eclipse.fileCommandExtensions"),t.registerCommandContribution(i,e.id,n,r)}),{}})},u.createFileCommands=function(e,n,o,r,s){function a(){var i=e.getService("orion.core.contentTypeRegistry")||n;return f||t.when(i.getContentTypes(),function(e){return f=e})}o=void 0===o?"global":o,r=void 0===r?!0:r;var l=[];return u._cachedFileCommands||u._createCachedFileCommands(e),("all"===o||"global"===o)&&u._cachedFileCommands.forEach(function(e){var t=e.properties;("all"===o||t.forceSingleItem&&t.showGlobally)&&l.push(e)}),t.when(a(),function(){r&&(u._cachedOpenWithExtensions||(u._cachedOpenWithExtensions=u._getOpenWithNavCommandExtensions(e,f)),l=l.concat(u._cachedOpenWithExtensions),s._addedOpenWithCommands=r);var n=l.map(function(n){var o=n.properties,r=n.service,a=s.findCommand(h(o));return a?(new t).resolve(a):u._createCommandOptions(o,r,e,f,!0).then(function(e){var t=new i.Command(e);return s.addCommand(t),t})});return t.all(n,function(e){return{_error:e}}).then(function(e){return e})})},u._createCachedFileCommands=function(e){var t=e.getServiceReferences("orion.navigate.command");u._cachedFileCommands=[];for(var i=0;i<t.length;i++){var n=t[i].getProperty("id");if("orion.navigateFromMetadata"!==n){var o=e.getService(t[i]),r=d(t[i]);u._cachedFileCommands.push({properties:r,service:o})}}},u.getFileCommandIds=function(){var e=[];if(!u._cachedFileCommands)throw"extensionCommandUtils._cachedFileCommands is not initialized";return u._cachedFileCommands.length&&(e=u._cachedFileCommands.map(function(e){return e.properties.id})),e},u.createOpenWithCommands=function(e,i,n){return n&&n._addedOpenWithCommands?(new t).resolve(u.getOpenWithCommands(n)):u.createFileCommands(e,i,"none",!0,n)},u}),define("orion/breadcrumbs",["require","orion/webui/littlelib"],function(e,t){function i(e){this._init(e)}return i.prototype={_init:function(e){var i=t.node(e.container);if(!i)throw"no parent container";this._container=i,i.classList.remove("currentLocation"),this._id=e.id||"eclipse.breadcrumbs",this._resource=e.resource||null,this._rootSegmentName=e.rootSegmentName,this._workspaceRootSegmentName=e.workspaceRootSegmentName,this._workspaceRootURL=e.workspaceRootURL,this._makeHref=e.makeHref,this._makeFinalHref=e.makeFinalHref,this._maxLength=e.maxLength,this.path="",this.measure(),this.render()},getNavigatorWorkspaceRootSegment:function(){if(this._workspaceRootSegmentName){var i;if(this._resource&&this._resource.Parents&&!this._resource.skip){i=document.createElement("a");var n=this._workspaceRootURL?this._workspaceRootURL:"";this._makeHref?this._makeHref(i,n):i.href=e.toUrl("edit/edit.html")+"#"+n}else i=document.createElement("span");return t.empty(i),i.appendChild(document.createTextNode(this._workspaceRootSegmentName)),i}return null},MAX_LENGTH:500,INCLUDE_FIRST_SECTION:!0,segments:[],buildSegment:function(e){var t=document.createElement("a");return t.classList.add("breadcrumb"),t.appendChild(document.createTextNode(e)),t},addSegmentHref:function(t,i){this._makeHref?this._makeHref(t,i.Location,i):t.href=e.toUrl("edit/edit.html")+"#"+i.ChildrenLocation},buildSegments:function(e,t){if(this._resource.Parents){var i,n,o=this._resource.Parents.slice(0);if(o){var r=o.slice(0);"reverse"===t&&(r=r.reverse().slice(0)),r.forEach(function(t){t.skip||(e?(n=e,e=null):n=t.Name,i=this.buildSegment(n),this.path+=t.Name,this.addSegmentHref(i,t),i.include=!1,this.segments.push(i))}.bind(this))}}},addDivider:function(){var e=document.createElement("span");e.appendChild(document.createTextNode(" / ")),this.path+="/",e.classList.add("breadcrumbSeparator"),this.append(e)},refresh:function(){this.crumbs=t.node(this._id),this.crumbs?t.empty(this.crumbs):(this.crumbs=document.createElement("span"),this.crumbs.id=this._id,this._container.appendChild(this.crumbs),this.dirty=document.createElement("span"),this.dirty.id="dirty",this.dirty.className="modifiedFileMarker",this._container.appendChild(this.dirty)),this.crumbs.style.width="auto",this.crumbs.style.visibility="visible",this.crumbs.parentNode.className="currentLocation",this.crumbs.parentNode.style.width="auto"},append:function(e){this.crumbs.appendChild(e)},addTitle:function(e,t){var i=t||document.title;0===this.crumbs.childNodes.length&&(e=document.createElement("span"),e.appendChild(document.createTextNode(i)),e.classList.add("breadcrumb"),e.classList.add("currentLocation"),this.append(e))},finalSegment:function(e,t){if(!this._resource.skip){var i;i=t?t:this._resource.Name,this._makeFinalHref?(e=this.buildSegment(i),this.addSegmentHref(e,this._resource)):(e=document.createElement("span"),e.appendChild(document.createTextNode(i))),e.classList.add("currentLocation"),this.path+=this._resource.Name,this.append(e)}},firstSegment:function(e){if(e){if(this.append(e),!this._resource||!this._resource.Parents||this._resource.skip)return this._resource.skip||(e.href=""),void e.classList.add("currentLocation");e.classList.add("breadcrumb"),this.addDivider()}},drawSegments:function(){if(this._resource.Parents){var e=this.segments.slice(0);e.forEach(function(e){e.include===!0&&(this.append(e),this.addDivider())}.bind(this))}},measureSegments:function(){if(this.INCLUDE_FIRST_SECTION=!0,this._resource.Parents){var e=this.segments.slice(0).reverse();e.forEach(function(e){this.append(e),this.addDivider(),this.crumbs.offsetWidth<this.MAX_LENGTH?e.include=!0:this.INCLUDE_FIRST_SECTION=!1}.bind(this)),this.segments=e.reverse()}},measure:function(){var e=this._container;e.style.width="auto",this.MAX_LENGTH=this._maxLength?this._maxLength:e.offsetWidth,this.refresh(),this.segments=[],this.crumbs.style.visibility="hidden";var t=this.getNavigatorWorkspaceRootSegment(),i=this._rootSegmentName;i?this.addTitle(t,i):(this.finalSegment(t,i),this._resource&&this._resource.Parents&&(this.buildSegments(i,"reverse"),this.measureSegments(),this.firstSegment(t)),this.crumbs.offsetWidth>=this.MAX_LENGTH&&(this.INCLUDE_FIRST_SECTION=!1))},render:function(){this.refresh();var e=this.getNavigatorWorkspaceRootSegment(),t=this._rootSegmentName;t?this.addTitle(e,t):(this.INCLUDE_FIRST_SECTION===!0&&this.firstSegment(e),this._resource&&this._resource.Parents&&(this.drawSegments(),this.finalSegment(e,t))),this.crumbs.parentNode.style.width=this.crumbs.offsetWidth+20+"px"}},i.prototype.constructor=i,{BreadCrumbs:i}}),define("orion/webui/splitter",["orion/EventTarget","orion/util","orion/webui/littlelib"],function(e,t,i){function n(t){e.attach(this),this._init(t)}var o=5,r="horizontal",s="vertical";return n.prototype={_init:function(e){if(this._tracking=null,this._animationDelay=501,this._closeReversely=e.closeReversely,this.$node=i.node(e.node),!this.$node)throw"no dom node for splitter found";if(this.$sideNode=i.node(e.sidePanel),!this.$sideNode)throw"no dom node for side panel found";if(this.$mainNode=i.node(e.mainPanel),!this.$mainNode)throw"no dom node for main panel found";this._vertical=e.vertical||!1;var n=this.$node.classList;n.add("split"),n.add(this._vertical?"splitVerticalLayout":"splitLayout"),n=this.$sideNode.classList,n.add("hasSplit"),n.add(this._vertical?"sidePanelVerticalLayout":"sidePanelLayout"),n=this.$mainNode.classList,n.add("hasSplit"),n.add(this._vertical?"mainPanelVerticalLayout":"mainPanelLayout"),this._prefix="/orion/splitter/"+(this.$node.id||document.body.id||""),e.toggle&&(this._thumb=document.createElement("div"),this.$node.appendChild(this._thumb),this._thumb.classList.add("splitThumb"),this._thumb.classList.add(this._vertical?"splitVerticalThumbLayout":"splitThumbLayout")),this._closeByDefault="closed"===this.$node.getAttribute("data-initial-state"),"undefined"!=typeof e.closeByDefault&&(this._closeByDefault=e.closeByDefault),this._initializeFromStoredSettings(),this._closed?(this._closed=!1,this._thumbDown(!0,!0)):this._adjustToSplitPosition(),this.$node.style.visibility="visible",this.$mainNode.style.display="block",this.$sideNode.style.display="block",t.isIOS||t.isAndroid?(this.$node.addEventListener("touchstart",this._touchStart.bind(this),!1),this._thumb&&this._thumb.addEventListener("touchstart",this._touchStart.bind(this),!1),this.$node.addEventListener("touchmove",this._touchMove.bind(this),!1),this.$node.addEventListener("touchend",this._touchEnd.bind(this),!1)):(this.$node.addEventListener("mousedown",this._mouseDown.bind(this),!1),window.addEventListener("mouseup",this._mouseUp.bind(this),!1)),window.addEventListener("resize",this._resize.bind(this),!1)},isClosed:function(){return this._closed},getOrientation:function(){return this._vertical?s:r},setOrientation:function(e){var t=e===s;if(t!==this._vertical){this._vertical=t;var i=this.$node.classList;i.toggle("splitLayout"),i.toggle("splitVerticalLayout"),this.$node.style.left="",this.$node.style.top="",i=this.$sideNode.classList,i.toggle("sidePanelLayout"),i.toggle("sidePanelVerticalLayout"),this.$sideNode.style.left="",this.$sideNode.style.top="",this.$sideNode.style.width="",this.$sideNode.style.height="",i=this.$mainNode.classList,i.toggle("mainPanelLayout"),i.toggle("mainPanelVerticalLayout"),this.$mainNode.style.left="",this.$mainNode.style.top="",this.$mainNode.style.width="",this.$mainNode.style.height="",this._thumb&&(i=this._thumb.classList,i.toggle("splitThumbLayout"),i.toggle("splitVerticalThumbLayout")),this._initializeFromStoredSettings(),this._closed?(this._closed=!1,this._thumbDown(!0,!0)):this._adjustToSplitPosition()}},toggleSidePanel:function(){this._thumbDown()},openSidePanel:function(){this._closed||this._thumbDown()},addResizeListener:function(e){this.addEventListener("resize",function(t){e(t.node)})},_initializeFromStoredSettings:function(){var e=localStorage.getItem(this._prefix+"/toggleState");this._closed="string"==typeof e?"closed"===e:this._closeByDefault;var t,n=i.bounds(this.$node.parentNode),o=i.bounds(this.$node);this._vertical?(t=localStorage.getItem(this._prefix+"/yPosition"),t?(this._splitTop=parseInt(t,10),this._splitTop>n.top+n.height-o.height&&(this._splitTop=n.top+n.height/2)):this._closeByDefault&&(this._initialSplit=this._getSplitPosition(),this._splitTop=0)):(t=localStorage.getItem(this._prefix+"/xPosition"),t?(this._splitLeft=parseInt(t,10),this._splitLeft>n.left+n.width-o.width&&(this._splitLeft=n.left+n.width/2)):this._closeByDefault&&(this._initialSplit=this._getSplitPosition(),this._splitLeft=0))},_getSplitPosition:function(){var e=i.bounds(this.$node),t=i.bounds(this.$node.parentNode);return this.vertical?e.top-t.top:e.left-t.left},_adjustToSplitPosition:function(e){var t=i.bounds(this.$node),n=i.bounds(this.$node.parentNode);if(this._vertical){this._splitHeight=t.height,(e||!this._splitTop)&&(this._splitTop=t.top,localStorage.setItem(this._prefix+"/yPosition",this._splitTop));
var o=this._splitTop;o=this._splitTop-n.top,this.$sideNode.style.height=o+"px",this.$sideNode.style.display="block",this.$node.style.top=o+"px",this._resize()}else{this._splitWidth=t.width,(e||!this._splitLeft)&&(this._splitLeft=t.left,localStorage.setItem(this._prefix+"/xPosition",this._splitLeft));var r=this._splitLeft;r=this._splitLeft-n.left,this.$sideNode.style.width=r+"px",this.$sideNode.style.display="block",this.$node.style.left=r+"px",this._resize()}},_resize:function(e,t,n){e=e||0;var o=i.bounds(this.$node.parentNode),r=i.bounds(this.$node);this._vertical?(void 0===n&&(n=r.top-o.top),n+=r.height,this.$mainNode.style.top=n+"px"):(void 0===t&&(t=r.left-o.left),t+=r.width,this.$mainNode.style.left=t+"px");var s=this;window.setTimeout(function(){s._notifyResizeListeners(s.$mainNode),s._notifyResizeListeners(s.$sideNode)},e)},_notifyResizeListeners:function(e){this.dispatchEvent({type:"resize",node:e})},_notifyToggleListeners:function(){this.dispatchEvent({type:"toggle",closed:this._closed})},_thumbDown:function(e,t){e||this._addAnimation();var n=this._splitTop,o=this._splitLeft;if(this._closed)this._closed=!1,this._splitLeft||this._splitTop||"number"!=typeof this._initialSplit||(n=o=this._initialSplit);else if(this._closed=!0,this._closeReversely){var r=i.bounds(this.$node.parentNode),s=i.bounds(this.$node);this._vertical?n=r.height-s.height:o=r.width-s.width}else n=o=0;this._vertical?(this.$sideNode.style.height=n+"px",this.$node.style.top=n+"px"):(this.$sideNode.style.width=o+"px",this.$node.style.left=o+"px"),this._resize(this._animationDelay,o,n),e||this._removeAnimation(),t||localStorage.setItem(this._prefix+"/toggleState",this._closed?"closed":null);var a=this;window.setTimeout(function(){a._notifyToggleListeners()},this._animationDelay)},_removeAnimation:function(){var e=this;window.setTimeout(function(){e.$sideNode.classList.remove(e._vertical?"sidePanelVerticalLayoutAnimation":"sidePanelLayoutAnimation"),e.$mainNode.classList.remove(e._vertical?"mainPanelVerticalLayoutAnimation":"mainPanelLayoutAnimation"),e.$node.classList.remove(e._vertical?"splitVerticalLayoutAnimation":"splitLayoutAnimation")},this._animationDelay)},_addAnimation:function(){this.$sideNode.classList.add(this._vertical?"sidePanelVerticalLayoutAnimation":"sidePanelLayoutAnimation"),this.$mainNode.classList.add(this._vertical?"mainPanelVerticalLayoutAnimation":"mainPanelLayoutAnimation"),this.$node.classList.add(this._vertical?"splitVerticalLayoutAnimation":"splitLayoutAnimation")},_down:function(){this.$node.classList.add("splitTracking"),this.$mainNode.classList.add("panelTracking"),this.$sideNode.classList.add("panelTracking")},_move:function(e,t){var n=i.bounds(this.$node.parentNode);if(this._vertical){this._splitTop=t,this._splitTop<n.top+o?this._splitTop=n.top+o:this._splitTop>n.top+n.height-o&&(this._splitTop=n.top+n.height-o);var r=this._splitTop;r=this._splitTop-n.top,this.$node.style.top=r+"px"}else{this._splitLeft=e,this._splitLeft<n.left+o?this._splitLeft=n.left+o:this._splitLeft>n.left+n.width-o&&(this._splitLeft=n.left+n.width-o);var s=this._splitLeft;s=this._splitLeft-n.left,this.$node.style.left=s+"px"}this._adjustToSplitPosition(!0)},_up:function(){this.$node.classList.remove("splitTracking"),this.$mainNode.classList.remove("panelTracking"),this.$sideNode.classList.remove("panelTracking")},_mouseDown:function(e){return e.target===this._thumb?(i.stop(e),this._thumbDown()):void(this._tracking||(this._down(e),this._tracking=this._mouseMove.bind(this),window.addEventListener("mousemove",this._tracking),i.setFramesEnabled(!1),i.stop(e)))},_mouseMove:function(e){this._tracking&&this._move(e.clientX,e.clientY)},_mouseUp:function(e){this._tracking&&(i.setFramesEnabled(!0),window.removeEventListener("mousemove",this._tracking),this._tracking=null,this._up(),i.stop(e))},_touchStart:function(e){var t=e.touches;if(1===t.length){if(i.stop(e),e.target===this._thumb)return this._thumbDown();this._down(e),this._touching=!0}},_touchMove:function(e){if(this._touching){var t=e.touches;if(1===t.length){var i=t[0];this._move(i.clientX,i.clientY)}}},_touchEnd:function(e){var t=e.touches;0===t.length&&(this._touching=!1,this._up())}},n.prototype.constructor=n,{Splitter:n,ORIENTATION_HORIZONTAL:r,ORIENTATION_VERTICAL:s}}),define("orion/keyAssist",["i18n!orion/nls/messages","orion/webui/littlelib","orion/util"],function(e,t,i){function n(e){this.commandRegistry=e.commandRegistry,this.create(),this._filterString="",this._providers=[]}return n.prototype={addProvider:function(e){this._providers.push(e)},create:function(){var n=this._keyAssistDiv=document.createElement("div");n.id="keyAssist",n.style.display="none",n.classList.add("keyAssistFloat"),n.setAttribute("role","menu");var o=this._keyAssistInput=document.createElement("input");o.classList.add("keyAssistInput"),o.type="text",o.placeholder=e["Filter bindings"],n.appendChild(o);var r=this._keyAssistContents=document.createElement("div");r.classList.add("keyAssistContents"),(i.isIOS||i.isAndroid)&&(r.style.overflowY="auto"),n.appendChild(r);var s=this._keyAssistTable=document.createElement("table");s.tabIndex=0,s.classList.add("keyAssistList"),r.appendChild(s),document.body.appendChild(n),o.addEventListener("keydown",function(e){this._keyDown(e)}.bind(this)),s.addEventListener("keydown",function(e){this._keyDown(e)}.bind(this)),o.addEventListener("input",function(){this.filterChanged()}.bind(this)),r.addEventListener(i.isFirefox?"DOMMouseScroll":"mousewheel",function(e){this._scrollWheel(e)}.bind(this)),document.addEventListener("keydown",function(e){e.keyCode===t.KEY.ESCAPE&&this.hide()}.bind(this)),t.addAutoDismiss([n],function(){this.hide()}.bind(this))},createContents:function(){var i=this._keyAssistTable;t.empty(i),this._selectedIndex=-1,this._selectedRow=null,this._keyAssistContents.scrollTop=0,this._idCount=0;for(var n=0;n<this._providers.length;n++)this._providers[n].showKeyBindings(this);this.createHeader(e.Global),this.commandRegistry.showKeyBindings(this)},createItem:function(e,t,i){if(this._filterString){var n,o=this._filterString.toLowerCase();if(o!==this._filterString?(o=this._filterString,n=function(e){return e}):n=function(e){return e.toLowerCase()},-1===n(t).indexOf(o)&&-1===n(e).indexOf(o)&&-1===n(this._lastHeader).indexOf(o))return}var r=this._keyAssistTable.insertRow(-1);r.id="keyAssist-keyBinding-"+this._idCount++,r.setAttribute("role","menuitem"),r._execute=i,r.classList.add("keyAssistItem"),r.addEventListener("click",function(e){this._selectedRow=r,this.execute(),e.preventDefault()}.bind(this));var s=r.insertCell(-1);s.classList.add("keyAssistName"),s.appendChild(document.createTextNode(t)),s=r.insertCell(-1),s.classList.add("keyAssistAccel"),s.appendChild(document.createTextNode(e))},createHeader:function(e){this._lastHeader=e;var t=this._keyAssistTable.insertRow(-1);t.classList.add("keyAssistSection");var i=t.insertCell(-1),n=document.createElement("h2");n.appendChild(document.createTextNode(e)),i.appendChild(n)},execute:function(){window.setTimeout(function(){this.hide();var e=this._selectedRow;this._selectedRow=null,e&&e._execute&&e._execute()}.bind(this),0)},filterChanged:function(){this._timeout&&window.clearTimeout(this._timeout),this._timeout=window.setTimeout(function(){this._timeout=null;var e=this._keyAssistInput.value;this._filterString!==e&&(this._filterString=e,this.createContents())}.bind(this),100)},hide:function(){if(this.isVisible()){var e=document.activeElement,t=this._keyAssistDiv,i=t===e||0!==(16&t.compareDocumentPosition(e));t.style.display="none",i&&1!==document.compareDocumentPosition(this._previousActiveElement)&&this._previousActiveElement.focus(),this._previousActiveElement=null}},isVisible:function(){return"block"===this._keyAssistDiv.style.display},removeProvider:function(e){var t=this._providers.indexOf(e);-1!==t&&this._providers.splice(t,1)},select:function(e){var t,i=this._keyAssistTable.querySelectorAll(".keyAssistItem");if(0===i.length)return void(this._selectedIndex=-1);var n=this._selectedIndex;if(n+=e?1:-1,n%=i.length,0>n&&(n=i.length-1),-1!==this._selectedIndex&&(t=i[this._selectedIndex],t.classList.remove("selected"),this._selectedRow=null),this._selectedIndex=n,-1!==this._selectedIndex){this._selectedRow=t=i[this._selectedIndex],t.classList.add("selected"),this._keyAssistTable.setAttribute("aria-activedescendant",t.id),this._keyAssistTable.focus();var o=t.getBoundingClientRect(),r=this._keyAssistContents,s=r.getBoundingClientRect();t.offsetTop<r.scrollTop?0===n?r.scrollTop=0:t.scrollIntoView(!0):o.bottom>s.bottom&&t.scrollIntoView(!1)}},show:function(){this.isVisible()||(this._previousActiveElement=document.activeElement,this.createContents(),this._keyAssistContents.style.height=Math.floor(.75*this._keyAssistDiv.parentNode.clientHeight)+"px",this._keyAssistDiv.style.display="block",this._keyAssistInput.value=this._filterString,this._keyAssistInput.focus(),this._keyAssistInput.select())},_keyDown:function(e){if(40===e.keyCode)this.select(!0);else if(38===e.keyCode)this.select(!1);else{if(13!==e.keyCode)return;this.execute()}e.preventDefault()},_scrollWheel:function(e){var t=0;t=i.isIE||i.isOpera?-e.wheelDelta:i.isFirefox?40*e.detail:-e.wheelDeltaY;var n=this._keyAssistContents,o=n.scrollTop;return n.scrollTop+=t,o!==n.scrollTop?(e.preventDefault&&e.preventDefault(),!1):void 0}},{KeyAssistPanel:n}}),define("orion/widgets/themes/ThemePreferences",[],function(){function e(e,t){this._preferences=e,this._themeData=t;var i=t.getThemeStorageInfo();this._themeVersion=i.version;var n=e.listenForChangedSettings(i.storage,2,function(e){e.key===n&&this.apply()}.bind(this))}return e.prototype={_initialize:function(e,t,i){var n,o;void 0===this._themeVersion||i.get("version")===this._themeVersion?(n=i.get(e.styleset),o=i.get("selected"),o&&(o=JSON.parse(o))):(n=null,o=null),n||(n=t.getStyles(),i.put(e.styleset,JSON.stringify(n))),o&&void 0!==o[e.selectedKey]||(o=o||{},o[e.selectedKey]=e.defaultTheme,i.put("selected",JSON.stringify(o))),i.put("version",this._themeVersion)},apply:function(){this.setTheme()},getTheme:function(e){var t=this._themeData,i=t.getThemeStorageInfo();this._preferences.getPreferences(i.storage,2).then(function(n){this._initialize(i,t,n);var o,r=JSON.parse(n.get("selected")),s=JSON.parse(n.get(i.styleset));if(s)for(var a=0;a<s.length;a++)if(s[a].name===r[i.selectedKey]){o=s[a];break}e({style:o,styles:s})}.bind(this))},setTheme:function(e,t){var i=this._themeData,n=i.getThemeStorageInfo();this._preferences.getPreferences(n.storage,2).then(function(o){this._initialize(n,i,o);var r=JSON.parse(o.get("selected"));e||(e=r[n.selectedKey]),r[n.selectedKey]=e,o.put("selected",JSON.stringify(r)),t?o.put(n.styleset,JSON.stringify(t)):t=JSON.parse(o.get(n.styleset));for(var s=0;s<t.length;s++)if(t[s].name===r[n.selectedKey]){i.processSettings(t[s]);break}o.put("version",this._themeVersion)}.bind(this))},setFontSize:function(e){var t=this._themeData,i=t.getThemeStorageInfo();this._preferences.getPreferences(i.storage,2).then(function(n){this._initialize(i,t,n);var o,r=JSON.parse(n.get("selected")),s=JSON.parse(n.get(i.styleset));if(s)for(var a=0;a<s.length;a++)s[a].fontSize=e,s[a].name===r[i.selectedKey]&&(o=s[a]);n.put(i.styleset,JSON.stringify(s)),t.processSettings(o)}.bind(this))}},{ThemePreferences:e}}),define("orion/settings/nls/root/messages",{"Plugin Description":"Plugin Description",Create:"Create","Loading...":"Loading...","Label:":"Label:",Title:"Title",Plugins:"Plugins","User Profile":"User Profile",Git:"Git","Git Settings":"Git Settings",General:"General",Navigation:"Navigation",Links:"Links","Open in same tab":"Open in same tab","Open in new tab":"Open in new tab",Font:"Font",Family:"Family","Sans Serif":"Sans Serif",Serif:"Serif",Size:"Size","8pt":"8pt","9pt":"9pt","10pt":"10pt","12pt":"12pt",Color:"Color",Background:"Background",Strings:"Strings","String Types":"String Types",blue:"blue",Weight:"Weight",Normal:"Normal",Bold:"Bold",Comments:"Comments","Comment Types":"Comment Types",green:"green",Keywords:"Keywords","Keyword Types":"Keyword Types",darkred:"darkred",Categories:"Categories",Username:"Username","Full Name":"Full Name","Email Address":"Email Address","Email Confirmed":"Email Confirmed",Account:"Account","Current Password":"Current Password","New Password":"New Password","Verify Password":"Verify Password",Password:"Password",OpenId:"OpenId",AOL:"AOL",Yahoo:"Yahoo",Google:"Google",Unlink:"Unlink",Link:"Link",Unlinked:"Unlinked",Linked:"Linked","Linked Accounts":"Linked Accounts","Git Email Address":"Git Email Address","Git Username":"Git Username","Git Credentials Storage":"Git Credentials Storage",Update:"Update","Update Profile Settings":"Update Profile Settings","Update Git User Settings":"Update Git User Settings","Update Git Credentials":"Update Git Credentials","User profile data successfully updated.":"User profile data successfully updated.","Git user data successfully updated.":"Git user data successfully updated.","Git Credentials successfully updated.":"Git Credentials successfully updated.","Edit Plugin JavaScript":"Edit Plugin JavaScript","Install Plugin":"Install Plugin","Plugin Name:":"Plugin Name:","Author Name:":"Author Name:","Licence:":"Licence:","Description:":"Description:","A plugin for Eclipse Orion":"A plugin for Eclipse Orion","Plugin Link":"Plugin Link",Install:"Install","Install a plugin by specifying its URL":"Install a plugin by specifying its URL","Plugin URL:":"Plugin URL:",Disable:"Disable",DisableTooltip:"Disable the plugin",Enable:"Enable",EnableTooltip:"Enable the plugin","Reload all":"Reload all","Reload all installed plugins":"Reload all installed plugins","Create a new Orion Plugin":"Create a new Orion Plugin","Find More Orion Plugins":"Find More Orion Plugins","Get Plugins":"Get Plugins",Reload:"Reload","Reload the plugin":"Reload the plugin",Delete:"Delete","Delete this plugin from the configuration":"Delete this plugin from the configuration",DeleteUser:"Delete User Profile as well as workspaces and projects",DeleteUserComfirmation:"WARNING: This will permanently delete your user profile as well all your work!","Type a plugin url here ...":"Type a plugin url here ...","Installed ":"Installed ","Installing ":"Installing ","Already installed":"Already installed"," plugin":" plugin","Reloaded ":"Reloaded ","Uninstalled ":"Uninstalled ","Are you sure you want to uninstall '":"Are you sure you want to uninstall '",Services:"Services",Value:"Value","JavaScript Object":"JavaScript Object","click here, then check javascript console to drill down":"click here, then check javascript console to drill down",Item:"Item","Git Config":"Git Config","Clear Git Credentials":"Clear Git Credentials","Enable Storage":"Enable Storage","Please be aware that your credentials will be stored persistently in the browser.":"Please be aware that your credentials will be stored persistently in the browser.","Do you wish to enable the Key Storage?":"Do you wish to enable the Key Storage?",general:"General",validation:"Validation","Deleted git credentials for ${0}":"Deleted git credentials for ${0}",Editor:"Editor",editorSettings:"Settings",EditorThemes:"Themes",Import:"Import","Import a theme":"Import a theme",Export:"Export","Export a theme":"Export a theme","Theme name:":"Theme name:",yourTheme:"yourTheme",fileManagement:"File Management",typing:"Typing",autoSave:"Auto Save",autoSaveTimeout:"Save interval (ms)",autoLoad:"Auto Load",saveDiffs:"Save file as diffs",trimTrailingWhiteSpace:"Trim Trailing Whitespace on Save",Restore:"Restore Defaults",Default:"Default",keys:"Keys",tabs:"Tabs",tabSize:"Tab Size",expandTab:"Insert spaces for tabs",smoothScrolling:"Smooth Scrolling",scrollAnimation:"Scrolling Animation",scrollAnimationTimeout:"Scrolling Duration (ms)",keyBindings:"Key Bindings",rulers:"Rulers",annotationRuler:"Show Annotation Ruler",lineNumberRuler:"Show Line Number Ruler",foldingRuler:"Show Folding Ruler",overviewRuler:"Show Overview Ruler",whitespaces:"White Spaces",wrapping:"Wrapping",wordWrap:"Word Wrap",showMargin:"Show Margin",marginOffset:"Margin Column",showTabs:"Show Tabs",showSpaces:"Show Spaces",autoSaveTimeoutInvalid:"Invalid save interval.",scrollAnimationTimeoutInvalid:"Invalid scrolling duration.",tabSizeInvalid:"Invalid tab size.",localSettingsTooltip:"Toggle whether this setting is shown in the local editor settings drop down.",editorSettingsInfo:"Use the ${0} and ${1} to toggle whether a given setting is shown in the local editor settings drop down ${2}.",autoPairParentheses:"Autopair (Parentheses)",autoPairBraces:"Autopair {Braces}",autoPairSquareBrackets:"Autopair [Square] Brackets",autoPairAngleBrackets:"Autopair <Angle> Brackets",autoPairQuotations:'Autopair "Strings"',autoCompleteComments:"Autocomplete /** Block Comments */",smartIndentation:"Smart Indentation",sourceControl:"Source Control",showBlame:"Show Blame",languageTools:"Language Tools",showOccurrences:"Show Occurrences",contentAssistAutoTrigger:"Show Content Assist automatically","Editor preferences updated":"Editor preferences updated","Editor defaults restored":"Editor defaults restored",Theme:"Theme","Font Size":"Font Size","New Theme Name:":"New Theme Name:","Font Size:":"Font Size:","UI Theme":"UI Theme","Navigation Bar":"Navigation Bar","Navigation Text":"Navigation Text","Search Box":"Search Box","Tool Panel":"Tool Panel","Selection Bar":"Selection Bar",Location:"Location",Content:"Content","Main Panel":"Main Panel",Button:"Button","Button Text":"Button Text","Section Text":"Section Text","Side Panel":"Side Panel","Line Color":"Line Color","Line Numbers":"Line Numbers",Foreground:"Foreground","Current Line":"Current Line","HTML Attribute":"HTML Attribute","Overview Ruler":"Overview Ruler","HTML Tag":"HTML Tag","Annotation Ruler":"Annotation Ruler","Show Guide":"Show Guide","Check Guide":"Check Guide",Cancel:"Cancel","Revert Theme":"Revert Theme","Update Theme":"Update Theme","Theme:":"Theme:",clickDiagram:"Click diagram to style.",clickUpdate:"Click Update button to save preview.","CSS Class Name":"CSS Class Name","CSS Attribute":"CSS Attribute","CSS Value":"CSS Value","CSS Text":"CSS Text","COLOR:":"Color:","NEW COLOR:":"New Color:",Ok:"Ok","OR HEX:":"Or Hex: ",splitEditors:"Split Editors",splitOrientation:"Split Orientation",horizontal:"Horizontal",vertical:"Vertical"}),define("orion/settings/nls/messages",["orion/i18n!orion/settings/nls/messages","orion/settings/nls/root/messages"],function(e,t){var i={root:t};return Object.keys(e).forEach(function(t){"undefined"==typeof i[t]&&(i[t]=e[t])}),i}),define("orion/editor/eventTarget",[],function(){function e(){}return e.addMixin=function(t){var i=e.prototype;for(var n in i)i.hasOwnProperty(n)&&(t[n]=i[n])},e.prototype={addEventListener:function(e,t,i){this._eventTypes||(this._eventTypes={});var n=this._eventTypes[e];n||(n=this._eventTypes[e]={level:0,listeners:[]});var o=n.listeners;o.push({listener:t,useCapture:i})},dispatchEvent:function(e){var t=e.type;this._dispatchEvent("pre"+t,e),this._dispatchEvent(t,e),this._dispatchEvent("post"+t,e)},_dispatchEvent:function(e,t){var i=this._eventTypes?this._eventTypes[e]:null;if(i){var n=i.listeners;try{if(i.level++,n)for(var o=0,r=n.length;r>o;o++)if(n[o]){var s=n[o].listener;"function"==typeof s?s.call(this,t):s.handleEvent&&"function"==typeof s.handleEvent&&s.handleEvent(t)}}finally{if(i.level--,i.compact&&0===i.level){for(var a=n.length-1;a>=0;a--)n[a]||n.splice(a,1);0===n.length&&delete this._eventTypes[e],i.compact=!1}}}},isListening:function(e){return this._eventTypes?void 0!==this._eventTypes[e]:!1},removeEventListener:function(e,t,i){if(this._eventTypes){var n=this._eventTypes[e];if(n){for(var o=n.listeners,r=0,s=o.length;s>r;r++){var a=o[r];if(a&&a.listener===t&&a.useCapture===i){0!==n.level?(o[r]=null,n.compact=!0):o.splice(r,1);break}}0===o.length&&delete this._eventTypes[e]}}}},{EventTarget:e}}),define("orion/editor/textTheme",["require","orion/editor/eventTarget","orion/util"],function(e,t,i){function n(e){e=e||{},this._document=e.document||document}var o="orion-theme-",r={};return n.getTheme=function(e){e=e||"default";var t=r[e];return t||(t=r[e]=new n),t},n.prototype={getThemeClass:function(){return this._themeClass},setThemeClass:function(e,t){var i=this,n=i._themeClass;i._themeClass=e,this._load(e,t,function(){i.onThemeChanged({type:"ThemeChanged",oldValue:n,newValue:i.getThemeClass()})})},onThemeChanged:function(e){return this.dispatchEvent(e)},buildStyleSheet:function(e,t){function i(t,i,o){i&&(n.push("."+e+" ."+t+" {"),n.push("	"+(o?"background-color":"color")+": "+i+";"),n.push("}"))}var n=[];return n.push(""),n.push("."+e+" {"),t.fontFamily&&n.push("	font-family: "+t.fontFamily+";"),t.fontSize&&n.push("	font-size: "+t.fontSize+";"),t.fontSize&&n.push("	color: "+t.text+";"),n.push("}"),n.push("."+e+".textview {"),t.background&&n.push("	background-color: "+t.background+";"),n.push("}"),n.push("."+e+" .textviewLeftRuler {"),t.leftRuler&&n.push("	border-right: 1px solid "+t.leftRuler+";"),n.push("}"),n.push("."+e+" .textviewRightRuler {"),t.rightRuler&&n.push("	border-left: 1px solid "+t.rightRuler+";"),n.push("}"),i("ruler.annotations",t.annotationRuler,!0),i("ruler.lines",t.annotationRuler,!0),i("ruler.folding",t.annotationRuler,!0),i("ruler.overview",t.overviewRuler,!0),i("rulerLines",t.lineNumber,!1),i("rulerLines.even",t.lineNumberEven,!1),i("rulerLines.odd",t.lineNumberOdd,!1),i("annotationLine.currentLine",t.currentLine,!0),i("entity-name-tag",t.keyword,!1),i("entity-other-attribute-name",t.attribute,!1),i("string-quoted",t.string,!1),i("meta.annotation.currentLine",t.currentLine,!0),i("keyword",t.keyword,!1),i("string",t.string,!1),i("constant",t.constant,!1),i("comment",t.comment,!1),i("comment.block.documentation",t.comment,!1),i("keyword.other.documentation.markup",t.comment,!1),i("keyword.other.documentation.markup",t.comment,!1),n.join("\n")},_createStyle:function(e,t,n,r){var s=this._document,a=o+e,l=s.getElementById(a);if(l){if(r||l.firstChild.data===t)return;l.removeChild(l.firstChild),l.appendChild(s.createTextNode(t))}else{r?(l=i.createElement(s,"link"),l.rel="stylesheet",l.type="text/css",l.href=t,l.addEventListener("load",function(){n()})):(l=i.createElement(s,"style"),l.appendChild(s.createTextNode(t))),l.id=a;var c=s.getElementsByTagName("head")[0]||s.documentElement;c.appendChild(l)}r||n()},_load:function(t,i,n){if(!t)return void n();if("string"==typeof i)return void this._createStyle(t,i,n);var o=i.href,r=".css";if(o.substring(o.length-r.length)!==r&&(o+=r),/^\//.test(o)||/[a-zA-Z0-9]+:\/\//i.test(o)||!e.toUrl)this._createStyle(t,o,n,!0);else{var s=this;e(["text!"+o],function(e){s._createStyle(t,e,n,!1)})}}},t.EventTarget.addMixin(n.prototype),{TextTheme:n}}),define("orion/widgets/themes/ThemeClass",[],function(){function e(e){this.attributes=[],this.element=document.createElement("div"),this.style=this.element.style,this.className=e,this.classString="."+e+"{ "}function t(){return this.classString=this.classString+this.style.cssText+this.closeString,this.classString}var i,n,o=null,r=" }\n";return e.prototype.className=o,e.prototype.classString=n,e.prototype.style=i,e.prototype.closeString=r,e.prototype.toString=t,{ThemeClass:e}}),define("orion/widgets/themes/container/ThemeSheetWriter",["orion/widgets/themes/ThemeClass"],function(e){function t(){}function i(){var t="",i=[],n=new e.ThemeClass("orionPage");n.style.backgroundColor="#fdfdfd",n.style.width="100%",n.style.height="100%",i.push(n);var o=new e.ThemeClass("topRowBanner");o.style.margin="0",o.style.border="0",o.style.backgroundColor=this.navbar,o.style.height="16px",o.style.padding="10px",o.style.paddingLeft="6px",o.style.paddingRight="2px",o.style.borderBottom="none",o.style.boxShadow="0 2px 2px 0 rgba(0, 0, 0, 0.1),0 1px 0 0 rgba(0, 0, 0, 0.1)",o.style.zIndex="100",i.push(o);var r=new e.ThemeClass("a");r.style.textDecoration="none",r.style.color=this.content,i.push(r);var s=new e.ThemeClass("navlink");s.style.display="inline-block",s.style.padding="2px",s.style.color=this.content,s.style.verticalAlign="bottom",i.push(s);var a=new e.ThemeClass("primaryNav");a.style.color=this.navtext,a.style.fontSize="8pt",a.style.fontWeight="normal",a.style.paddingTop="0",a.style.verticalAlign="baseline",i.push(a);var l=new e.ThemeClass("primaryNav a");l.style.fontSize="8pt",l.style.color=this.navtext,l.style.marginRight="6px",l.style.marginLeft="6px",l.style.verticalAlign="baseline",l.style.textDecoration="none",i.push(l);var c=new e.ThemeClass("primaryNav a:hover");c.style.color="#bfbfbf",c.style.cursor="hand",c.style.color="white",c.style.fontWeight="normal",i.push(c);for(var d in i)t+=i[d].toString();return t}function n(){var t="",i=[],n=new e.ThemeClass("titleArea");n.style.margin="0",n.style.paddingTop="5px",n.style.border="0",n.style.background=this.location,n.style.background="-webkit-gradient(linear, left top, left bottom, color-stop(0%,"+this.location+"), color-stop(100%,"+this.location+"))",n.style.borderBottom="1px solid "+this.location,n.style.minHeight="20px",i.push(n);var o=new e.ThemeClass("breadcrumb");o.style.fontSize="8pt",o.style.textDecoration="none",o.style.color="#f1f1f2;",o.style.paddingTop="2px",i.push(o);var r=new e.ThemeClass("a.breadcrumb:hover");r.style.textDecoration="none",r.style.borderBottom="1px dotted",r.style.color="#F58B0F",r.style.cursor="pointer",i.push(r);var s=new e.ThemeClass("breadcrumbSeparator");s.style.fontSize="8pt",s.style.textDecoration="none",s.style.color=this.separator,s.style.fontWeight="bold",i.push(s);var a=new e.ThemeClass("currentLocation");a.style.fontWeight="bold",a.style.fontSize="8pt",a.style.color=this.breadcrumb,a.style.textDecoration="none",a.style.textWrap="normal",a.style.lineHeight="10pt",i.push(a);var l=new e.ThemeClass("a.currentLocation:hover");l.style.fontWeight="bold",l.style.fontSize="10pt",l.style.color="#666666",l.style.textDecoration="none",l.style.borderBottom="0",i.push(l);var c=new e.ThemeClass("navlinkonpage");if(c.style.color=this.content,c.style.verticalAlign="middle",i.push(c),this.bannerProgress){var d=new e.ThemeClass("topRowBanner .progressPane_running");d.style.borderColor=this.bannerProgress,i.push(d)}for(var h in i)t+=i[h].toString();return t}function o(){var t="",i=[],n=new e.ThemeClass("commandButton");n.style.color="#666",n.style.border="1px solid #dedede",n.style.backgroundColor="#ddd",n.style.textAlign="center",n.style.verticalAlign="middle",n.style.cursor="pointer",n.style.display="inline-block",n.style.padding="4px 6px",n.style.borderRadius="3px",n.style.lineHeight="12px",n.style.fontSize="9pt",n.style.userSelect="none",i.push(n);var o=new e.ThemeClass("commandButton:over");o.style.backgroundColor="#e6e6e6",o.style.border="1px solid #808080",i.push(o);var r=new e.ThemeClass("commandMenu");r.style.color="#222",r.style.display="inline-block",r.style.verticalAlign="baseline",r.style.margin="0",r.style.fontSize="8pt",r.style.fontWeight="normal",r.style.border="1px solid #dedede",r.style.backgroundColor="#efefef",r.style.cursor="pointer",r.style.borderRadius="1px",i.push(r);var s=new e.ThemeClass("commandMenuItem");s.style.border="0",s.style.padding="0",s.style.margin="0",i.push(s);for(var a in i)t+=i[a].toString();return t}function r(){var t="",i=[],n=new e.ThemeClass("searchbox");n.style.backgroundImage="url(../images/core_sprites.png)",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="4px -297px",n.style.width="12px",n.style.height="12px",n.style.backgroundColor=this.search,n.style.border="1px solid "+this.search,n.style.fontSize="11px",n.style.width="15em",n.style.height="16px",n.style.borderRadius="10px",n.style.color="#999",n.style.padding="0",n.style.paddingLeft="20px",n.style.marginLeft="5px",n.style.marginTop="6px !important",n.style.font="7pt Lucida Sans Unicode,Lucida Grande,Verdana,Arial,Helvetica,Myriad,Tahoma,clean,sans-serif !important",i.push(n);var o=new e.ThemeClass("searchbox:focus");o.style.color="white",o.style.outline="none",i.push(o);var r=new e.ThemeClass("checkedRow");r.style.cssText="background-color:"+this.selection+" !important;",i.push(r);var s=new e.ThemeClass("navbar-item-selected");s.style.background=this.selection,s.style.color=this.content,i.push(s);var a=new e.ThemeClass("auxpane");a.style.border="0",a.style.background=this.sidepanel,i.push(a);var l=new e.ThemeClass("mainpane");l.style.background=this.mainpanel,l.style.border=0,i.push(l);var c=new e.ThemeClass("mainToolbar");c.style.background=this.toolpanel,i.push(c);for(var d in i)t+=i[d].toString();return t}function s(){console.log(this.writeNavigationStyle()),console.log(this.writeLocationStyle()),console.log(this.writeMainStyle()),console.log(this.writeButtonStyle())}function a(e){e.navbar.value?(this.navbar=e.navbar.value,this.button=e.button.value,this.location=e.location.value,this.selection=e.selection.value,this.sidepanel=e.sidepanel.value,this.mainpanel=e.mainpanel.value,this.navtext=e.navtext.value,this.search=e.search.value,this.content=e.content.value,this.toolpanel=e.toolpanel.value,this.bannerProgress=e.bannerProgress.value):(this.navbar=e.navbar,this.button=e.button,this.location=e.location,this.selection=e.selection,this.sidepanel=e.sidepanel,this.mainpanel=e.mainpanel,this.navtext=e.navtext,this.search=e.search,this.content=e.content,this.toolpanel=e.toolpanel,this.bannerProgress=e.bannerProgress);var t=this.writeNavigationStyle()+this.writeLocationStyle()+this.writeMainStyle()+this.writeButtonStyle();return t}var l="white",c="#777777",d="#EFEFEF",h="#cedce7",u="#F7F7F7",p="white",m="#bfbfbf",g="#3087B3",f="#444",v="white";return t.prototype.navbar=l,t.prototype.button=c,t.prototype.location=d,t.prototype.selection=h,t.prototype.sidepanel=u,t.prototype.mainpanel=p,t.prototype.navtext=m,t.prototype.content=g,t.prototype.search=f,t.prototype.toolpanel=v,t.prototype.writeNavigationStyle=i,t.prototype.writeLocationStyle=n,t.prototype.writeButtonStyle=o,t.prototype.writeMainStyle=r,t.prototype.render=s,t.prototype.getSheet=a,{ThemeSheetWriter:t}}),define("orion/widgets/themes/ThemeVersion",[],function(){var e="6.0";return e}),define("orion/widgets/themes/container/ThemeData",["i18n!orion/settings/nls/messages","orion/editor/textTheme","orion/widgets/themes/container/ThemeSheetWriter","orion/widgets/themes/ThemeVersion"],function(e,t,i,n){function o(){}function r(){this.styles=[];var e=new o;e.name="Orion",e.navbar="white",e.button="#EFEFEF",e.location="#efefef",e.selection="FEC",e.sidepanel="#FBFBFB",e.mainpanel="white",e.toolpanel="white",e.navtext="#bfbfbf",e.content="#3087B3",e.search="#444",e.breadcrumb="#3087B3",e.separator="#333",e.bannerProgress="whitesmoke",this.styles.push(e);var t=new o;t.name="Orion2014",t.navbar="white",t.button="#EFEFEF",t.location="#EFEFEF",t.selection="FEC",t.sidepanel="#EEEEEE",t.mainpanel="#EEEEEE",t.toolpanel="#EEEEEE",t.navtext="#BFBFBF",t.content="#333333",t.search="#444444",t.breadcrumb="#333333",t.separator="#333333",t.bannerProgress="orange",this.styles.push(t);var i=new o;i.name="Green Zone",i.navbar="seagreen",i.button="lavender",i.location="darkseagreen",i.selection="moccasin",i.sidepanel="aliceblue",i.mainpanel="white",i.toolpanel="white",i.navtext="#FBFBFB",i.content="darkgreen",i.search="darkgreen",i.breadcrumb="#3087B3",i.separator="seagreen",i.bannerProgress="#F2F2F2",this.styles.push(i);var n=new o;n.name="Pretty In Pink",n.navbar="plum",n.button="lavender",n.location="pink",n.selection="lavender",n.sidepanel="seashell",n.mainpanel="white",n.toolpanel="white",n.navtext="#FBFBFB",n.content="mediumorchid",n.search="violet",n.breadcrumb="#3087B3",n.separator="plum",n.bannerProgress="#F2F2F2",this.styles.push(n);var r=new o;r.name="Blue Monday",r.navbar="cornflowerblue",r.button="lavender",r.location="skyblue",r.selection="lavender",r.sidepanel="aliceblue",r.mainpanel="white",r.toolpanel="white",r.navtext="#FBFBFB",r.content="royalblue",r.search="royalblue",r.breadcrumb="#3087B3",r.separator="cornflowerblue",r.bannerProgress="#F2F2F2",this.styles.push(r);
var s=new o;s.name="Vanilla Skies",s.navbar="sandybrown",s.button="lemmonchiffon",s.location="cornsilk",s.selection="lemonchiffon",s.sidepanel="white",s.mainpanel="white",s.toolpanel="white",s.navtext="lemonchiffon",s.content="chocolate",s.search="moccasin",s.breadcrumb="#3087B3",s.separator="sandybrown",s.bannerProgress="#F2F2F2",this.styles.push(s);var a=new o;a.name="Beetlejuice",a.navbar="indigo",a.button="slateblue",a.location="darkslateblue",a.selection="silver",a.sidepanel="lavender",a.mainpanel="white",a.toolpanel="white",a.navtext="#FBFBFB",a.content="mediumslateblue",a.search="#444",a.breadcrumb="#3087B3",a.separator="indigo",a.bannerProgress="#F2F2F2",this.styles.push(a);var l=new o;l.name="Red",l.navbar="#CD2127",l.button="#777777",l.location="#D85F56",l.selection="lightcoral",l.sidepanel="#EFDAB2",l.mainpanel="#FDFADD",l.toolpanel="#FDFADD",l.navtext="#FBFBFB",l.content="darkred",l.search="#D85F56",l.breadcrumb="darkred",l.separator="#CD2127",l.bannerProgress="#F2F2F2",this.styles.push(l)}function s(){return this.styles}function a(){return{storage:"/themes",styleset:"styles",defaultTheme:"Orion2014",selectedKey:"selected",version:n}}function l(){var t=10,i=10,n=350,o=32,r=29,s=t+o+r,a={};a.top=t,a.left=i,a.width=n,a.height=n,a.shapes=[{type:"RECTANGLE",name:e["Navigation Bar"],x:i,y:t,width:n,height:o,family:"navbar",fill:"#333",order:1},{type:"TEXT",name:e["Navigation Text"],label:"UserName",x:i+n-70,y:t+20,family:"navtext",fill:"#bfbfbf",font:"8pt sans-serif"},{type:"ROUNDRECTANGLE",name:e["Search Box"],x:i+n-145,y:t+10,width:70,height:12,family:"search",fill:"#444",order:3},{type:"RECTANGLE",name:e["Tool Panel"],x:i+.4*n,y:s,width:.6*n-1,height:30,family:"toolpanel",fill:"white",order:4},{type:"RECTANGLE",name:e["Selection Bar"],x:i+.4*n+5,y:s+62,width:.6*n-10,height:20,family:"selection",fill:"#FEC",order:7},{type:"RECTANGLE",name:e.Location,x:i,y:t+o,width:n,height:r,family:"location",fill:"#efefef",order:8},{type:"TEXT",name:e["Navigation Text"],label:"Navigator",x:i+50,y:t+20,family:"navtext",fill:"#bfbfbf",font:"8pt sans-serif",order:2},{type:"TEXT",name:e.Content,label:"Breadcrumb",x:i+5,y:t+o+18,family:"content",fill:"#3087B3",font:"8pt sans-serif"},{type:"TEXT",name:e.Content,label:"/",x:i+68,y:t+o+18,family:"content",fill:"#3087B3",font:"8pt sans-serif",order:9},{type:"TEXT",name:e.Content,label:"Location",x:i+74,y:t+o+18,family:"content",fill:"#3087B3",font:"8pt sans-serif"},{type:"RECTANGLE",name:e["Main Panel"],x:i+.4*n,y:s+30,width:.6*n-1,height:n-s+t-31,family:"mainpanel",fill:"white",order:6},{type:"ROUNDRECTANGLE",name:e.Button,x:i+.4*n+5,y:s+5,width:37,height:20,family:"button",fill:"#EFEFEF",order:11},{type:"TEXT",name:e["Button Text"],label:"Button",x:i+.4*n+8,y:s+19,family:"navbar",fill:"#333",font:"8pt sans-serif"},{type:"TRIANGLE",name:"userMenu",x1:i+n-7,y1:t+14,x2:i+n-13,y2:t+14,x3:i+n-10,y3:t+19,family:"userMenu",fill:"#BFBFBF"},{type:"TRIANGLE",name:"userMenu",x1:i+10,y1:s+17,x2:i+16,y2:s+17,x3:i+13,y3:s+22,family:"userMenu",fill:"#BFBFBF"},{type:"TEXT",name:e["Section Text"],label:"Section",x:i+20,y:s+23,family:"navbar",fill:"#333",font:"8pt sans-serif"},{type:"LINE",name:e["Line Color"],x1:i+.4*n,y1:s+30,x2:i+n,y2:s+30,linewidth:2,fill:"#DEDEDE"},{type:"LINE",name:e["Line Color"],x1:i+.4*n,y1:s,x2:i+.4*n,y2:t+n,linewidth:2,fill:"#DEDEDE"},{type:"LINE",name:e["Line Color"],x1:i+10,y1:s+29,x2:i+.4*n-10,y2:s+29,linewidth:2,fill:"#DEDEDE"},{type:"RECTANGLE",name:e["Side Panel"],x:i,y:s,width:.4*n,height:n-s+t,family:"sidepanel",fill:"#FBFBFB",order:12},{type:"TRIANGLE",name:"userMenu",x1:i+n-7,y1:t+14,x2:i+n-13,y2:t+14,x3:i+n-10,y3:t+19,family:"userMenu",fill:"#BFBFBF"},{type:"TRIANGLE",name:"userMenu",x1:i+10,y1:s+17,x2:i+16,y2:s+17,x3:i+13,y3:s+22,family:"userMenu",fill:"#BFBFBF"},{type:"TEXT",name:e["Navigation Text"],label:"Navigator",x:i+50,y:t+20,family:"navtext",fill:"#bfbfbf",font:"8pt sans-serif",order:2},{type:"TRIANGLE",name:"userMenu",x1:i+n-7,y1:t+14,x2:i+n-13,y2:t+14,x3:i+n-10,y3:t+19,family:"userMenu",fill:"#BFBFBF"},{type:"TRIANGLE",name:"userMenu",x1:i+10,y1:s+17,x2:i+16,y2:s+17,x3:i+13,y3:s+22,family:"userMenu",fill:"#BFBFBF"}];for(var l=0;3>l;l++)a.shapes.push({type:"TEXT",name:e.Content,label:"org.eclipse.orion.content",x:i+.4*n+20,y:s+56+20*l,fill:"#3087B3",family:"content"});for(var l=0;3>l;l++)a.shapes.push({type:"TEXT",name:e.Content,label:"Item",x:i+15,y:s+44+20*l,fill:"#3087B3",family:"content"});for(var c=0;3>c;c++)a.shapes.push({type:"TRIANGLE",name:"twisty",x1:i+.4*n+10,y1:s+50+20*c,x2:i+.4*n+15,y2:s+53+20*c,x3:i+.4*n+10,y3:s+56+20*c,family:"navbar",fill:"#333"});return a.shapes.push({type:"IMAGE",name:"logo",x:i+5,y:t+8,source:"../../images/orion-transparent.png",family:"logo"}),a}function c(e){var n=new i.ThemeSheetWriter,o="orionTheme",r=new t.TextTheme.getTheme(o);r.setThemeClass(o,n.getSheet(e))}return o.prototype.name="Orion",o.prototype.navbar="#404648",o.prototype.button="#EFEFEF",o.prototype.location="#333",o.prototype.breadcrumb="#3087B3",o.prototype.separator="#333",o.prototype.selection="FEC",o.prototype.sidepanel="#FBFBFB",o.prototype.mainpanel="white",o.prototype.toolpanel="white",o.prototype.navtext="#bfbfbf",o.prototype.content="#3087B3",o.prototype.search="#444",o.prototype.bannerProgress="white",r.prototype.styles=[],r.prototype.getStyles=s,r.prototype.getThemeStorageInfo=a,r.prototype.getViewData=l,r.prototype.processSettings=c,{ThemeData:r,getStyles:s}}),define("orion/widgets/nls/root/messages",{"no input":"no input","no output":"no output","Choose a Folder":"Choose a Folder",OK:"OK",Profile:"Profile","Sign out":"Sign out","N/A":"N/A","logged in since ":"logged in since ","Sign in":"Sign in","Authentication required!":"Authentication required!","Name:":"Name:","Plug-ins":"Plug-ins"," <No available services or timed out, check URL and try reloading>":" <No available services or timed out, check URL and try reloading>",Properties:"Properties"," (Service Id: ":" (Service Id: ",Services:"Services","SFTP Transfer":"SFTP Transfer","Remote host:":"Remote host:","Port:":"SFTP Port:","Remote path:":"Remote path:","User name:":"User name:","Password:":"Password:","Start Transfer":"Start Transfer","Location:":"Location:","orion.sftpConnections":"orion.sftpConnections","Drag a file here":"Drag a file here","unzip zips":"Unzip *.zip files","or if you prefer":"(or upload a file using the buttons below)",Upload:"Upload","Browse...":"Browse...","Import a file or zip":"Import a file or zip","Missing required argument: searchRenderer":"Missing required argument: searchRenderer","Missing required argument: favService":"Missing required argument: favService","Find File Named":"Find File Named","Type the name of a file to open (? = any character, * = any string):":"Type the name of a file to open (? = any character, * = any string):",Search:"Search","FileName FolderName":"FileName FolderName(Optional)","Searching...":"Searching...","Searching for occurrences of":'Searching for occurrences of: "${0}"',name:"name","orion.widgets.UserMenu":"orion.widgets.UserMenu",test:"test","Sign Out":"Sign Out","Sign Out ":"Sign Out ","</a>":"</a>",">":">","Sign In To ":"Sign In To ","Sign In":"Sign In",Help:"Help","Report a Bug":"Report a Bug","Keyboard Shortcuts":"Keyboard Shortcuts",Settings:"Settings","View profile of ":"View profile of ",Profiles:"Profiles","Information Needed":"Information Needed",Cancel:"Cancel","If the same file exists in both the source and destination:":"If the same file exists in both the source and destination:","Cancel the transfer":"Cancel the transfer","Always overwrite destination":"Always overwrite destination","Overwrite if source is newer":"Overwrite if source is newer",New:"New","Building file skeleton...":"Building file skeleton...",Add:"Add","Upload...":"Upload...","For a list of available commands type '${0}'.":"For a list of available commands type '${0}'.","Main Pages":"Main Pages","Related Links":"Related Links",Yes:"Yes",No:"No","Click or use delete key to delete the search term":"Click or use delete key to delete the search term"}),define("orion/widgets/nls/messages",["orion/i18n!orion/widgets/nls/messages","orion/widgets/nls/root/messages"],function(e,t){var i={root:t};return Object.keys(e).forEach(function(t){"undefined"==typeof i[t]&&(i[t]=e[t])}),i}),define("orion/widgets/userAssistance/UATaskPanel",["orion/webui/littlelib"],function(e){function t(t,i,n){this.elements=n,this.taskPanel=document.createElement("div"),this.taskPanel.className="UAContainer",this.taskPanel.innerHTML='<header class="UAHeader">Develop software from within the cloud</header>',this.elementNode=document.createElement("div"),this.switchesContainer=document.createElement("div"),this.switches=document.createElement("span"),this.radioButtons=[],this.elementNode.className="UAContainer-body",this.taskPanel.appendChild(this.elementNode),this.switchesContainer.className="UAContainer-switch-body",this.switches.className="UAContainer-switches",this.switchesContainer.innerHTML="",this.switchesContainer.appendChild(this.switches),this.taskPanel.appendChild(this.switchesContainer),i===!0?(this.container=document.createElement("div"),this.container.className="UAModal",this.container.appendChild(this.taskPanel),this.backdrop=document.createElement("div"),this.backdrop.className="UAModalBackground",document.body.appendChild(this.backdrop),document.body.appendChild(this.container),e.addAutoDismiss([this.container],this.destroy.bind(this))):t.appendChild(this.taskPanel),this.chosenSwitch=this.createSwitch(null,!0),this.chosenSwitch.firstChild.className="chosenCircle",this.initialize(),this.elements.forEach(this.createSwitch.bind(this))}return t.prototype.elementNode=null,t.prototype.switchesContainer=null,t.prototype.switches=null,t.prototype.radioButtons=null,t.prototype.chosenSwitch=null,t.prototype.addElement=function(e){var t=document.createElement("span");t.className="UAContainer-icon",t.innerHTML='<span class="workingSpan"><img src="'+e.image+'" id="'+e.label+'ImageNode" alt="'+e.alt+'" height="64" width="64"></span><span class="UAIcon-label"><span class="UALabel" id="'+e.label+'LabelNode" >'+e.label+"</span></span>",t.onmouseover=function(){var i=document.getElementById(e.label+"ImageNode");i.src=e.secondaryImage;var n=document.getElementById(e.label+"LabelNode");n.className="UALabel-live",t.className="UAContainer-icon-live"},t.onmouseout=function(){var i=document.getElementById(e.label+"ImageNode");i.src=e.image;var n=document.getElementById(e.label+"LabelNode");n.className="UALabel",t.className="UAContainer-icon"};var i=this;t.onclick=function(){i.showMedia(e)},this.elementNode.appendChild(t)},t.prototype.clearElements=function(){this.elementNode.innerHTML=""},t.prototype.showMedia=function(e){this.clearElements(),this.addElement(e);var t=document.createElement("span");t.className="UAContainer-media",t.innerHTML='<div></div><div></div><span class="mediaSpan"><img src="'+e.media+'" alt="'+e.alt+'" height="300" width="400"></span>',this.elementNode.appendChild(t),setTimeout(function(){t.style.opacity=1},100);var i=document.getElementById(e.label+"switch");this.chosenSwitch.firstChild.className="circle",this.chosenSwitch=i.parentNode,i.className="chosenCircle"},t.prototype.createSwitch=function(e){var t;t=e?e.label+"switch":"indexSwitch";var i=document.createElement("span");i.className="workingSpan",i.innerHTML='<div class="circle" id ="'+t+'"></div>';var n=this;return i.onclick=e?function(){n.showMedia(e)}:function(){n.initialize(),n.chosenSwitch.firstChild.className="circle",n.chosenSwitch=i,n.chosenSwitch.firstChild.className="chosenCircle"},this.switches.appendChild(i),this.radioButtons[this.radioButtons.length]=i,i},t.prototype.initialize=function(){this.clearElements(),this.elements.forEach(this.addElement.bind(this))},t.prototype.destroy=function(){document.body.removeChild(this.backdrop),document.body.removeChild(this.container)},t}),define("orion/webui/dialog",["i18n!orion/widgets/nls/messages","require","orion/webui/littlelib","orion/uiUtils"],function(e,t,i,n){function o(){}var r={dialog:null};return o.prototype={DISABLED:"disabled",CONTAINERTEMPLATE:'<div class="dialog" role="dialog"><div class="dialogTitle"><span id="title" class="dialogTitleText layoutLeft"></span><button aria-label="Close" class="dismissButton layoutRight core-sprite-close imageSprite" id="closeDialog"></button></div><div id="dialogContent" class="dialogContent layoutBlock"></div><div id="buttons" class="dialogButtons"></div></div>',_initialize:function(){var e=document.body;this.$frameParent=e,this.$$modalExclusions=this.$$modalExclusions||[];var t=document.createRange();t.selectNode(e);var n=t.createContextualFragment(this.CONTAINERTEMPLATE);e.appendChild(n),this.$frame=e.lastChild,this.title&&i.$("#title",this.$frame).appendChild(document.createTextNode(this.title)),this.$close=i.$("#closeDialog",this.$frame);var o=this;this.$close.addEventListener("click",function(){o.hide()},!1),this.$parent=i.$(".dialogContent",this.$frame),t=document.createRange(),t.selectNode(this.$parent);var r=t.createContextualFragment(this.TEMPLATE);this.messages&&i.processTextNodes(r,this.messages),this.$parent.appendChild(r),this.$buttonContainer=i.$(".dialogButtons",this.$frame),this._makeButtons(),this.$frame.addEventListener("keydown",function(e){e.keyCode===i.KEY.ESCAPE?o.hide():e.keyCode===i.KEY.ENTER&&"function"==typeof o._defaultCallback&&o._defaultCallback()},!1),this._bindElements(this.$parent),"function"==typeof this._bindToDom&&this._bindToDom(this.$parent)},_makeButtons:function(){if(this.$buttonContainer&&Array.isArray(this.buttons)){var e=this;this.buttons.forEach(function(t){var i=n.createButton(t.text,t.callback);t.id&&(i.id=t.id,e["$"+i.id]=i),t.isDefault&&(e._defaultCallback=t.callback,e._defaultButton=i),e.$buttonContainer.appendChild(i)})}},_makeModal:function(){var e=this;this.$frame.addEventListener("blur",function(t){e.$lastFocusedElement=t.target},!0),this._modalListener=function(t){var n=!i.contains(e.$frame,t.target);if(n)for(var o=0;o<e.$$modalExclusions.length;o++)if(i.contains(e.$$modalExclusions[o],t.target)){n=!1;break}n&&(window.setTimeout(function(){(e.$lastFocusedElement||e.$parent).focus()},0),i.stop(t))},this.$frameParent.addEventListener("focus",this._modalListener,!0),this.$frameParent.addEventListener("click",this._modalListener,!0);var t=this.$frameParent.childNodes,n=!1;this._addedBackdrop=[];for(var o=0;o<t.length;o++){for(var r=0;r<this.$$modalExclusions.length;r++)if(i.contains(this.$$modalExclusions[r],t[o])){n=!0;break}if(!n&&t[o]!==e.$frame&&t[o].classList&&!t[o].classList.contains("tooltipContainer")){var s=t[o];s.classList.contains("modalBackdrop")||(s.classList.add("modalBackdrop"),this._addedBackdrop.push(s))}}var a=i.lastTabbable(this.$buttonContainer)||i.lastTabbable(this.$parent);a&&a.addEventListener("keydown",function(t){if(t.keyCode===i.KEY.TAB){var n=e._getFirstFocusField();n&&n!==t.target&&n.focus(),i.stop(t)}},!1)},_addChildDialog:function(e){this.$$modalExclusions.push(e.$frame||e.$parent)},_inModalExclusion:function(e){return this.$$modalExclusions.some(function(t){return e.$frame===t||e.$parent===t})},_bindElements:function(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];i.id&&(this["$"+i.id]=i),this._bindElements(i)}},hide:function(e){e||r.dialog!==this||(r.dialog=null),"function"==typeof this._beforeHiding&&this._beforeHiding(),this._modalListener&&(this.$frameParent.removeEventListener("focus",this._modalListener,!0),this.$frameParent.removeEventListener("click",this._modalListener,!0)),this.$frame.classList.remove("dialogShowing"),i.setFramesEnabled(!0),"function"==typeof this._afterHiding&&this._afterHiding();var t=this;this.keepAlive||window.setTimeout(function(){t.destroy()},0)},show:function(e){if(this.modal)if(this._makeModal(),r.dialog){if(!r.dialog._inModalExclusion(this))return void this.hide(!0)}else r.dialog=this;"function"==typeof this._beforeShowing&&this._beforeShowing(),i.setFramesEnabled(!1);var t,n,o=i.bounds(this.$frame),s=i.bounds(document.documentElement);if(e){var a=i.bounds(e);n=a.top+a.height+4,t=a.left+4,n+o.height>s.height&&(n=Math.max(0,s.height-o.height-4)),t+o.width>s.width&&(t=Math.max(0,s.width-o.width-4))}else t=Math.max(0,(s.width-o.width)/2),n=Math.max(0,(s.height-o.height)/2);if(this.$lastFocusedElement=document.activeElement,this.$frame.style.top=n+"px",this.$frame.style.left=t+"px",this.$frame.classList.add("dialogShowing"),"function"==typeof this._afterShowing&&this._afterShowing(),!this.customFocus){var l=this._getFirstFocusField();l.focus()}},_getFirstFocusField:function(){return i.firstTabbable(this.$parent)||this._defaultButton||i.firstTabbable(this.$buttonContainer)||this.$close},destroy:function(){this.$frame&&(r.dialog===this&&(r.dialog=null),i.setFramesEnabled(!0),this._addedBackdrop&&this._addedBackdrop.length>0&&this._addedBackdrop.forEach(function(e){e.classList.remove("modalBackdrop")}),this.$frameParent.removeEventListener("focus",this._modalListener,!0),this.$frameParent.removeEventListener("click",this._modalListener,!0),this.$frameParent.removeChild(this.$frame),this.$frame=void 0,this.$parent=void 0)}},o.prototype.constructor=o,{Dialog:o}}),define("orion/widgets/UserMenu",["i18n!orion/widgets/nls/messages","require","orion/webui/littlelib","orion/PageLinks","orion/widgets/userAssistance/UATaskPanel","orion/webui/dialog","orion/webui/dropdown"],function(e,t,i,n,o,r,s){function a(e){this._displaySignOut=!0,this._init(e)}return a.prototype={_init:function(e){if(this._dropdownNode=i.node(e.dropdownNode),!this._dropdownNode)throw"no dom node for dropdown found";this._dropdown=e.dropdown,this._serviceRegistry=e.serviceRegistry,this.authenticatedServices={},this.unauthenticatedServices={},this._noSeparator=e.noSeparator,this._dropDownItemClass=e.dropDownItemClass,this._keyAssistClass=e.keyAssistClass,void 0!==e.signOut&&(this._displaySignOut=e.signOut)},isSingleService:function(){return this.length(this.unauthenticatedServices)+this.length(this.authenticatedServices)===1},hasServices:function(){return this.length(this.unauthenticatedServices)+this.length(this.authenticatedServices)>0},length:function(e){var t=0;for(var i in e)e.hasOwnProperty(i)&&t++;return t},_makeMenuItem:function(e,t){var n=s.createMenuItem(e),o=n.firstElementChild;return"string"==typeof this._dropDownItemClass&&""!==this._dropDownItemClass&&o.classList.add(this._dropDownItemClass),o.addEventListener("click",t,!1),o.addEventListener("keydown",function(e){(e.keyCode===i.KEY.ENTER||e.keyCode===i.KEY.SPACE)&&t()},!1),o},_renderAuthenticatedService:function(t){var i=this,n=this.authenticatedServices[t].authService;if(n&&n.logout&&this._displaySignOut){var o=this._makeMenuItem(e["Sign Out"],function(){n.logout().then(function(){i.addUserItem(t,n,i.authenticatedServices[t].label),localStorage.removeItem(t),localStorage.removeItem("lastLogin");for(var e=localStorage.length-1;e>=0;e--){var o=localStorage.key(e);o&&0===o.indexOf("/orion/preferences/user")&&localStorage.removeItem(o)}n.getAuthForm(window.location.href).then(function(e){window.location=e})})});this._dropdownNode.appendChild(o.parentNode)}},renderServices:function(){function t(e){return r[e]||(r[e]=o.createDocumentFragment()),r[e]}var o=document,r=[],a=this._serviceRegistry;n.getPageLinksInfo(a,"orion.page.link.user").then(function(n){if(this._dropdown?this._dropdown.empty():this._dropdownNode&&i.empty(this._dropdownNode),n.getAllLinks().forEach(function(e){var n,r;e.category&&(r=/user\.(\d+)/.exec(e.category))&&(n=parseInt(r[1],10)),("number"!=typeof n||isNaN(n))&&(n=1);var s=t(n),a=o.createElement("li"),l=o.createElement("a");l.role="menuitem","string"==typeof this._dropDownItemClass?""!==this._dropDownItemClass&&l.classList.add(this._dropDownItemClass):l.classList.add("dropdownMenuItem"),l.href=e.href,l.textContent=e.textContent,a.appendChild(l),s.appendChild(a),l.addEventListener("keydown",function(e){(e.keyCode===i.KEY.ENTER||e.keyCode===i.KEY.SPACE)&&l.click()},!1)}.bind(this)),this.keyAssistFunction){var l=this._makeMenuItem(e["Keyboard Shortcuts"],this.keyAssistFunction);"string"==typeof this._keyAssistClass?""!==this._keyAssistClass&&l.classList.add(this._keyAssistClass):l.classList.add("key-assist-menuitem");var c=l.parentNode;t(0).appendChild(c)}var d=a.getServiceReferences("orion.page.getstarted")[0];if(d){var h=d.getProperty("data"),u=this._makeMenuItem("Getting Started",this.getStartedDialog.bind(this,h)),p=u.parentNode;t(0).appendChild(p)}var m=this;if(r.sort(function(e,t){return e-t}).forEach(function(e,t){if(t<r.length-1&&!this._noSeparator){var i=s.createSeparator();e.appendChild(i)}m._dropdownNode.appendChild(e)}.bind(this)),this.isSingleService())for(var g in this.authenticatedServices)this.authenticatedServices.hasOwnProperty(g)&&this._renderAuthenticatedService(g,0)}.bind(this))},getStartedDialog:function(e){new o(null,!0,e)},setKeyAssist:function(e){this.keyAssistFunction=e,this.renderServices()},addUserItem:function(e,t,i,n){n?(this.unauthenticatedServices[e]&&delete this.unauthenticatedServices[e],this.authenticatedServices[e]={authService:t,label:i,data:n}):(this.authenticatedServices[e]&&delete this.authenticatedServices[e],this.unauthenticatedServices[e]=this.unauthenticatedServices[e]?{authService:t,label:i,pending:this.unauthenticatedServices[e].pending}:{authService:t,label:i}),this.renderServices()}},a.prototype.constructor=a,{UserMenu:a}}),define("orion/crawler/nls/root/messages",{"Searching file:":"Searching file:","is not supported in this file system":"is not supported in this file system","${0} files found out of ${1}":"${0} files found out of ${1}","The search term on this location will not use indexed files.":"The search term on this location will not use indexed files.","It will take longer time. Do you want to proceed?":"It will take longer time. Do you want to proceed?","Search cancelled by user":"Search cancelled by user",Cancel:"Cancel"}),define("orion/crawler/nls/messages",["orion/i18n!orion/crawler/nls/messages","orion/crawler/nls/root/messages"],function(e,t){var i={root:t};return Object.keys(e).forEach(function(t){"undefined"==typeof i[t]&&(i[t]=e[t])}),i}),define("orion/searchUtils",["i18n!orion/nls/messages","require","orion/regex","orion/commandRegistry","orion/PageUtil","orion/URITemplate"],function(e,t,i,n,o,r){function s(e,t,n){var o="";n&&(o="^");var r=i.parse("/"+o+e.searchStr+"/");if(r){var s=r.pattern,a=r.flags;-1!==a.indexOf("i")||t.caseSensitive||(a+="i"),e.regExp={pattern:s,flags:a},e.wildCard=!0}}var a={};return a.ALL_FILE_TYPE="*.*",a.doSearch=function(t,i,n,o){if(t){var r=n,s=!0;if("*"===r&&(r=""),""===r&&(s=o&&o.type!==a.ALL_FILE_TYPE),s){var l=t.createSearchParams(r,!1,!1,o),c=a.generateSearchHref(l);window.location=c}}else window.alert(e["Can't search: no search service is available"])},a.generateSearchHelper=function(e,t){var i=e.keyword,n=i,o={};if(e.fileType&&e.fileType!==a.ALL_FILE_TYPE&&""===i&&(n="*."+e.fileType),e.regEx)o.searchStr=i,s(o,e,t);else{var r=i.indexOf("*")>-1,l=i.indexOf("?")>-1;r&&(i=i.split("*").join(".*")),l&&(i=i.split("?").join(".")),r||l||e.nameSearch?(o.searchStr=e.caseSensitive?i:i.toLowerCase(),s(o,e,t),o.wildCard=!0):(o.searchStr=e.caseSensitive?i.split("\\").join(""):i.split("\\").join("").toLowerCase(),o.wildCard=!1)}return o.searchStrLength=o.searchStr.length,{params:e,inFileQuery:o,displayedSearchTerm:n}},a.convertSearchParams=function(e){void 0!==e.rows&&(e.rows=parseInt(e.rows,10)),void 0!==e.start&&(e.start=parseInt(e.start,10)),"string"==typeof e.regEx&&(e.regEx="true"===e.regEx.toLowerCase()),"string"==typeof e.caseSensitive&&(e.caseSensitive="true"===e.caseSensitive.toLowerCase()),"string"==typeof e.nameSearch&&(e.nameSearch="true"===e.nameSearch.toLowerCase()),void 0!==e.fileNamePatterns&&(e.fileNamePatterns=a.getFileNamePatternsArray(e.fileNamePatterns))},a.getFileNamePatternsArray=function(e){var t=void 0;if(e){var i=e.trim();i=i.replace(/^(\s*,\s*)+/g,""),i=i.replace(/([^\\]),(\s*,\s*)*/g,"$1/"),i=i.replace(/(\s*\/\s*)/g,"/"),i=i.replace(/\/\/+/g,"/"),i=i.replace(/\/+$/g,""),t=i.split("/")}return t},a.copySearchParams=function(e,t){var i={};for(var n in e)if(void 0!==e[n]&&null!==e[n]){if(!t&&"replace"===n)continue;i[n]=e[n]}return i},a.generateSearchHref=function(e){var i=t.toUrl("search/search.html"),n=a.copySearchParams(e,!0),o=n.resource;n.resource=void 0;var s;return s="undefined"!=typeof n.keyword?new r(i+"#{,resource,params*}").expand({resource:o,params:n}):new r(i+"#{,resource}").expand({resource:o})},a.generateFindURLBinding=function(e,t,i,n,o){var s={find:t.searchStr,regEx:t.wildCard?!0:void 0,caseSensitive:e.caseSensitive?!0:void 0,replaceWith:"string"==typeof n?n:void 0,atLine:"number"==typeof i?i:void 0};if(o)return s;var a=new r("{,params*}").expand({params:s});return","+a},a.convertFindURLBinding=function(e){"string"==typeof e.regEx&&(e.regEx="true"===e.regEx.toLowerCase()),"string"==typeof e.caseSensitive&&(e.caseSensitive="true"===e.caseSensitive.toLowerCase()),"string"==typeof e.atLine&&(e.atLine=parseInt(e.atLine,10))},a.replaceRegEx=function(e,t,i){var n=new RegExp(t.pattern,t.flags);return e.replace(n,i)},a.replaceStringLiteral=function(e,t,n){var o=i.parse("/"+t+"/gim");return a.replaceRegEx(e,o,n)},a.searchOnelineLiteral=function(e,t,i){for(var n,o=0,r=!1,s=[];;){if(n=t.indexOf(e.searchStr,o),0>n)break;if(s.push({startIndex:n,length:e.searchStrLength}),r=!0,i)break;o=n+e.searchStrLength}return r?s:null},a.findRegExp=function(e,t,i,n){if(!t)return null;i=i||"",i+=(-1===i.indexOf("g")?"g":"")+(-1===i.indexOf("m")?"m":"");var o=new RegExp(t,i),r=null;return r=o.exec(e.substring(n)),r&&{startIndex:r.index+n,length:r[0].length}},a.searchOnelineRegEx=function(e,t,i){for(var n=0,o=!1,r=[];;){var s=a.findRegExp(t,e.regExp.pattern,e.regExp.flags,n);if(!s)break;if(r.push(s),o=!0,i)break;n=s.startIndex+s.length}return o?r:null},a.generateNewContents=function(e,t,i,n,o,r){if(n&&t){e||(i.contents=[]);for(var s=0;s<t.length;s++){for(var l,c,d=t[s],h=!1,u=!1,p=[],m=0,g=0;g<n.children.length;g++){var f=n.children[g].lineNumber-1;if(f===s){for(m=g,c=0;c<n.children[g].matches.length;c++)n.children[g+c].checked!==!1&&p.push(c);u=p.length>0,l=n.children[g].matches,h=!0;break}}if(h){var v;if(u){var y=a.replaceCheckedMatches(d,o,l,p,r);for(v=y.replacedStr,c=0;c<n.children[m].matches.length;c++)n.children[m+c].newMatches=y.newMatches}else for(v=d,c=0;c<n.children[m].matches.length;c++)n.children[m+c].newMatches=n.children[m+c].matches;e?i.contents[s]=v:i.contents.push(v)}else e||i.contents.push(d)}}},a.generateMatchContext=function(e,t,i){var n,o,r=[],s=2*e+1;t.length<=s?(n=0,o=t.length-1):(n=i-e,0>n?(n=0,o=n+s-1):(o=i+e,o>t.length-1&&(o=t.length-1,n=o-s+1)));for(var a=n;o>=a;a++)r.push({context:t[a],current:a===i});return r},a.splitFile=function(e){for(var t=0,i=0,n=0,o=0,r=[];;){if(-1!==t&&n>=t&&(t=e.indexOf("\r",n)),-1!==i&&n>=i&&(i=e.indexOf("\n",n)),-1===i&&-1===t){r.push(e.substring(o));break}var s=1;-1!==t&&-1!==i?t+1===i?(s=2,n=i+1):n=(i>t?t:i)+1:n=-1!==t?t+1:i+1,r.push(e.substring(o,n-s)),o=n}return r},a.searchWithinFile=function(e,t,i,n,o,r){var s=a.splitFile(i);if(o&&(t.contents=s),t){t.children=[];for(var l=0,c=0;c<s.length;c++){var d=s[c];if(d&&d.length>0){var h,u=r?d:d.toLowerCase();if(h=e.wildCard?a.searchOnelineRegEx(e,u):a.searchOnelineLiteral(e,u)){var p,m=c+1;if(o)for(var g=0;g<h.length;g++){var f=g+1;p={parent:t,checked:t.checked,type:"detail",matches:h,lineNumber:m,matchNumber:f,name:d,location:t.location+"-"+m+"-"+f},t.children.push(p)}else p={parent:t,context:a.generateMatchContext(2,s,c),checked:t.checked,type:"detail",matches:h,lineNumber:m,name:d,location:t.location+"-"+m},t.children.push(p);l+=h.length}}}t.totalMatches=l}},a.replaceCheckedMatches=function(e,t,i,n,o){for(var r=o,s=0,a="",l=[],c=0;c<i.length;c++){s!==i[c].startIndex&&(a+=e.substring(s,i[c].startIndex)),i[c].length&&(r=i[c].length);for(var d=!1,h=0;h<n.length;h++)if(n[h]===c){d=!0;break}d?(l.push({startIndex:a.length,length:t.length}),a+=t):(l.push({startIndex:a.length,length:r}),a+=e.substring(i[c].startIndex,i[c].startIndex+r)),s=i[c].startIndex+r}return s<e.length&&(a+=e.substring(s)),{replacedStr:a,newMatches:l}},a.fullPathNameByMeta=function(e){var t=e.length,i="";if(t>0)for(var n=t-1;n>-1;n--){var o=""===i?"":"/";i=i+o+e[n].Name}return i},a.path2FolderName=function(e,t,i){var n=i?0:1;return e.substring(0,e.length-t.length-n)},a.getOpenSearchPref=function(e,t){e.getService("orion.core.preference").getPreferences("/cm/configurations").then(function(e){var i,n=e.get("nav.config");i=n&&"undefined"!==n["links.newtab"]&&n["links.newtab"]?!0:!1,t(i)})},a.setOpenSearchPref=function(e,t){e.getService("orion.core.preference").getPreferences("/window/favorites").then(function(e){e.put("openSearchPref",{openInNewTab:t})})},a}),define("orion/crawler/searchCrawler",["i18n!orion/crawler/nls/messages","require","orion/i18nUtil","orion/searchUtils","orion/contentTypes","orion/Deferred"],function(e,t,i,n,o,r){function s(e,t,i,o){this.registry=e,this.fileClient=t,this.fileLocations=[],this.fileSkeleton=[],this._hitCounter=0,this._totalCounter=0,this._searchOnName=o&&o.searchOnName,this._buildSkeletonOnly=o&&o.buildSkeletonOnly,this._fetchChildrenCallBack=o&&o.fetchChildrenCallBack,this._searchParams=i,this.searchHelper=this._searchOnName||this._buildSkeletonOnly?null:n.generateSearchHelper(i),this._location=o&&o.location,this._childrenLocation=o&&o.childrenLocation?o.childrenLocation:this._location,this._reportOnCancel=o&&o.reportOnCancel,this._cancelled=!1,this._statusService=this.registry.getService("orion.page.message"),this._progressService=this.registry.getService("orion.page.progress"),this._statusService&&this._statusService.setCancelFunction(function(){this._cancelFileContentsSearch()}.bind(this))}return s.prototype.search=function(e){var t=this.registry.getService("orion.core.contentTypeRegistry");this._onSearchComplete=e,this._cancelled=!1,this._deferredArray=[],t.getContentTypes().then(function(e){this.contentTypesCache=e;var t=this;this._visitRecursively(this._childrenLocation).then(function(){(!t._cancelled||t._reportOnCancel)&&t._reportResult(),t._cancelled&&t._HandleStatus({name:"Cancel"})}.bind(t),function(e){t._reportResult(),t._HandleStatus(e)}.bind(t))}.bind(this))},s.prototype.searchName=function(e,t){e&&(this._searchParams=e,this.searchHelper=n.generateSearchHelper(e,!0)),t&&(this.onSearchNameComplete=t);var i=[];if(this._cancelled=!1,this._deferredArray=[],this._sort(this.fileSkeleton),this.fileSkeleton.length>0){for(var o=0;o<this.fileSkeleton.length;o++){var r,s=this.fileSkeleton[o].Name.toLowerCase();if(r=this.searchHelper.inFileQuery.wildCard?n.searchOnelineRegEx(this.searchHelper.inFileQuery,s,!0):n.searchOnelineLiteral(this.searchHelper.inFileQuery,s,!0),r&&(i.push(this.fileSkeleton[o]),i.length>=this.searchHelper.params.rows))break}var a={numFound:i.length,docs:i};this.onSearchNameComplete({response:a})}else this.onSearchNameComplete({response:{numFound:0,docs:[]}})},s.prototype.buildSkeleton=function(e,t){this._buildingSkeleton=!0;var i=this.registry.getService("orion.core.contentTypeRegistry");this._cancelled=!1,this._deferredArray=[];var n=this;e(),i.getContentTypes().then(function(e){n.contentTypesCache=e,n._visitRecursively(n._childrenLocation).then(function(){n._buildingSkeleton=!1,t(),n.searchHelper&&!n._buildSkeletonOnly&&n.searchName()})})},s.prototype._sort=function(e){e.sort(function(e,t){var i,o;if("Path asc"===this._searchParams.sort){var r=e.Location&&e.Location.toLowerCase();i=n.path2FolderName(r,e.Name&&e.Name.toLowerCase(),!0);var s=t.Location&&t.Location.toLowerCase();return o=n.path2FolderName(s,t.Name&&t.Name.toLowerCase(),!0),o>i?-1:i>o?1:this._sortOnNameSingle(e,t)}return this._sortOnNameSingle(e,t)}.bind(this))},s.prototype._HandleStatus=function(t){this._statusService&&"Cancel"===t.name&&(console.log("Crawling search cancelled. Deferred array length : "+this._deferredArray.length),this._statusService.setProgressResult({Message:e["Search cancelled by user"],Severity:"Warning"}))
},s.prototype._reportResult=function(){this._sort(this.fileLocations);var e={numFound:this.fileLocations.length,docs:this.fileLocations};this._onSearchComplete({response:e})},s.prototype._sortOnNameSingle=function(e,t){var i=e.Name&&e.Name.toLowerCase(),n=t.Name&&t.Name.toLowerCase();return n>i?-1:i>n?1:0},s.prototype._fileNameMatches=function(e){var t=!0;return this.searchHelper.params.fileNamePatterns&&(t=this.searchHelper.params.fileNamePatterns.some(function(t){var i="^"+t.replace(/([*?])/g,".$1")+"$";return e.match(i)})),t},s.prototype._visitRecursively=function(e){var t=[],i=this;return this._fetchChildrenCallBack&&this._fetchChildrenCallBack(e),(i._progressService?this._progressService.progress(i.fileClient.fetchChildren(e),"Crawling search for children of "+e):i.fileClient.fetchChildren(e)).then(function(e){for(var n=0;n<e.length;n++)if(void 0!==e[n].Directory&&e[n].Directory===!1){if(i._searchOnName)t.push(i._buildSingleSkeleton(e[n]));else if(i._buildSkeletonOnly)t.push(i._buildSingleSkeleton(e[n]));else if(!i._cancelled){var s=o.getFilenameContentType(e[n].Name,i.contentTypesCache);if(s&&("text/plain"===s["extends"]||"text/plain"===s.id)&&i._fileNameMatches(e[n].Name)){var a=i._sniffSearch(e[n]);t.push(a),i._deferredArray.push(a)}}}else if(e[n].Location){if(i._cancelled)break;var l=i._visitRecursively(e[n].ChildrenLocation);t.push(l),i._deferredArray.push(l)}return r.all(t)})},s.prototype._hitOnceWithinFile=function(e){var t,i=this._searchParams.caseSensitive?e:e.toLowerCase();return t=this.searchHelper.inFileQuery.wildCard?n.searchOnelineRegEx(this.searchHelper.inFileQuery,i,!0):n.searchOnelineLiteral(this.searchHelper.inFileQuery,i,!0)},s.prototype._reportSingleHit=function(e){if(!this._cancelled){e.LastModified=e.LocalTimeStamp,this.fileLocations.push(e),this._hitCounter++,this._sort(this.fileLocations);var t={numFound:this.fileLocations.length,docs:this.fileLocations};this._onSearchComplete({response:t},!0)}},s.prototype._cancelFileContentsSearch=function(){this._cancelled=!0,this._cancelled&&this._deferredArray.forEach(function(e){e.cancel()})},s.prototype._sniffSearch=function(t){this._totalCounter++;var n=this;if(!this._cancelled)return""!==this.searchHelper.params.keyword?(n._progressService?n._progressService.progress(n.fileClient.read(t.Location),"Reading file "+t.Location):n.fileClient.read(t.Location)).then(function(o){n._hitOnceWithinFile(o)&&n._reportSingleHit(t),n._statusService&&n._statusService.setProgressResult({Message:i.formatMessage(e["${0} files found out of ${1}"],n._hitCounter,n._totalCounter)},e.Cancel)},function(e){e&&e.message&&"cancel"!==e.message.toLowerCase()&&console.error("Error loading file content: "+e.message)}):(this._reportSingleHit(t),void(this._statusService&&this._statusService.setProgressResult({Message:i.formatMessage(e["${0} files found out of ${1}"],this._hitCounter,this._totalCounter)})))},s.prototype._buildSingleSkeleton=function(e){this._totalCounter++,this.fileSkeleton.push(e),this.searchHelper&&!this._buildSkeletonOnly&&this._totalCounter%100===0&&this.searchName();var t=new r;return t.resolve(this._totalCounter),t},s.prototype.constructor=s,{SearchCrawler:s}}),define("orion/webui/dialogs/OpenResourceDialog",["i18n!orion/widgets/nls/messages","orion/crawler/searchCrawler","orion/contentTypes","require","orion/webui/littlelib","orion/util","orion/webui/dialog"],function(e,t,i,n,o,r,s){function a(e){this._init(e)}return a.prototype=new s.Dialog,a.prototype.TEMPLATE='<div role="search"><div><label id="fileNameMessage" for="fileName">${Type the name of a file to open (? = any character, * = any string):}</label></div><div><input id="fileName" type="text" class="setting-control" style="width:90%;"/></div><div id="progress" style="padding: 2px 0 0; width: 100%;"><img src="'+n.toUrl("../../../images/progress_running.gif")+'" class="progressPane_running_dialog" id="crawlingProgress"></img></div><div id="results" style="max-height:250px; height:auto; overflow-y:auto;" aria-live="off"></div><div id="statusbar"></div></div>',a.prototype._init=function(t){if(this.title=t.title||e["Find File Named"],this.modal=!0,this.messages=e,this._searcher=t.searcher,this._progress=t.progress,this._onHide=t.onHide,this._contentTypeService=new i.ContentTypeRegistry(this._searcher.registry),!this._searcher)throw new Error("Missing required argument: searcher");if(this._searchDelay=t.searchDelay||500,this._time=0,this._searcher.setCrawler(null),this._forceUseCrawler=!1,this._initialText=t.initialText,this._message=t.message,this._nameSearch=!0,void 0!==t.nameSearch&&(this._nameSearch=t.nameSearch),this._searchOnRoot=!0,this._fileService=this._searcher.getFileService(),!this._fileService)throw new Error(e["Missing required argument: fileService"]);if(this._searchRenderer=t.searchRenderer,!this._searchRenderer||"function"!=typeof this._searchRenderer.makeRenderFunction)throw new Error(e["Missing required argument: searchRenderer"]);this._initialize()},a.prototype._bindToDom=function(i){var n=this;n.$crawlingProgress.style.display="none",this._nameSearch?this.$fileName.setAttribute("placeholder",e["FileName FolderName"]):this.$fileName.setAttribute("placeholder",e.Search),this.$fileName.addEventListener("input",function(){n._time=+new Date,n._timeoutId&&clearTimeout(n._timeoutId),n._timeoutId=setTimeout(n.checkSearch.bind(n),0)},!1),this.$fileName.addEventListener("keydown",function(e){if(e.keyCode===o.KEY.ENTER){var t=o.$("a",n.$results);t&&(o.stop(e),(r.isMac?e.metaKey:e.ctrlKey)?window.open(t.href):(window.location.href=t.href,n.hide()))}},!1),i.addEventListener("keydown",function(e){var t,i,r,s,a,l=function(e,t,i){return t<e.length-1?e[t+1]:i},c=function(e,t,i){return t>0?e[t-1]:i};(e.keyCode===o.KEY.DOWN||e.keyCode===o.KEY.UP)&&(t=o.$$array("a",n.$results),r=document.activeElement,s=t.indexOf(r),e.keyCode===o.KEY.DOWN?s>=0?(r.classList.remove("treeIterationCursor"),a=l(t,s,t[0]),a.focus(),a.classList.add("treeIterationCursor")):t.length>0&&(a=l(t,-1,t[0]),a.focus(),a.classList.add("treeIterationCursor")):s>=0?(r.classList.remove("treeIterationCursor"),i=n.$fileName,a=c(t,s,i),a.focus(),s>0&&a.classList.add("treeIterationCursor")):t.length>0&&(t[t.length-1].focus(),t[t.length-1].classList.add("treeIterationCursor")),o.stop(e))}),i.addEventListener("mouseup",function(e){e.target.focus()},!1),setTimeout(function(){if(n._forceUseCrawler||!n._fileService.getService(n._searcher.getSearchLocation()).search){var i=n._searchOnRoot?n._searcher.getSearchRootLocation():n._searcher.getChildrenLocation(),o=new t.SearchCrawler(n._searcher.registry,n._fileService,"",{searchOnName:!0,location:i});n._searcher.setCrawler(o),o.buildSkeleton(function(){n.$crawlingProgress.style.display="inline",n.$progress.appendChild(document.createTextNode(e["Building file skeleton..."]))},function(){n.$crawlingProgress.style.display="none",n.$progress.removeChild(n.$progress.lastChild)})}},0),this._message&&(this.$fileNameMessage.removeChild(this.$fileNameMessage.firstChild),this.$fileNameMessage.appendChild(document.createTextNode(this._message))),this._initialText&&(this.$fileName.value=this._initialText,this.doSearch())},a.prototype.checkSearch=function(){clearTimeout(this._timeoutId);var e=(new Date).getTime();e-this._time>this._searchDelay?(this._time=e,this.doSearch()):this._timeoutId=setTimeout(this.checkSearch.bind(this),50)},a.prototype._detectFolderKeyword=function(e){var t,i,n=e,o=null;return this._nameSearch&&(t=/(\S+)\s*(.*)/,i=t.exec(e),i&&3===i.length&&(i[1]&&(n=i[1]),i[2]&&(o=i[2]))),{keyword:n,folderKeyword:o}},a.prototype.doSearch=function(){var t=this.$fileName.value;if(t){var i=this._detectFolderKeyword(t),n=this._searcher.createSearchParams(i.keyword,this._nameSearch,this._searchOnRoot),s=this._searchRenderer.makeRenderFunction(this._contentTypeService,this.$results,!1,this.decorateResult.bind(this));this.currentSearch=s;var a=document.createElement("div");a.appendChild(document.createTextNode(this._nameSearch?e["Searching..."]:r.formatMessage(e["Searching for occurrences of"],t))),o.empty(this.$results),this.$results.appendChild(a),this._searcher.search(n,i.folderKeyword,function(){s===this.currentSearch&&s.apply(null,arguments)}.bind(this))}},a.prototype.decorateResult=function(e){function t(e){0!==e.button||e.ctrlKey||e.metaKey||i.hide()}for(var i=this,n=o.$$array("a",e),r=0;r<n.length;r++){var s=n[r];s.addEventListener("click",t,!1)}},a.prototype._beforeHiding=function(){clearTimeout(this._timeoutId)},a.prototype._afterHiding=function(){this._onHide&&this._onHide()},a.prototype.constructor=a,{OpenResourceDialog:a}}),define("text!orion/banner/banner.html",[],function(){return'<header id="banner" role="banner">\r\n	<!-- Requires some js code to bind the home link, link to progress image, and binding NLS variables  -->\r\n\r\n	<div id="staticBanner" class="layoutBlock topRowBanner"> <!-- primaryNav -->\r\n		<div id="centralNavigationArea" style="position:absolute;left:0;top:0;width:39px;height:36px; z-index:1;border-right:1px solid #ddd;"></div>\r\n\r\n		<!-- Static "Home" link. TODO delete this -->\r\n		<a id="home" class="layoutLeft "></a>\r\n\r\n		<!-- Left banner component: hamburger -->\r\n		<nav id="primaryNav" class="bannerLeftArea" style="z-index:2;" role="navigation">\r\n				<button class="centralNavigation commandSprite core-sprite-hamburger" type="button"id="centralNavigation"></button>\r\n		</nav>\r\n\r\n		<!-- Middle banner component: Breadcrumb bar -->\r\n		<div class="clear navigationBreadcrumb bannerMiddleArea" >\r\n			<div id="location" class="currentLocation"></div>\r\n		</div>\r\n\r\n		<!-- Right banner component: user identity -->\r\n		<div class="bannerRightArea" style="z-index:2;">\r\n			<!-- Global commands support. -->\r\n			<div id="globalActions" class="spacingLeft layoutLeft"></div>\r\n\r\n			<!-- Search. TODO delete this -->\r\n			<input type="text" id="search" autocomplete="off" class="layoutLeft spacingLeft searchbox" role="search" style="display:none;">\r\n			<div id="searchOptions" class="layoutLeft" style="padding-top:1px;display:none;"></div>\r\n\r\n			<!-- User identity menu and Progress -->\r\n			<div id="userMenu" class="spacingRight layoutRight" style="color:#ccc;line-height:16px;">\r\n				<div id="progressPane" class="progressWatch" tabindex="0" role="progressbar">\r\n					<div id="watchButton" class="watchButton"></div>\r\n					<div id="watchBody" class="watchBody">\r\n						<span class="hand longMinute">\r\n							<span class="darkSide"></span>\r\n						</span>\r\n						<span class="hand longHour">\r\n							<span class="darkSide"></span>\r\n						</span>\r\n					</div>\r\n				</div>\r\n				\r\n				<div style="position: absolute;right: 0px;top:0;width: 39px;height:36px; z-index:-50;border-left: 1px solid #ddd;"></div>\r\n				<span id="userTrigger" tabindex="0" role="button" class="dropdownTrigger" style="z-index:2;">\r\n				</span>\r\n				<ul id="userDropdown" class="dropdownMenu" role="menu"></ul>\r\n			</div>\r\n		</div>\r\n	</div>\r\n\r\n	<!-- IDE notification messages go in here -->\r\n	<div id="notificationArea" class="notificationHide">\r\n		<div class="layoutLeft" id="notifications" aria-live="assertive" aria-atomic="true"></div>\r\n		<div class="layoutRight"><button aria-label="Close" class="dismissButton layoutRight core-sprite-close imageSprite" type="button" id="closeNotifications"></span></div>\r\n	</div>\r\n</header>\r\n'}),define("text!orion/banner/footer.html",[],function(){return'<!--\r\n<footer id="footerContent" class="layoutBlock footerLayout" role="contentinfo">\r\n	<div class="logoFooter commandSprite core-sprite-orion-logo"></div>\r\n	<div class="footerBlock">${Orion is in Beta. Please try it out but BEWARE your data may be lost.}</div>\r\n	<div class="footerRightBlock">\r\n		<ul>\r\n			<li><a href="https://bugs.eclipse.org/bugs/enter_bug.cgi?product=Orion&version=5.0" target="_blank">${Report a Bug}</a>\r\n			<li><a href="http://www.eclipse.org/legal/privacy.php" target="_blank">${Privacy Policy}</a></li>\r\n			<li><a href="http://www.eclipse.org/legal/termsofuse.php" target="_blank">${Terms of Use}</a></li>\r\n			<li><a href="http://www.eclipse.org/legal/copyright.php" target="_blank">${Copyright Agent}</a></li>\r\n		</ul>\r\n	</div>\r\n</footer>\r\n-->'}),define("text!orion/banner/toolbar.html",[],function(){return'<ul class="layoutLeft commandList pageActions" id="pageActions"></ul>\r\n<ul class="layoutLeft commandList pageActions" id="selectionTools"></ul>\r\n<ul class="layoutLeft commandList pageActions" id="navActions"></ul>\r\n<div class="layoutLeft" style="padding-left:7px;padding-right:7px;margin-top:2px;" id="filterBox" style="visibility: hidden;"></div>\r\n<ul class="layoutRight commandList pageActions" id="settingsActions"></ul>\r\n<div class="layoutRight status" id="statusPane" role="status" aria-live="off"></div>\r\n<ul class="layoutRight commandList pageActions" id="pageNavigationActions"></ul>\r\n'}),define("orion/widgets/input/DropDownMenu",["orion/objects","orion/webui/littlelib"],function(e,t){function i(e,i,n){var o=t.node(e);if(!o)throw new Error("Parent node of dropdown menu not found");this._parent=o,n=n||{},this.options=n,this.navDropDownId=this._parent.id+"_navdropdown",this.selectionClass=n.selectionClass;var r=document.createElement("div");if(r.classList.add("dropdownMenu"),r.classList.add("dropdownMenuOpen"),r.id=this.navDropDownId,r.style.display="none",this._parent.appendChild(r),this._dropdownMenu=r,i=t.node(i),!i)throw"Trigger node of dropdown menu not found";this._triggerNode=i,"hidden"===this._triggerNode.style.visibility&&(this._triggerNode.style.visibility="visible"),n.noClick||(this._triggerNode.onclick=this.click.bind(this)),this._dropdownMenu.addEventListener("keydown",function(e){e.keyCode===t.KEY.ESCAPE&&this.clearPanel()}.bind(this))}return e.mixin(i.prototype,{click:function(){"none"===this._dropdownMenu.style.display?this.updateContent(this.getContentNode(),function(){t.setFramesEnabled(!1),this._dropdownMenu.style.display="",this._positionDropdown(),this.selectionClass&&this._triggerNode.classList.add(this.selectionClass),this.handle=t.addAutoDismiss([this._triggerNode,this._dropdownMenu],this.clearPanel.bind(this)),this.options.onShow&&this.options.onShow()}.bind(this)):this.clearPanel()},clearPanel:function(){this.isVisible()&&(this._dropdownMenu.style.display="none",t.setFramesEnabled(!0),this.selectionClass&&this._triggerNode.classList.remove(this.selectionClass),this.options.onHide&&this.options.onHide())},addContent:function(e){this._dropdownMenu.innerHTML=e},getContentNode:function(){return this._dropdownMenu},updateContent:function(e,t){t()},_positionDropdown:function(){this._dropdownMenu.style.right="";var e=t.bounds(this._dropdownMenu),i=t.bounds(document.body);if(e.left+e.width>i.left+i.width){var n=t.bounds(this._boundingNode(this._triggerNode)),o=t.bounds(this._triggerNode);this._dropdownMenu.style.right=n.width-(o.left-n.left+o.width)+"px"}},_boundingNode:function(e){var t=window.getComputedStyle(e,null);if(null===t)return e;var i=t.getPropertyValue("position");return"absolute"!==i&&e.parentNode&&e!==document.body?this._boundingNode(e.parentNode):e},isDestroyed:function(){return!this._dropdownMenu.parentNode},isVisible:function(){return"none"!==this._dropdownMenu.style.display&&!this.isDestroyed()},focus:function(){this._dropdownMenu.focus()},destroy:function(){this._parent&&(t.setFramesEnabled(!0),t.empty(this._parent),this._parent=this.select=null)}}),i}),define("orion/customGlobalCommands",[],function(){return{}}),define("orion/navigate/nls/root/messages",{"Click one of the tasks below to create an Orion folder.  You can upload, import, or generate files.":"Click one of the tasks below to create an Orion folder.  You can upload, import, or generate files.","Toggle Left Pane":"Toggle Left Pane","Open or close the left pane":"Open or close the left pane",Navigator:"Navigator","Strings Xtrnalizr":"Strings Xtrnalizr","Externalize Strings from JavaScript files in this folder":"Externalize strings from JavaScript files in this folder.","Choose a Folder":"Choose a Folder","Copy of ${0}":"Copy of ${0}","Enter a new name for '${0}'":"Enter a new name for '${0}'","Choose folder...":"Choose folder...",Rename:"Rename","Rename the selected files or folders":"Rename the selected files or folders","Compare with each other":"Compare with each other","Compare the selected 2 files with each other":"Compare the selected 2 files with each other","Compare with...":"Compare with...","Compare the selected folder with a specified folder":"Compare the selected folder with a specified folder",Delete:"Delete","Unknown item":"Unknown item","Are you sure you want to delete these ${0} items?":"Are you sure you want to delete these ${0} items?","Are you sure you want to delete '${0}'?":"Are you sure you want to delete '${0}'?","Export as zip":"Zip","Create a zip file of the folder contents and download it":"Create a zip file of the folder contents and download it","New File":"File","Create a new file":"Create a new file","Name:":"Name:","New Folder":"Folder","Folder name:":"Folder name:","Create a new folder":"Create a new folder","Creating folder":"Creating folder",Folder:"Folder","Create an empty folder":"Create an empty folder","Create an empty folder on the Orion server.  You can import, upload, or create content in the editor.":"Create an empty folder on the Orion server.  You can import, upload, or create content in the editor.","Sample HTML5 Site":"Sample HTML5 Site","Generate a sample":"Generate a sample",'Generate an HTML5 "Hello World" website, including JavaScript, HTML, and CSS files.':'Generate an HTML5 "Hello World" website, including JavaScript, HTML, and CSS files.',"Creating a folder for ${0}":"Creating a folder for ${0}","SFTP Import":"SFTP Import","Import content from SFTP":"Import content from SFTP","Import content from an SFTP location into an Orion folder.  You will be prompted for the SFTP location and credentials.":"Import content from an SFTP location into an Orion folder.  You will be prompted for the SFTP location and credentials.","Imported Content":"Imported Content","Upload a Zip":"Upload a Zip","Upload content from a local zip file":"Upload content from a local zip file","Upload content from a local zip file into an Orion folder.  You will be prompted for the local zip file.":"Upload content from a local zip file into an Orion folder.  You will be prompted for the local zip file.","Uploaded Content":"Uploaded Content","Creating an upload folder for ":"Creating an upload folder for ","Clone Git Repository":"Clone Git Repository","Clone a git repository":"Clone a git repository","Go to the Orion repositories page to provide a git repository URL.  Once the repository is created, it will appear in the Navigator.":"Go to the Orion repositories page to provide a git repository URL.  Once the repository is created, it will appear in the Navigator.","Link to Server":"Link to Server","Link to existing content on the server":"Link to existing content on the server","Create a folder that links to an existing folder on the server.":"Create a folder that links to an existing folder on the server.","Server path:":"Server path:","The name and server location were not specified.":"The name and server location were not specified.","Go Up":"Go Up","Move up to the parent folder":"Move up to the parent folder","Go Into":"Go Into","Move into the selected folder":"Move into the selected folder","File or zip archive":"File or zip archive","Import a file or zip archive from your local file system":"Import a file or zip archive from your local file system","SFTP from...":"SFTP","Copy files and folders from a specified SFTP connection":"Copy files and folders from a specified SFTP connection","Importing from ${0}":"Importing from ${0}","SFTP to...":"SFTP","Copy files and folders to a specified SFTP location":"Copy files and folders to a specified SFTP location",Exporting:"Exporting to ${0}","Pasting ${0}":"Pasting ${0}","Copy to":"Copy to","Move to":"Move to","Copying ${0}":"Copying ${0}","Moving ${0}":"Moving ${0}","Renaming ${0}":"Renaming ${0}","Deleting ${0}":"Deleting ${0}","Creating ${0}":"Creating ${0}","Linking to ${0}":"Linking to ${0}","Move files and folders to a new location":"Move files and folders to a new location",Cut:"Cut",Copy:"Copy","Fetching children of ":"Fetching children of ",Paste:"Paste","Cannot paste into the Workspace root":"Cannot paste into the Workspace root","Open With":"Open With","Loading ":"Loading ",New:"New",File:"File",Actions:"Actions","Orion Content":"Orion Content"," is not supported in this file system":" is not supported in this file system","Create new content":"Create new content","Import from HTTP...":"HTTP","File URL:":"File URL:","Import a file from a URL and optionally unzip it":"Import a file from a URL and optionally unzip it","Unzip *.zip files:":"Unzip *.zip files:","Extracted from:":"Extracted from:","Did not drop ${0}.  Folder drop is not supported in this browser.":"Did not drop ${0}.  Folder drop is not supported in this browser.","You cannot copy files directly into the workspace.  Create a folder first.":"You cannot copy files directly into the workspace.  Create a folder first.","Unzip ${0}?":"Unzip ${0}?","Upload progress: ":"Upload progress: ","Uploading ":"Uploading ","Cancel upload":"Cancel upload","Uploading the following file failed: ":"Uploading the following file failed: ","Enter project name:":"Enter project name:","Creating project ":"Creating project ",NoFile:"Use the ${0} menu to create new files and folders. Click a file to start coding.",Download:"Download",Download_tooltips:"Download the file contents as the displayed name","Downloading...":"Reading file contents...","Download not supported":"Contents download is not supported in this browser."}),define("orion/navigate/nls/messages",["orion/i18n!orion/navigate/nls/messages","orion/navigate/nls/root/messages"],function(e,t){var i={root:t};return Object.keys(e).forEach(function(t){"undefined"==typeof i[t]&&(i[t]=e[t])}),i}),define("orion/fileClient",["i18n!orion/navigate/nls/messages","orion/Deferred","orion/i18nUtil"],function(e,t,i){function n(t,i,n){if(!t[i])throw i+e[" is not supported in this file system"];return t[i].apply(t,n)}function o(i,r,s,a){if(!i.readBlob)throw e["source file service does not support binary read"];if(!s.writeBlob)throw e["target file service does not support binary write"];if("/"!==r[r.length-1])return n(i,"readBlob",[r]).then(function(e){return n(s,"writeBlob",[a,e])});var l=a.substring(0,a.length-1),c=decodeURIComponent(l.substring(l.lastIndexOf("/")+1)),d=l.substring(0,l.lastIndexOf("/")+1);return n(s,"createFolder",[d,c]).then(function(){},function(){}).then(function(){return n(i,"fetchChildren",[r]).then(function(e){for(var n=[],r=0;r<e.length;++r){var l=e[r].Location,c=l;e[r].Directory&&(c=l.substring(0,l.length-1));var d=decodeURIComponent(c.substring(c.lastIndexOf("/")+1)),h=a+encodeURIComponent(d);e[r].Directory&&(h+="/"),n[r]=o(i,l,s,h)}return t.all(n)})})}function r(n,o){function r(i){var n=new t;return n.reject(e["No Matching FileService for location:"]+i),n}var s=n.getServiceReferences("orion.core.file"),a=s;if(o){a=[];for(var l=0;l<s.length;++l)o(s[l])&&a.push(s[l])}for(var c=[],d=[],h=[],u=[],p={fetchChildren:function(){var e=new t;return e.resolve(u),e},createWorkspace:function(){var i=new t;return i.reject(e["no file service"]),i},loadWorkspaces:function(){var i=new t;return i.reject(e["no file service"]),i},loadWorkspace:function(){var i=new t;return window.setTimeout(function(){i.resolve({Directory:!0,Length:0,LocalTimeStamp:0,Name:e["File Servers"],Location:"/",Children:u,ChildrenLocation:"/"})},100),i},search:r,createProject:r,createFolder:r,createFile:r,deleteFile:r,moveFile:r,copyFile:r,read:r,write:r},m=0;m<a.length;++m){u[m]={Directory:!0,Length:0,LocalTimeStamp:0,Location:a[m].getProperty("top"),ChildrenLocation:a[m].getProperty("top"),Name:a[m].getProperty("Name")};var g=a[m].getProperty("pattern")||a[m].getProperty("top").replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");"^"!==g[0]&&(g="^"+g),c[m]=new RegExp(g),d[m]=n.getService(a[m]),h[m]=a[m].getProperty("Name"),a[m].getProperty("NameKey")&&a[m].getProperty("nls")&&i.getMessageBundle(a[m].getProperty("nls")).then(function(e,t){u[e].Name=t[a[e].getProperty("NameKey")],h[e]=t[a[e].getProperty("NameKey")]}.bind(this,m))}this._getServiceIndex=function(t){if("/"===t)return-1;if(!t||t.length&&0===t.length)return d[0]?0:-1;for(var i=0;i<c.length;++i)if(c[i].test(t))return i;throw e["No Matching FileService for location:"]+t},this._getService=function(e){var t=this._getServiceIndex(e);return-1===t?p:d[t]},this._getServiceName=function(e){var t=this._getServiceIndex(e);return-1===t?p.Name:h[t]},this._getServiceRootURL=function(e){var t=this._getServiceIndex(e);return-1===t?p.Location:u[t].Location}}return r.prototype={getService:function(e){return this._getService(e)},fileServiceName:function(e){return this._getServiceName(e)},fileServiceRootURL:function(e){return this._getServiceRootURL(e)},fetchChildren:function(e){return n(this._getService(e),"fetchChildren",arguments)},createWorkspace:function(){return n(this._getService(),"createWorkspace",arguments)},loadWorkspaces:function(){return n(this._getService(),"loadWorkspaces",arguments)},loadWorkspace:function(e){return n(this._getService(e),"loadWorkspace",arguments)},createProject:function(e){return n(this._getService(e),"createProject",arguments)},createFolder:function(e){return n(this._getService(e),"createFolder",arguments)},createFile:function(e){return n(this._getService(e),"createFile",arguments)},deleteFile:function(e){return n(this._getService(e),"deleteFile",arguments)},moveFile:function(e,t,i){var r=this._getService(e),s=this._getService(t);if(r===s)return n(r,"moveFile",arguments);var a="/"===e[e.length-1],l=t;if("/"!==l[l.length-1]&&(l+="/"),i)l+=encodeURIComponent(i);else{var c=e;a&&(c=c.substring(0,c.length-1)),l+=c.substring(c.lastIndexOf("/")+1)}return a&&"/"!==l[l.length-1]&&(l+="/"),o(r,e,s,l).then(function(){return n(r,"deleteFile",[e])})},copyFile:function(e,t,i){var r=this._getService(e),s=this._getService(t);if(r===s)return n(r,"copyFile",arguments);var a="/"===e[e.length-1],l=t;if("/"!==l[l.length-1]&&(l+="/"),i)l+=encodeURIComponent(i);else{var c=e;a&&(c=c.substring(0,c.length-1)),l+=c.substring(c.lastIndexOf("/")+1)}return a&&"/"!==l[l.length-1]&&(l+="/"),o(r,e,s,l)},read:function(e){return n(this._getService(e),"read",arguments)},readBlob:function(e){return n(this._getService(e),"readBlob",arguments)},write:function(e){return n(this._getService(e),"write",arguments)},remoteImport:function(e){return n(this._getService(e),"remoteImport",arguments)},remoteExport:function(e){return n(this._getService(e),"remoteExport",arguments)},search:function(e){return n(this._getService(e.resource),"search",arguments)}},r.prototype.constructor=r,{FileClient:r}}),define("orion/webui/SideMenu",["orion/webui/littlelib","orion/PageUtil","orion/URL-shim"],function(e,t){function i(t,i){if(this._parentNode=e.node(t),!this._parentNode)throw new Error("Missing parentNode");this._contentNode=e.node(i),this._categoryInfos=[],this._categorizedPageLinks={},this._categorizedRelatedLinks={},this._categorizedAnchors=null,this._state=localStorage.getItem(n)||s,this._currentCategory="",this._notificationTimeout=null,this._renderTimeout=null}var n="sideMenuNavigation",o="open",r="closed",s=o,a="40px",l=301;return i.prototype={constructor:i.prototype.constructor,setCategories:function(e){this._categoryInfos=e.getCategoryIDs().map(function(t){return e.getCategory(t)}).sort(function(e,t){var i=e.order||100,n=t.order||100;return n>i?-1:i>n?1:e.textContent.localeCompare(t.textContent)})},setPageLinks:function(e){this._categorizedPageLinks={},e.getAllLinks().forEach(function(e){var t=e.category;this._categorizedPageLinks[t]=this._categorizedPageLinks[t]||[],this._categorizedPageLinks[t].push({title:e.textContent,order:e.order||100,href:e.href})},this)},setRelatedLinks:function(e,t){this._categorizedRelatedLinks={},e.forEach(function(e){var i=e.relatedLink,n=e.command,o=e.invocation;if(!t||-1===t.indexOf(i.id)){var r=i.category;this._categorizedRelatedLinks[r]=this._categorizedRelatedLinks[r]||[],this._categorizedRelatedLinks[r].push({title:n.name,order:i.order||100,href:n.hrefCallback.call(o.handler,o)})}},this),this._updateCategoryAnchors(),this._updateCategoryNotifications()},render:function(){if(null===this._categorizedAnchors){this._categorizedAnchors={};var e=new URL(window.location.href);e.hash="",this._currentCategory="",Object.keys(this._categorizedPageLinks).some(function(t){var i=this._categorizedPageLinks[t];return i.some(function(t){var i=new URL(t.href);return t.hash="",e.href===i.href})?(this._currentCategory=t,!0):void 0},this);var t=document.createElement("ul");t.classList.add("sideMenuList"),this._categoryInfos.forEach(function(e){var i=document.createElement("li");i.classList.add("sideMenuItem"),i.classList.add("sideMenu-notification"),this._currentCategory===e.id&&i.classList.add("sideMenuItemActive"),i.categoryId=e.id,i.categoryName=e.textContent||e.id;var n=document.createElement("a");if(n.classList.add("submenu-trigger"),"string"==typeof e.imageDataURI&&0===e.imageDataURI.indexOf("data:image")){var o=document.createElement("img");o.width="16",o.height="16",o.src=e.imageDataURI,n.appendChild(o)}else{var r=e.imageClass||"core-sprite-blank-menu-item";n.classList.add(r)}i.appendChild(n),t.appendChild(i),this._categorizedAnchors[e.id]=n},this),this._updateCategoryAnchors(),this._parentNode.appendChild(t)}this._state===r?(this._contentNode.style.left="0",this._renderTimeout&&(window.clearTimeout(this._renderTimeout),this._renderTimeout=null),this._renderTimeout=window.setTimeout(function(){this._parentNode.style.display="none",this._renderTimeout=null}.bind(this),l),this._parentNode.classList.add("animating")):(this._renderTimeout&&(window.clearTimeout(this._renderTimeout),this._renderTimeout=null),this._parentNode.classList.remove("animating"),this._parentNode.style.display="block",this._parentNode.style.width=a,this._contentNode.style.left=a)},hide:function(){localStorage.setItem(n,r),this._contentNode.style.left="0"},toggle:function(){var e=this._contentNode;e&&e.classList.add("content-fixedHeight-animation"),this._state=this._state===o?r:o,this._state===s?localStorage.removeItem(n):localStorage.setItem(n,this._state),this.render()},_updateCategoryAnchors:function(){Object.keys(this._categorizedAnchors).forEach(function(e){var t=this._categorizedAnchors[e],i=[];if(e===this._currentCategory)return t.href="",t.onclick=function(){return!1},void(t.title=t.parentElement.categoryName);if(this._categorizedPageLinks[e]&&i.push.apply(i,this._categorizedPageLinks[e]),this._categorizedRelatedLinks[e]&&i.push.apply(i,this._categorizedRelatedLinks[e]),0===i.length)t.href="",t.title=t.parentElement.categoryName;else{i.sort(function(e,t){return e.order<t.order?-1:t.order<e.order?1:e.title.localeCompare(t.title)});var n=i.shift();t.href=n.href,t.title=n.title}},this)},_updateCategoryNotifications:function(){clearTimeout(this._notificationTimeout),this._notificationTimeout=setTimeout(this._updateCategoryNotifications.bind(this),3e5);var e=t.matchResourceParameters().resource,i=new URL(e,window.location.href).href;this._categoryInfos.forEach(function(n){if(n.service&&n.service.getNotifications){var o=this._categorizedAnchors[n.id].parentElement;n.service.getNotifications(i).then(function(i){if(e===t.matchResourceParameters().resource){var n="";i.forEach(function(e){"info"!==e.level||n?"warn"!==e.level||n&&"info"!==n?"error"===e.level&&"error"!==n&&(n="error"):n="warn":n="info"}),n?o.setAttribute("level",n):o.removeAttribute("level")}},function(e){window.console.log(e)})}},this)}},i}),define("orion/globalCommands",["i18n!orion/nls/messages","require","orion/commonHTMLFragments","orion/keyBinding","orion/EventTarget","orion/commandRegistry","orion/commands","orion/parameterCollectors","orion/extensionCommands","orion/uiUtils","orion/keyBinding","orion/breadcrumbs","orion/webui/littlelib","orion/webui/splitter","orion/webui/dropdown","orion/webui/tooltip","orion/contentTypes","orion/URITemplate","orion/keyAssist","orion/PageUtil","orion/widgets/themes/ThemePreferences","orion/widgets/themes/container/ThemeData","orion/Deferred","orion/widgets/UserMenu","orion/PageLinks","orion/webui/dialogs/OpenResourceDialog","text!orion/banner/banner.html","text!orion/banner/footer.html","text!orion/banner/toolbar.html","orion/widgets/input/DropDownMenu","orion/util","orion/customGlobalCommands","orion/fileClient","orion/webui/SideMenu","orion/objects"],function(e,t,i,n,o,r,s,a,l,c,d,h,u,p,m,g,f,v,y,C,w,_,b,S,L,E,R,P,T,k,N,x,A,I,O){function D(e){var t=document.createElement("a");
return t.href=e,t.href}function M(e,t){if(e.getLabel)return e.getLabel();var i=new b;return i.resolve(t.properties.name),i}function F(){var e=document.getElementById("userTrigger"),t=e.className;t+=" imageSprite core-sprite-silhouette",e.className=t}function $(t){var i=u.node("progressPane");i.setAttribute("aria-label",e["Operations - Press spacebar to show current operations"]);var n=t.getService("orion.page.progress");n&&n.init.bind(n)("progressPane")}function U(e){var t=e.getServiceReferences("orion.core.auth");ot=[];var i=nt.createMenuGenerator.apply(this,arguments);if(i)for(var n=0;n<t.length;n++){var o=t[n],r=e.getService(o);M(r,o).then(function(e){r.getKey().then(function(t){ot.push(t),r.getUser().then(function(n){i.addUserItem(t,r,e,n)},function(n,o){i.addUserItem(t,r,e,o)}),window.addEventListener("storage",function(){it[t]!==localStorage.getItem(t)&&(it[t]=localStorage.getItem(t),r.getUser().then(function(n){i.addUserItem(t,r,e,n)},function(){i.addUserItem(t,r,e)}))},!1)})})}}function B(e){return e}function G(e,t,i,n,o){function r(){if(u)return u;var t=e.getService("orion.core.contentTypeRegistry");return t||(t=new f.ContentTypeRegistry(e),t=e.getService("orion.core.contentTypeRegistry")),t.getContentTypes().then(function(e){return u=e})}function a(e){for(var t,i={},n=e.getPropertyKeys(),o=0;o<n.length;o++)t=n[o],i[t]=e.getProperty(t);return i}function c(e,t){var i=null;return e.some(function(e){return t===e.getProperty("id")?!!(i=e):!1}),i}function d(e){var i=e.command;return!i.visibleWhen||i.visibleWhen(t)?(e.invocation=new s.CommandInvocation(t,t,null,i,n),(new b).resolve(e)):"function"==typeof o?(p||(p=o()),b.when(p,function(o){return!o||t!==Q||i.visibleWhen&&!i.visibleWhen(o)?void 0:(e.invocation=new s.CommandInvocation(o,o,null,i,n),e)})):(new b).resolve()}function h(e,t,i){return i?(new b).resolve({relatedLink:e,command:i}):t.then(function(t){return{relatedLink:e,command:new s.Command(t)}})}var u,p,m=arguments,g=e&&e.getServiceReferences("orion.page.link.related");if(g&&0!==g.length){var v=this;b.when(r(),function(){if(nt.beforeGenerateRelatedLinks.apply(v,m)){var t=e.getServiceReferences("orion.navigate.command"),o=[];g.forEach(function(i){var r=a(i);if(r.id){var s;if((r.nls&&r.nameKey||r.name)&&r.uriTemplate)return s=l._createCommandOptions(r,i,e,u,!0),void o.push(h(r,s,null));var d=c(t,r.id);if(d){var p=a(d),m={};O.mixin(m,p,r);var g;(g=n.findCommand(r.id))?o.push(h(m,null,g)):(s=l._createCommandOptions(p,d,e,u,!0),o.push(h(m,s,null)))}}}),b.all(o,B).then(function(e){return e.sort(function(e,t){return e.command.name.localeCompare(t.command.name)}),b.all(e.map(d),B).then(function(t){var o=[];t=t.filter(function(t,i){return t?!0:(o.push(e[i]),!1)}),nt.addRelatedLinkCommands.call(v,n,t,o,i),nt.afterGenerateRelatedLinks.apply(v,m)})})}})}}function H(e){var t=u.node("globalActions");t&&(e.destroy(t),e.renderCommands(t.id,t,{},{},"tool"))}function K(e){rt=e}function j(e){et&&("*"!==et.charAt(0)||e||(et=et.substring(1)),e&&"*"!==et.charAt(0)&&(et="*"+et),window.document.title=et);var t=u.node("dirty");t&&(t.textContent=e?"*":"")}function W(e){var t,i,n=e.breadcrumbRootName,o=e.serviceRegistry;e.target?(e.searchService&&e.searchService.setLocationByMetaData(e.target),!e.fileService||e.breadcrumbTarget||e.staticBreadcrumb||(i=n?n+" ":"",i+=e.fileService.fileServiceName(e.target.Location),n=null),t=e.name||e.target.Name,Q=e.target,G.call(this,o,e.target,rt,e.commandService,e.makeAlternate)):(e.breadcrumbTarget||(n=n||e.task||e.name),t=e.name,G.call(this,o,{NoTarget:""},rt,e.commandService,e.makeAlternate)),et=e.title,et||(et=t?t+" - "+e.task:e.task),window.document.title=et,nt.afterSetPageTarget.apply(this,arguments);var r=u.node(e.breadCrumbContainer?e.breadCrumbContainer:"location");if(r)if(u.empty(r),e.staticBreadcrumb)new h.BreadCrumbs({container:r,rootSegmentName:n});else{var s=o&&new A.FileClient(o),a=e.breadcrumbTarget||e.target,l=s&&a&&a.Location?s.fileServiceRootURL(a.Location):null;new h.BreadCrumbs({container:r,resource:a,rootSegmentName:n,workspaceRootSegmentName:i,workspaceRootURL:l,makeFinalHref:e.makeBreadcrumFinalLink,makeHref:e.makeBreadcrumbLink})}}function V(e){var t=window.getComputedStyle(e,null);if(null===t)return e;var i=t.getPropertyValue("position");return"absolute"!==i&&e.parentNode&&e!==document.body?V(e.parentNode):e}function q(e){var t={},i=null;"string"==typeof e&&(e=u.node(e)),e||(e=u.node("pageActions"));for(var n=e;n&&n.classList;){if(n.classList.contains("toolComposite")){i=n;break}n=n.parentNode}if(e.classList.contains("commandMarker")&&(t.commandNode=e),i||(i=u.node("pageToolbar")),i&&(t.slideContainer=u.$(".slideParameters",i),t.parameterArea=u.$(".parameters",i),t.dismissArea=u.$(".parametersDismiss",i),t.notifications=u.$("#notificationArea",i),i.parentNode&&(t.toolbarTarget=u.$(".toolbarTarget",i.parentNode),t.toolbarTarget))){var o=u.bounds(t.toolbarTarget),r=u.bounds(V(t.toolbarTarget.parentNode));t.toolbarTargetY=o.top-r.top,t.toolbar=i}return t}function z(e){var t=e.slideContainer;if(t&&(t.style.left="",t.style.top="",t.classList.contains("slideContainerActive"))){var i=u.bounds(t),n=u.bounds(t.parentNode);t.style.left=(n.width-i.width)/2+"px",t.style.top="0"}}function J(){return st}function Y(){return at}function X(){return lt}function Z(o,r,l,c,d,h,m,g){function f(e){e=e;for(var t=u.$$array(".targetSelector"),i=0;i<t.length;i++)t[i].target=e}function v(e){e.registerService("orion.cm.managedservice",{updated:function(e){var t;t=e&&"undefined"!==e["links.newtab"]&&e["links.newtab"]?"_blank":"_self",f(t)}},{pid:"nav.config"})}new w.ThemePreferences(c,new _.ThemeData).apply();var C=u.node(o);if(!C)throw e["could not find banner parent, id was "]+o;var S=document.createRange();S.selectNode(C);var k=S.createContextualFragment(R);u.processTextNodes(k,e),C.firstChild?C.insertBefore(k,C.firstChild):C.appendChild(k);var x=u.node("home");x.href=t.toUrl("edit/edit.html"),x.setAttribute("aria-label",e["Orion Home"]);var A=u.node("progressPane");A.src=s.NO_IMAGE;var I=u.node("pageToolbar");I&&(I.classList.add("toolbarLayout"),I.innerHTML=T+i.slideoutHTMLFragment("mainToolbar"));var O=u.node("closeNotifications");if(O&&O.setAttribute("aria-label",e["Close notification"]),N.isFirefox<=17){var D=u.node("staticBanner");D&&(D.style.width="100%",D.style.MozBoxSizing="border-box")}var M=u.node("footer");M&&(M.innerHTML=P,u.processTextNodes(M,e)),l.setParameterCollector(new a.CommandParameterCollector(q,z)),document.addEventListener("keydown",function(e){if(e.keyCode===u.KEY.ESCAPE){var t=r.getService("orion.page.message");t&&t.setProgressMessage("")}},!1),nt.generateNavigationMenu.apply(this,arguments),nt.afterGenerateNavigationMenu.apply(this,arguments);var F=L.getCategoriesInfo(r),B=L.getPageLinksInfo(r,"orion.page.link");b.all([F,B]).then(function(e){if(this.sideMenu){var t=e[0],i=e[1];this.sideMenu.setCategories(t),this.sideMenu.setPageLinks(i),this.sideMenu.render()}}.bind(this));var G=u.$(".split");if(G){var K=u.$(".sidePanelLayout"),j=u.$(".mainPanelLayout");if(K&&j){st={side:K,main:j},st.splitter=new p.Splitter({node:G,sidePanel:K,mainPanel:j,toggle:!0,closeByDefault:g});var W=new s.Command({name:e["Toggle side panel"],tooltip:e["Open or close the side panel"],id:"orion.toggleSidePane",callback:function(){st.splitter.toggleSidePanel()}});l.addCommand(W),l.registerCommandContribution("pageActions","orion.toggleSidePane",1,null,!0,new n.KeyBinding("l",N.isMac?!1:!0,!0,!1,N.isMac?!0:!1))}}var V=!1,J=function(e,t){if(!V){var i=t.getService("orion.page.progress"),n=new E.OpenResourceDialog({searcher:e,progress:i,searchRenderer:e.defaultRenderer,onHide:function(){V=!1}});window.setTimeout(function(){V=!0,n.show()},0)}},Y=new s.Command({name:e["Find File Named..."],tooltip:e["Choose a file by name and open an editor on it"],id:"orion.openResource",callback:function(){J(d,r)}});l.addCommand(Y),l.registerCommandContribution("globalActions","orion.openResource",100,null,!0,new n.KeyBinding("f",!0,!0));var Z=!1,Q=function(){if(Z)return!1;var e=u.node("banner"),t=u.node("footer"),i=u.node("sideMenu"),n=u.$(".content-fixedHeight"),o="hidden"===e.style.visibility;return o?(e.style.visibility="visible",t.style.visibility="visible",n.classList.remove("content-fixedHeight-maximized"),i&&i.classList.remove("sideMenu-maximized")):(e.style.visibility="hidden",t.style.visibility="hidden",n.classList.add("content-fixedHeight-maximized"),i&&i.classList.add("sideMenu-maximized")),X().dispatchEvent({type:"toggleTrim",maximized:!o}),!0},et=window.orionNoTrim||!1;if(et)Q(),Z=!0,this.sideMenu.hide();else{var tt=new s.Command({name:e["Toggle banner and footer"],tooltip:e["Hide or show the page banner and footer"],id:"orion.toggleTrim",callback:Q});l.addCommand(tt),l.registerCommandContribution("globalActions","orion.toggleTrim",100,null,!0,new n.KeyBinding("m",!0,!0))}var it=new s.Command({name:e["System Configuration Details"],tooltip:e["System Config Tooltip"],id:"orion.configDetailsPage",hrefCallback:function(){return t.toUrl("help/about.html")}});l.addCommand(it),l.registerCommandContribution("globalActions","orion.configDetailsPage",100,null,!0,new n.KeyBinding(112,!0,!0));var ot=new s.Command({name:e["Background Operations"],tooltip:e["Background Operations Tooltip"],id:"orion.backgroundOperations",hrefCallback:function(){return t.toUrl("operations/list.html")}});l.addCommand(ot),l.registerCommandContribution("globalActions","orion.backgroundOperations",100,null,!0,new n.KeyBinding("o",!0,!0)),at=new y.KeyAssistPanel({commandRegistry:l});var rt=new s.Command({name:e["Show Keys"],tooltip:e["Show a list of all the keybindings on this page"],id:"orion.keyAssist",callback:function(){return at.isVisible()?at.hide():at.show(),!0}});l.addCommand(rt),l.registerCommandContribution("globalActions","orion.keyAssist",100,null,!0,new n.KeyBinding(191,!1,!0)),H(l),U(r,rt.callback),$(r),window.addEventListener("hashchange",function(){l.processURL(window.location.href)},!1),window.setTimeout(function(){v(r)},0),nt.afterGenerateBanner.apply(this,arguments)}var Q,et,tt=D(t.toUrl("auth/NotifyAuthentication.html")),it={},nt={createMenuGenerator:x.createMenuGenerator||function(t,i){var n=u.node("userMenu");if(n){var o=u.node("userDropdown"),r=new m.Dropdown({dropdown:o}),s=new S.UserMenu({dropdownNode:o,dropdown:r,serviceRegistry:t}),a=u.node("userTrigger");return new g.Tooltip({node:a,text:e.Options,position:["below","left"]}),F(),s.setKeyAssist(i),s}},beforeGenerateRelatedLinks:x.beforeGenerateRelatedLinks||function(){return!0},addRelatedLinkCommands:x.addRelatedLinkCommands||function(e,t,i,n){this.sideMenu&&this.sideMenu.setRelatedLinks(t,n)},afterGenerateRelatedLinks:x.afterGenerateRelatedLinks||function(){},afterSetPageTarget:x.afterSetPageTarget||function(){},generateNavigationMenu:x.generateNavigationMenu||function(){var t=u.node("sideMenu");if(t){var i=u.node("centralNavigation");new g.Tooltip({node:i,text:e.CentralNavTooltip,position:["right"]}),this.sideMenu=new I(t,u.node("pageContent")),i.addEventListener("click",this.sideMenu.toggle.bind(this.sideMenu));var n=u.node("sideMenuToggle");n&&n.addEventListener("click",this.sideMenu.toggle.bind(this.sideMenu))}},afterGenerateNavigationMenu:x.afterGenerateNavigationMenu||function(){},afterGenerateBanner:x.afterGenerateBanner||function(){}},ot=[],rt=[],st=null,at=null,lt=new o;return{generateBanner:Z,getToolbarElements:q,getMainSplitter:J,getKeyAssist:Y,getGlobalEventTarget:X,layoutToolbarElements:z,setPageTarget:W,setDirtyIndicator:j,setPageCommandExclusions:K,notifyAuthenticationSite:tt}}),define("orion/urlUtils",["orion/PageUtil","orion/URL-shim"],function(e){function t(t){for(var i=/\[([^\]]*)\]\(([^\)]+)\)/g,n=i.exec(t),o=[],r=0;n;){if(3===n.length&&n[2].length>0){var s=new URL(n[2]);":"!==s.protocol&&e.validateURLScheme(s.href)&&(n.index>r&&o.push({segmentStr:t.substring(r,n.index)}),o.push({segmentStr:n[1].length>0?n[1]:n[2],urlStr:n[2]}),r=n.index+n[0].length)}n=i.exec(t)}return 0===r?null:(r<t.length&&o.push({segmentStr:t.substring(r)}),o)}function i(e,t){t.forEach(function(t){if(t.urlStr){var i=document.createElement("a");i.href=t.urlStr,i.appendChild(document.createTextNode(t.segmentStr)),e.appendChild(i)}else{var n=document.createElement("span");n.textContent=t.segmentStr,e.appendChild(n)}})}return{detectValidURL:t,processURLSegments:i}}),define("orion/status",["i18n!orion/nls/messages","orion/webui/littlelib","orion/globalCommands","orion/urlUtils"],function(e,t,i,n){function o(e,t,i,n,o){this._serviceRegistry=e,this._serviceRegistration=e.registerService("orion.page.message",this),this._operationsClient=t,this.notificationContainerDomId=o,this.domId=i,this.progressDomId=n||i,this._hookedClose=!1,this._timer=null,this._clickToDisMiss=!0,this._cancelMsg=null}var r;return o.prototype={_init:function(){var e=t.node("closeNotifications");if(e&&!this._hookedClose){e.style.cursor="pointer",this._hookedClose=!0;var i=t.node(this.notificationContainerDomId);t.addAutoDismiss([i],function(){this._clickToDisMiss&&this.close()}.bind(this)),e.addEventListener("click",function(){this.close()}.bind(this)),i.addEventListener("click",function(e){if(e&&e.target&&"a"===e.target.nodeName.toLowerCase()){var n=t.$$("a",i);n&&n.length&&1===n.length&&this.close()}}.bind(this))}},close:function(){window.clearTimeout(this._timer);var e=t.node("closeNotifications");this._cancelMsg&&this._cancelFunc&&e?(e.innerHTML="",e.classList.remove("cancelButton"),e.classList.add("dismissButton"),e.classList.add("core-sprite-close"),e.classList.add("imageSprite"),this._cancelFunc(),this._cancelMsg=null):this.setProgressMessage("")},_getNotifierElements:function(){return this._notifierElements||(this._notifierElements=i.getToolbarElements(this.notificationContainerDomId)),this._notifierElements},setMessage:function(e,i,n){this._init(),this.currentMessage=e;var o=t.node(this.domId);if("boolean"==typeof n){var r=o.getAttribute("aria-live");o.setAttribute("aria-live",n?"polite":"off"),window.setTimeout(function(){e===this.currentMessage&&(t.empty(o),o.appendChild(document.createTextNode(e)),window.setTimeout(function(){o.setAttribute("aria-live",r)},100))}.bind(this),100)}else t.empty(o),o.appendChild(document.createTextNode(e));"number"==typeof i&&window.setTimeout(function(){e===this.currentMessage&&(t.empty(o),o.appendChild(document.createTextNode("")))}.bind(this),i)},setErrorMessage:function(e){this._clickToDisMiss=!0,this.currentMessage=e,this._init();var i=e.responseText||e.message||e;if("string"==typeof i)try{i=JSON.parse(i)}catch(n){}var o=i.Message||i,r="red";if(i.Severity)switch(i.Severity){case"Warning":r="#FFCC00";break;case"Error":r="red";break;case"Info":case"Ok":r="green"}var s=document.createElement("span");s.style.color=r,s.appendChild(document.createTextNode(o));var a=t.node(this.domId);t.empty(a),a.appendChild(s)},setProgressMessage:function(e){this._clickToDisMiss=!1,this._init(),this.currentMessage=e;var i=document.createElement("span");i.classList.add("progressIcon");var n=t.node(this.progressDomId);t.empty(n),n.appendChild(i),n.appendChild(document.createTextNode(e));var o=t.node(this.notificationContainerDomId);if(o.classList.remove("notificationHide"),e&&e.length>0)o.classList.add("progressNormal"),o.classList.add("notificationShow");else{if(this._progressMonitors&&this._progressMonitors.length>0)return this._renderOngoingMonitors();o.classList.remove("notificationShow"),o.classList.add("notificationHide")}},setCancelFunction:function(e){this._cancelFunc=e},setProgressResult:function(i,o){this._clickToDisMiss=!1,this._cancelMsg=o,this.currentMessage=i;var r=i.responseText||i;if("string"==typeof r)try{r=JSON.parse(r)}catch(s){}this._init();var a=r.Message||r.toString(),l=e.UnknownError,c="core-sprite-information",d="progressNormal",h=document.createElement("span");h.classList.add("imageSprite"),h.classList.add("progressIcon");var u=[];if(r.Severity)switch(r.Severity){case"Warning":l=e.UnknownWarning,c="core-sprite-warning",d="progressWarning",u.push("progressInfo"),u.push("progressError"),u.push("progressNormal"),this._clickToDisMiss=!0;break;case"Error":c="core-sprite-error",d="progressError",u.push("progressWarning"),u.push("progressInfo"),u.push("progressNormal"),this._clickToDisMiss=!0;break;default:d="progressNormal",u.push("progressWarning"),u.push("progressError"),u.push("progressNormal")}u.push("notificationHide"),h.classList.add(c);var p=t.node(this.progressDomId),m=t.node(this.notificationContainerDomId);if(t.empty(p),p.appendChild(h),a===Object.prototype.toString()&&(a=l),r.HTML){var g=document.createElement("span");g.innerHTML=a,p.appendChild(g)}else{var f,v=n.detectValidURL(a);v?(f=document.createDocumentFragment(),n.processURLSegments(f,v),Array.prototype.forEach.call(t.$$("a",f),function(e){e.target="_blank"})):("Warning"===r.Severity||"Error"===r.Severity||o||(this._timer&&window.clearTimeout(this._timer),this._timer=window.setTimeout(function(){this.setProgressMessage(""),this._timer=null}.bind(this),5e3)),f=document.createTextNode(a)),p.appendChild(f)}if(d&&this.progressDomId!==this.domId){m.classList.add(d);for(var y=0;y<u.length;y++)m.classList.remove(u[y])}m.classList.add("notificationShow");var C=t.node("closeNotifications");C&&(this._cancelMsg?(C.classList.add("cancelButton"),C.classList.remove("dismissButton"),C.classList.remove("core-sprite-close"),C.classList.remove("imageSprite"),C.innerHTML=this._cancelMsg):(C.innerHTML="",C.classList.remove("cancelButton"),C.classList.add("dismissButton"),C.classList.add("core-sprite-close"),C.classList.add("imageSprite")))},showWhile:function(e,t){var i=this;if(t){i.setProgressMessage(t);var n=function(){t===i.currentMessage&&i.setProgressMessage("")};e.then(n,n)}return e},_lastProgressId:0,_progressMonitors:{length:0},createProgressMonitor:function(e,t){return new r(this,++this._lastProgressId,e,t)},_renderOngoingMonitors:function(){if(this._progressMonitors.length>0){var e="",t=!0;for(var i in this._progressMonitors)this._progressMonitors[i].status&&(t||(e+=", "),e+=this._progressMonitors[i].status,t=!1);this.setProgressMessage(e)}else this.setProgressMessage("")},_beginProgressMonitor:function(e){this._progressMonitors[e.progressId]=e,this._progressMonitors.length++,this._renderOngoingMonitors()},_workedProgressMonitor:function(e){this._progressMonitors[e.progressId]=e,this._renderOngoingMonitors()},_doneProgressMonitor:function(e){delete this._progressMonitors[e.progressId],this._progressMonitors.length--,e.status?this.setProgressResult(e.status):this._renderOngoingMonitors()}},o.prototype.constructor=o,r=function(e,t,i,n){if(this.statusService=e,this.progressId=t,i){this.deferred=i,this.begin(n);var o=this;i.then(function(){o.done.bind(o)()},function(){o.done.bind(o)()})}},r.prototype.begin=function(e){this.status=e,this.statusService._beginProgressMonitor(this)},r.prototype.done=function(e){this.status=e,this.statusService._doneProgressMonitor(this)},r.prototype.worked=function(e){this.status=e,this.statusService._workedProgressMonitor(this)},r.prototype.constructor=r,{StatusReportingService:o,ProgressMonitor:r}}),define("orion/operations/nls/root/messages",{More:"More","No Matching OperationService for location:":"No Matching OperationService for location:","No operations services registered.":"No operations services registered.","could not find toolbar ":"could not find toolbar ","Remove Completed":"Remove Completed","Remove all completed operations":"Remove all completed operations",Remove:"Remove","Remove operations from the operations list.":"Remove operations from the operations list.",Cancel:"Cancel","Cancel operations from the operations list.":"Cancel operations from the operations list.","Operation resulted in a warning.":"Operation resulted in a warning.","Operation resulted in an error.":"Operation resulted in an error.","Operation is running.":"Operation is running.","Operation is canceled.":"Operation is canceled.","Operation failed.":"Operation failed.",Name:"Name",Actions:"Actions",Status:"Status",Scheduled:"Scheduled"}),define("orion/operations/nls/messages",["orion/i18n!orion/operations/nls/messages","orion/operations/nls/root/messages"],function(e,t){var i={root:t};return Object.keys(e).forEach(function(t){"undefined"==typeof i[t]&&(i[t]=e[t])}),i}),define("orion/webui/popupdialog",["i18n!orion/widgets/nls/messages","require","orion/webui/littlelib","orion/webui/tooltip"],function(e,t,i,n){function o(){}return o.prototype={_initialize:function(t,o,r,s,a){this._tooltip=new n.Tooltip({node:t,hideDelay:a||0,afterShowing:this._afterShowingFunction(o).bind(this),afterHiding:r,trigger:s?s:"click"}),this.$parent=this._tooltip.contentContainer(),this.$parent.role="dialog";var l=document.createRange();l.selectNode(this.$parent);var c=l.createContextualFragment(this.TEMPLATE);this.messages&&i.processTextNodes(c,e),this.$parent.appendChild(c);var d=this._tooltip;this.$parent.addEventListener("keydown",function(e){e.keyCode===i.KEY.ESCAPE&&d.hide()},!1),this._bindElements(this.$parent),"function"==typeof this._bindToDom&&this._bindToDom(this.$parent)},_bindElements:function(e){for(var t=0;t<e.childNodes.length;t++){var i=e.childNodes[t];i.id&&(this["$"+i.id]=i),this._bindElements(i)}},_afterShowingFunction:function(e){return function(){if(e&&e.bind(this)(),!this.customFocus){var t=i.firstTabbable(this.$parent);t&&t.focus()}}},hide:function(){this._tooltip.hide()},show:function(){this._tooltip.show()}},o.prototype.constructor=o,{PopupDialog:o}}),define("orion/operationsCommands",["i18n!orion/operations/nls/messages","require","orion/webui/littlelib","orion/commands"],function(e,t,i,n){var o={};return function(){var t=!1;o.updateNavTools=function(n,o,r,s,a,l){var c=o,d=i.node(s);if(!d)throw e["could not find toolbar "]+s;if(c.destroy(d),c.renderCommands(s,d,l,r,"button"),a){var h=i.node(a);h&&(c.destroy(h),c.renderCommands(a,h,null,r,"button"))}t||(t=!0,n.getService("orion.page.selection").addEventListener("selectionChanged",function(e){var t=i.node(a);t&&(c.destroy(t),c.renderCommands(a,t,e.selections,r,"button"))}))},o.createOperationsCommands=function(t,i,o){function r(e){return e.operation&&e.operation.type?"loadstart"===e.operation.type||"progress"===e.operation.type:!1}function s(e){return e.operation&&e.operation.cancelable?!0:!1}var a=new n.Command({name:e["Remove Completed"],tooltip:e["Remove all completed operations"],id:"eclipse.removeCompletedOperations",callback:function(){o.removeCompletedOperations().then(function(){i.loadOperations.bind(i)()})},visibleWhen:function(){return!0}});t.addCommand(a);var l=new n.Command({name:e.Remove,tooltip:e["Remove operations from the operations list."],imageClass:"core-sprite-delete",id:"eclipse.removeOperation",callback:function(e){for(var t=Array.isArray(e.items)?e.items:[e.items],n=0;n<t.length;n++){var r=t[n];o.removeOperation.bind(o)(r.Location).then(function(){i.loadOperations.bind(i)()},function(){i.loadOperations.bind(i)()})}},visibleWhen:function(e){if(!Array.isArray(e)||0===e.length)return!r(e);for(var t in e)if(r(e[t]))return!1;return!0}});t.addCommand(l);var c=new n.Command({name:e.Cancel,tooltip:e["Cancel operations from the operations list."],imageClass:"core-sprite-stop",id:"eclipse.cancelOperation",callback:function(e){for(var t=Array.isArray(e.items)?e.items:[e.items],i=0;i<t.length;i++){var n=t[i];n.deferred&&n.deferred.cancel()}},visibleWhen:function(e){if(!Array.isArray(e)||0===e.length)return r(e)&&s(e);for(var t in e)if(!r(e[t])||!s(e[t]))return!1;return!0}});t.addCommand(c)}}(),o}),define("orion/webui/dialogs/OperationsDialog",["i18n!orion/operations/nls/messages","require","orion/webui/littlelib","orion/webui/popupdialog","orion/operationsCommands"],function(e,t,i,n,o){function r(e){this._options=e}return r.prototype=new n.PopupDialog,r.prototype.TEMPLATE='<table style="width: 360px;"><tr><td><h2>Recent operations</h2></td><td style="text-align: right;"><a id="allOperationsLink" class="navlinkonpage">All Operations</a></td></tr></table><div id="operationsExist"><div style="padding-left: 7px" id="myOperationsListEmpty">No operations running on this page.</div><table id="myOperationsList" style="display: none;"></table></div><div style="padding-left: 7px" id="operationsDontExist">No operations running.</div>',r.prototype._init=function(e){this._myOperations=[],this._operationsDeferreds=[],this._commandService=e.commandRegistry,o.createOperationsCommands(this._commandService),this._commandService.registerCommandContribution("operationsDialogItems","eclipse.cancelOperation",1),this._initialize(e.triggerNode)},r.prototype._bindToDom=function(){this.$allOperationsLink.href=t.toUrl("operations/list.html"),this._setOperationsVisibility()},r.prototype.setOperations=function(e,t){if(this._myOperations||this._init(this._options),this._myOperations=[],this._operationsDeferreds=[],e)for(var i in e)this._myOperations.push(e[i]),this._operationsDeferreds.push(t[i]);this._renderOperations()},r.prototype.parseProgressResult=function(e){if(!e)return{};var t=e.responseText||e;try{t=JSON.parse(t)}catch(i){}var n={Message:t.Message||t,Severity:t.Severity};return t.DetailedMessage&&t.DetailedMessage!==n.Message&&(n.DetailedMessage=t.DetailedMessage),n},r.prototype._renderOperations=function(){this._renderOperationsTable(this.$myOperationsList,this._myOperations,this._operationsDeferreds)},r.prototype._renderOperationsTable=function(t,n,o){i.empty(t);for(var r=0;r<n.length;r++){var s=n[r],a=document.createElement("tr"),l=document.createElement("td");l.style.paddingLeft="5px",l.style.paddingRight="5px",l.textContent=s.Name,a.appendChild(l);var c=document.createElement("div");l.appendChild(c);var d=document.createElement("span");switch(d.style.paddingRight="5px",d.classList.add("imageSprite"),s.type){case"Warning":d.classList.add("core-sprite-warning"),d.setAttribute("aria-label",e["Operation resulted in a warning."]);break;case"error":d.classList.add("core-sprite-error"),d.setAttribute("aria-label",e["Operation resulted in an error."]);break;case"loadstart":case"progress":d.classList.add("core-sprite-start"),d.setAttribute("aria-label",e["Operation is running."]);break;case"abort":d.classList.add("core-sprite-stop"),d.setAttribute("aria-label",e["Operation is canceled."]);break;case"load":case"loadend":d.classList.add("core-sprite-ok"),d.setAttribute("aria-label","Operation ok.")}c.appendChild(d);var h=document.createElement("span");if(h.classList.add("operationStatus"),h.textContent=s.Name,c.appendChild(h),s.error){var u=s.error.Message||s.error;s.error.DetailedMessage&&""!==s.error.DetailedMessage&&(u+=": "+s.error.DetailedMessage),h.textContent=u,h.classList.remove("operationStatus"),h.classList.add("operationError")}this._commandService.renderCommands("operationsDialogItems",c,{operation:s,deferred:o[r]},this,"tool"),t.appendChild(a)}this._setOperationsVisibility()},r.prototype._setOperationsVisibility=function(){this.$myOperationsList.style.display=this._myOperations.length>0?"":"none",this.$myOperationsListEmpty.style.display=this._myOperations.length>0?"none":"",this.$operationsDontExist.style.display=this._myOperations.length>0?"none":"",this.$operationsExist.style.display=this._myOperations.length>0?"":"none"},r.prototype.constructor=r,{OperationsDialog:r}}),define("orion/progress",["i18n!orion/nls/messages","require","orion/Deferred","orion/webui/littlelib","orion/webui/dialogs/OperationsDialog"],function(e,t,i,n,o){function r(e,t){if(!this._progressPane){this._progressPane=n.node(e),this._operationsDialog=new o.OperationsDialog({triggerNode:this._progressPane,commandRegistry:t});var i=this;this._progressPane.addEventListener("keydown",function(e){(" "===e.charOrCode||e.keyCode===n.KEY.ENTER)&&i._operationsDialog.show()}),this._progressPane.addEventListener("click",function(){i._operationsDialog.show()}),this._operationsDialog.setOperations(null,null)}}function s(e,t,i,n){this._serviceRegistry=e,this._serviceRegistration=e.registerService("orion.page.progress",this),this._commandRegistry=i,this._operationsClient=t,this._operations={},this._operationDeferrds={},this._operationsIndex=0,this._lastOperation=null,this._lastIconClass=null,this._progressMonitorClass=n}return r.prototype={_switchIconTo:function(e){this._lastIconClass&&this._progressPane.classList.remove(this._lastIconClass),this._lastIconClass=e,this._progressPane.classList.add(this._lastIconClass)},generateOperationsInfo:function(t,i){var n={};for(var o in t)t[o].progressMonitor||(n[o]=t[o]);if(this._isEmpty(n))return this._switchIconTo("progressPane_empty"),this._progressPane.title=e.Operations,this._progressPane.alt=e.Operations,this._progressPane.hasAttribute("aria-valuetext")&&this._progressPane.removeAttribute("aria-valuetext"),void this._operationsDialog.setOperations(n,i);var r="";for(var o in n){var s=n[o];if(s.type&&("loadstart"===s.type||"progress"===s.type)){r="running";break}}switch(""===r&&null!=this._lastOperation&&this._lastOperation.type&&"error"===this._lastOperation.type,r){case"running":this._progressPane.title=e["Operations running"],this._progressPane.alt=e["Operations running"],this._progressPane.setAttribute("aria-valuetext",e["Operations running"]),this._switchIconTo("running");break;case"warning":this._progressPane.title=e["Some operations finished with warning"],this._progressPane.alt=e["Some operations finished with warning"],this._progressPane.setAttribute("aria-valuetext",e["Some operations finished with warning"]),this._switchIconTo("warning");break;case"error":this._progressPane.title=e["Some operations finished with error"],this._progressPane.alt=e["Some operations finished with error"],this._progressPane.setAttribute("aria-valuetext",e["Some operations finished with error"]),this._switchIconTo("error");break;default:this._progressPane.title=e.Operations,this._progressPane.alt=e.Operations,this._progressPane.hasAttribute("aria-valuetext")&&this._progressPane.removeAttribute("aria-valuetext"),this._switchIconTo("progressPane_empty")}this._operationsDialog.setOperations(n,i)},_isEmpty:function(e){for(var t in e)return!1;return!0}},r.prototype.constructor=r,s.prototype={init:function(e){this._progressMonitorClass||(this._progressMonitorTool=new r(e,this._commandRegistry))},progress:function(e,t,i){var n=this,o=this._operationsIndex++;return!i&&this._progressMonitorClass&&(i=new this._progressMonitorClass,i.begin(t)),e.then(function(){if(n._operations[o]){var r=n._operations[o];t&&(r.Name=t),n._lastOperation=r,r.type="loadend",i&&(r.progressMonitor=i),n.writeOperation.bind(n)(o,r,e),r.Location||n._removeOperationFromTheList.bind(n)(o)}},function(r){if(n._operations[o]){var s=n._operations[o];t&&(s.Name=t),i&&(s.progressMonitor=i),n._lastOperation=s,s.type=r.canceled?"abort":"error",s.error=r,n.writeOperation.bind(n)(o,s,e),s.Location||n._removeOperationFromTheList.bind(n)(o)}},function(r){t&&(r.Name=t),i&&(r.progressMonitor=i),n.writeOperation.bind(n)(o,r,e)}),e},removeOperation:function(e){var t=this;for(var i in this._operations)if(this._operations[i].Location&&this._operations[i].Location===e){this._removeOperationFromTheList(i);break}t._operationsClient.removeOperation.bind(t._operationsClient)(e)},_removeOperationFromTheList:function(e){var t=this._operations[e].progressMonitor;delete this._operations[e],delete this._operationDeferrds[e],t?t.done():this._progressMonitorTool.generateOperationsInfo(this._operations,this._operationDeferrds)},removeCompletedOperations:function(){for(var e in this._operations){var t=this._operations[e];if(t.type&&"loadstart"!==t.type&&"progress"!==t.type){var i=this._operations[e].progressMonitor;i&&i.done(),delete this._operations[e],delete this._operationDeferrds[e]}}this._progressMonitorTool.generateOperationsInfo(this._operations,this._operationDeferrds)},setProgressResult:function(e){this._serviceRegistry.getService("orion.page.message").setProgressResult(e)},showWhile:function(e,t,i){t&&this._serviceRegistry.getService("orion.page.message").setProgressMessage(t);var n=this;
return e.then(function(){n._serviceRegistry.getService("orion.page.message").setProgressMessage("")},function(e){return i?n._serviceRegistry.getService("orion.page.message").setProgressMessage(""):n.setProgressResult.bind(n)(e),e}),this.progress(e,t)},writeOperation:function(e,t,i){this._operations[e]=t,this._operationDeferrds[e]=i,t.Location&&this._serviceRegistry.getService("orion.core.preference").getPreferences("/operations").then(function(e){e.put(t.Location,{Name:t.Name,expires:t.expires})}),t.progressMonitor?t.progressMonitor.progress(t.Name):this._progressMonitorTool.generateOperationsInfo(this._operations,this._operationDeferrds)}},s.prototype.constructor=s,{ProgressService:s}}),define("orion/dialogs",[],function(){function e(e){this._serviceRegistry=e,this._serviceRegistration=e.registerService("orion.page.dialog",this)}return e.prototype={confirm:function(e,t){t(window.confirm(e))},openFiles:function(){}},e.prototype.constructor=e,{DialogService:e}}),define("orion/selection",["orion/EventTarget","orion/Deferred"],function(e){function t(t,i){i||(i="orion.page.selection"),this._serviceRegistry=t,e.attach(this),this._serviceRegistration=t.registerService(i,this),this._selections=null}return t.prototype={getSelection:function(e){var t=this._getSingleSelection();return"function"==typeof e&&e(t),t},getSelections:function(e){var t=Array.isArray(this._selections)?this._selections.slice():[];return"function"==typeof e&&e(t),t},_getSingleSelection:function(){return this._selections&&this._selections.length>0?this._selections[0]:null},setSelections:function(e){var t=this._selections;this._selections=Array.isArray(e)?e.length>0?e.slice():null:e?[e]:null,t!==this._selections&&this.dispatchEvent({type:"selectionChanged",selection:this._getSingleSelection(),selections:this._selections})}},t.prototype.constructor=t,{Selection:t}}),define("orion/operationsClient",["i18n!orion/operations/nls/messages","orion/Deferred"],function(e,t){function i(e,t,i){return e[t].apply(e,i)}function n(e){this._location=e}function o(){var i=new t;return i.reject(e["No Matching OperationService for location:"]+this._location),i}function r(e){this._services=[],this._patterns=[],this._operationListeners=[],this._currentLongpollingIds=[],this._preferenceService=e.getService("orion.core.preference");for(var t=e.getServiceReferences("orion.core.operation"),i=0;i<t.length;i++){var o=t[i],r=e.getService(o);this._services[i]=r;var s=t[i].getProperty("pattern")||".*";"^"!==s[0]&&(s="^"+s),this._patterns[i]=new RegExp(s)}this._getService=function(e){if(!e)return this._services[0];for(var t=0;t<this._patterns.length;++t)if(this._patterns[t].test(e))return this._services[t];return this._operations.remove(e),new n(e)}}return n.prototype={getOperation:o,getOperations:o,removeCompletedOperations:o,removeOperation:o,cancelOperation:o},n.prototype.constructor=n,r.prototype={getOperations:function(){var e=new t;if(this._operations)return e.resolve(this._operations),e;var i=this;return this._preferenceService.getPreferences("/operations").then(function(t){i._operations=t,e.resolve(i._operations)}),e},getOperation:function(e){return i(this._getService(e),"getOperation",arguments)},removeCompletedOperations:function(){for(var e=[],n=this,o=0;o<this._services.length;o++){var r=this._patterns[o],s=new t;e[o]=s.promise,i(this._services[o],"removeCompletedOperations").then(function(e){return function(t){Array.isArray(t)&&n.getOperations.bind(n)().then(function(i){for(var n=i.keys(),o=0;o<n.length;o++){var s=n[o];r.test(s)&&t.indexOf(s)<0&&i.remove(s)}e.resolve()})}}(s),function(e){return function(t){e.reject(t)}}(s))}return t.all(e)},removeOperation:function(e){var t=this;return i(this._getService(e),"removeOperation",arguments).then(function(){t.getOperations.bind(t)().then(function(t){t.remove(e)})},function(e){return e},function(e){return e})}},r.prototype.constructor=r,{OperationsClient:r}}),define("orion/search/nls/root/messages",{"Find:":"Find:","Find With":"Find With","ReplaceWith:":"ReplaceWith:","Replace With":"Replace With","Show all":"Show all","Wrap search":"Wrap search","Incremental search":"Incremental search","Whole Word":"Whole Word","Regular expression":"Regular expression","Find after replace":"Find after replace",Options:"Options","Find next match":"Find next match","Find previous match":"Find previous match",Next:"Next",Previous:"Previous",Replace:"Replace","Replace...":"Replace...","Replace All":"Replace All","Show Replace":"Show Replace","Hide Replace":"Hide Replace","Search ${0}":"Search ${0}","Type a keyword or wild card to search in ":"Type a keyword or wild card to search in ","Search failed.":"Search failed.","No matches found for ${0}":"No matches found for ${0}","Searching...":"Searching...","Resource has been changed by others.":"Resource has been changed by others.","Failed to write file.":"Failed to write file.",Results:"Results","Files ${0} of ${1} matching ${2}":"Files ${0} of ${1} matching ${2}","Replace ${0} with ${1} for files ${2} of ${3}":"Replace ${0} with ${1} for files ${2} of ${3}",Location:"Location","Click to compare":"Click to compare",'Search again in this folder with "${0}"':'Search again in this folder with "${0}"',"Files replaced":"Files replaced",Status:"Status","${0} out of ${1}  matches replaced.":"${0} out of ${1}  matches replaced.","Replace all matches with...":"Replace all matches with...","Apply Changes":"Apply Changes","Replace all selected matches":"Replace all selected matches","Hide Compare":"Hide Compare","Hide compare view of changes":"Hide compare view of changes","Show Compare":"Show Compare","Show compare view of changes":"Show compare view of changes","Show All":"Show All","Show all the results in one page":"Show all the results in one page","< Previous Page":"< Previous Page","Show previous page of search result":"Show previous page of search result","Next Page >":"Next Page >","Show next page of search result":"Show next page of search result","Next result":"Next result","Previous result":"Previous result","Expand all results":"Expand all results","Collapse all results":"Collapse all results","Writing files...":"Writing files...","Preparing preview...":"Preparing preview...","Replaced File (${0})":"Replaced File (${0})","Original File (${0})":"Original File (${0})","Sort by Name":"Sort by Name","Compare changes":"Compare changes","Search Results":"Search Results","Replace All Matches":"Replace All Matches","No matches":"No matches",Rename:"Rename","Save frequently used searches by clicking on the ${0} button above.":"Save frequently used searches by clicking on the ${0} button above.",Search:"Search","All types":"All types","File type":"File type","All ${0} files":"All ${0} files","${0} is already saved":"${0} is already saved","Type a search term":"Type a search term","Type a replace term":"Type a replace term","Case sensitive":"Case sensitive","File name":"File name","Path name":"Path name",Save:"Save","Type filter text":"Type filter text","Scope Search":"Scoped Search","Open in Search page for this directory":"Open the Search page for this folder.","${0}. Try your search again.":"${0}. Try your search again.","Click or use delete key to delete the search term":"Click or use delete key to delete the search term","${0} matches":"${0} matches","Regular expression is off. You can click here or use options to turn it on for replacement - e.g. when the option is on you can replace <td([\\s\\S]*?)</td> with <span$1</span>.":"Regular expression is off. You can click here or use options to turn it on for replacement - e.g. when the option is on you can replace <td([\\s\\S]*?)</td> with <span$1</span>.","Regular expression is on. You can click here or use options to turn it off - e.g. when the option is on you can replace <td([\\s\\S]*?)</td> with <span$1</span>.":"Regular expression is on. You can click here or use options to turn it off - e.g. when the option is on you can replace <td([\\s\\S]*?)</td> with <span$1</span>.",Scope:"Scope","Show previous search terms":"Show previous search terms","Show previous replace terms":"Show previous replace terms","Show replacement preview":"Show replacement preview","File name patterns (comma-separated)":"File name patterns (comma-separated)","(* = any string, ? = any character)":"(* = any string, ? = any character)","Choose a Folder":"Choose a Folder"}),define("orion/search/nls/messages",["orion/i18n!orion/search/nls/messages","orion/search/nls/root/messages"],function(e,t){var i={root:t};return Object.keys(e).forEach(function(t){"undefined"==typeof i[t]&&(i[t]=e[t])}),i}),define("orion/webui/treetable",["i18n!orion/nls/messages","orion/webui/littlelib"],function(e,t){function i(e){this._init(e)}return i.prototype={_init:function(i){var n=i.parent,o=this;if(n=t.node(n),!n)throw e["no parent"];if(!i.model)throw e["no tree model"];if(!i.renderer)throw e["no renderer"];this._parent=n,this._treeModel=i.model,this._onComplete=i.onComplete,this._renderer=i.renderer,this._showRoot=void 0===i.showRoot?!1:i.showRoot,this._indent=void 0===i.indent?16:i.indent,this._onCollapse=i.onCollapse,this._labelColumnIndex=void 0===i.labelColumnIndex?0:i.labelColumnIndex,this._id=void 0===i.id?"treetable":i.id,this._tableStyle=i.tableStyle,this._tableElement=i.tableElement||"table",this._tableBodyElement=i.tableBodyElement||"tbody",this._tableRowElement=i.tableRowElement||"tr",this._treeModel.getRoot(function(e){o._root=e,o._showRoot?(e._depth=0,o._generate([e],0)):o._treeModel.getChildren(e,function(e){o.destroyed||o._generate(e,0)})})},destroy:function(){this.destroyed=!0},_generate:function(e,i){t.empty(this._parent);var n=document.createElement("div");this._renderer.wrapperCallback&&this._renderer.wrapperCallback(n);var o=document.createElement(this._tableElement);this._renderer.tableCallback&&this._renderer.tableCallback(o),o.id=this._id,this._tableStyle&&o.classList.add(this._tableStyle),this._renderer.initTable(o,this),this._bodyElement=document.createElement(this._tableBodyElement),this._renderer.bodyCallback&&this._renderer.bodyCallback(this._bodyElement),this._bodyElement.id=this._id+"tbody",0===e.length?this._renderer.emptyCallback&&this._renderer.emptyCallback(this._bodyElement):this._generateChildren(e,i),o.appendChild(this._bodyElement),n.appendChild(o),this._parent.appendChild(n),this._rowsChanged(),this._onComplete&&this._onComplete(this)},_generateChildren:function(e,t,i){for(var n=0;n<e.length;n++){var o=document.createElement(this._tableRowElement);o.id=this._treeModel.getId(e[n]),o._depth=t,o._item=e[n],this._renderer.render(e[n],o);var r=this._indent*t;o.childNodes[Math.min(o.childNodes.length-1,this._labelColumnIndex)].style.paddingLeft=r+"px",this._renderer.rowCallback&&this._renderer.rowCallback(o,e[n]),i?(this._bodyElement.insertBefore(o,i.nextSibling),i&&(i=o)):this._bodyElement.appendChild(o)}},_rowsChanged:function(){this._renderer.rowsChanged&&this._renderer.rowsChanged()},getSelected:function(){return this._renderer.getSelected()},refresh:function(i,n,o){var r,s=this._treeModel.getId(i);if(s===this._id)this._removeChildRows(s),this._generateChildren(n,0),this._rowsChanged();else if(s===this._treeModel.getId(this._root)&&i.removeAll)this._removeAllRows(),this._generateChildren(n,0),this._rowsChanged();else{var a=t.node(s);a?(a._item=i,a&&(o||a._expanded)?(this._removeChildRows(s),n?(a._expanded=!0,this._renderer.updateExpandVisuals(a,!0),this._generateChildren(n,a._depth+1,a),this._rowsChanged()):(r=this,this._renderer.updateExpandVisuals(a,"progress"),n=this._treeModel.getChildren(a._item,function(e){r.destroyed||(r._renderer.updateExpandVisuals(a,!0),a._expanded||(a._expanded=!0,r._generateChildren(e,a._depth+1,a),r._rowsChanged()))}))):this._renderer.updateExpandVisuals(a,!1)):console.log(e["could not find table row "]+s)}},getItem:function(e){var i=t.node(e);return i&&i._item?i._item:e},toggle:function(e){var i=t.node(e);i&&(i._expanded?this.collapse(e):this.expand(e))},isExpanded:function(e){var i="string"==typeof e?e:this._treeModel.getId(e),n=t.node(i);return n?n._expanded:!1},expand:function(e,i,n){var o="string"==typeof e?e:this._treeModel.getId(e),r=t.node(o);if(r){var s=this;if(r._expanded)return void(i&&i.apply(s,n));this._renderer.updateExpandVisuals(r,"progress"),this._treeModel.getChildren(r._item,function(e){s.destroyed||(s._renderer.updateExpandVisuals(r,!0),r._expanded||(r._expanded=!0,s._generateChildren(e,r._depth+1,r),s._rowsChanged()),i&&i.apply(s,n))})}},_removeChildRows:function(e){for(var i=e===this._id,n=!1,o=-1,r=[],s=t.$$array(".treeTableRow",this._parent),a=0;a<s.length;a++){var l=s[a];if(n)break;i?l._depth>o?r.push(l):n=!0:l.id===e&&(i=!0,o=l._depth)}for(var c=0;c<r.length;c++){var d=r[c];d.parentNode.removeChild(d)}},_removeAllRows:function(){for(var e=t.$$array(".treeTableRow",this._parent),i=0;i<e.length;i++)e[i].parentNode.removeChild(e[i])},collapse:function(e){var i="string"==typeof e?e:this._treeModel.getId(e),n=t.node(i);if(n){if(!n._expanded)return;n._expanded=!1,this._renderer.updateExpandVisuals(n,!1),this._removeChildRows(i),this._rowsChanged()}this._onCollapse&&this._onCollapse(n._item)},getIndent:function(){return this._indent}},i.prototype.constructor=i,{TableTree:i}}),define("orion/treeModelIterator",[],function(){var e={};return e.TreeModelIterator=function(){function e(e,t){this.firstLevelChildren=e,this.reset(),this._init(t)}return e.prototype={_init:function(e){e&&(this.isExpanded=e.isExpanded,this.isExpandable=e.isExpandable,this.forceExpandFunc=e.forceExpandFunc,this.getChildrenFunc=e.getChildrenFunc)},topLevel:function(e){return e.parent?e.parent===this.root:!0},_getChildren:function(e){return"function"==typeof this.getChildrenFunc?this.getChildrenFunc(e):e?e.children:null},_expanded:function(e){if(!e)return!0;var t=this._getChildren(e),i=t&&t.length>0;return this.isExpanded&&i&&(i=this.isExpanded(e)),i},_expandable:function(e){return e?this.isExpandable?this.isExpandable(e):!1:!0},_diveIn:function(e){if(this._expanded(e)){var t=this._getChildren(e);return this.setCursor(t[0]),this.cursor()}return null},_drillToLast:function(e){if(this._expanded(e)){var t=this._getChildren(e);return this._drillToLast(t[t.length-1])}return e},_forward:function(e){if(!this._cursor)return null;var t=this._diveIn(this._cursor);if(!t){if(e&&this._expandable(this._cursor)&&this.forceExpandFunc){var i=this;return this.forceExpandFunc(this._cursor,"first",function(e){e&&i.setCursor(e)})}t=this._findSibling(this._cursor,!0),t&&this.setCursor(t)}return t},_backward:function(e){if(!this._cursor)return null;var t=this._findSibling(this._cursor,!1);if(t&&t!==this._cursor.parent&&(t=this._drillToLast(t)),e&&t&&this._expandable(t)&&this.forceExpandFunc&&t!==this._cursor.parent){var i=this;return this.forceExpandFunc(t,"last",function(e){e&&i.setCursor(e)})}return t&&this.setCursor(t),t},_findSibling:function(e,t){for(var i=this.topLevel(e),n=this._getChildren(e.parent),o=i?this.firstLevelChildren:n,r=0;r<o.length;r++)if(o[r]===e)return 0!==r||t?r===o.length-1&&t?i?null:this._findSibling(e.parent,t):t?o[r+1]:o[r-1]:i?null:e.parent;return null},_inParentChain:function(e,t){for(var i=e.parent;i;){if(i===t)return!0;i=i.parent}return!1},_getTopLevelParent:function(e){if(this.topLevel(e))return e;for(var t=e.parent;t;){if(this.topLevel(t))return t;t=t.parent}return null},_onCollapse:function(e){return this._expanded(e.parent)?e:this._onCollapse(e.parent)},_scan:function(e,t,i){this.setCursor(t);var n=[];for(n.push(t);;){if(!this.iterate(e))break;if(n.push(this.cursor()),i===this.cursor())return n}return n=[],null},setCursor:function(e){this._prevCursor=this._cursor,this._cursor=e},setTree:function(e){this.firstLevelChildren=e,this.firstLevelChildren.length>0&&(this.root=this.firstLevelChildren[0].parent)},scan:function(e,t){var i=this.cursor(),n=this._scan(!0,e,t);return n||(n=this._scan(!1,e,t)),this.setCursor(i),n},iterate:function(e,t){return e?this._forward(t):this._backward(t)},iterateOnTop:function(e,t){var i=this._findSibling(this._getTopLevelParent(this.cursor()),e);i?this.setCursor(i):t&&this.firstLevelChildren.length>0&&this.setCursor(e?this.firstLevelChildren[0]:this.firstLevelChildren[this.firstLevelChildren.length-1])},collapse:function(e){return this._cursor&&this._inParentChain(this._cursor,e)?(this.setCursor(e),this._cursor):null},reset:function(){this._cursor=null,this._prevCursor=null,this.root=null,this.firstLevelChildren.length>0&&(this._cursor=this.firstLevelChildren[0],this.root=this.firstLevelChildren[0].parent)},cursorMoved:function(){return this._cursor!==this._prevCursor},cursor:function(){return this._cursor},prevCursor:function(){return this._prevCursor}},e}(),e}),define("orion/explorers/explorerNavHandler",["orion/webui/littlelib","orion/treeModelIterator","orion/uiUtils"],function(e,t,i){var n={},o=navigator.userAgent,r=-1!==o.indexOf("iPad"),s=-1!==window.navigator.platform.indexOf("Mac");return n.ExplorerNavHandler=function(){function n(n,o,r){this.explorer=n,this.model=this.explorer.model,this._navDict=o,this._listeners=[],this._selections=[],this._currentColumn=0;var s=this._getEventListeningDiv();s.tabIndex=0,s.classList.add("selectionModelContainer");var a=this;this._modelIterator=new t.TreeModelIterator([],{isExpanded:this.isExpanded.bind(this),getChildrenFunc:r.getChildrenFunc,isExpandable:this.explorer.renderer.isExpandable?function(e){return a.explorer.renderer.isExpandable(e)}:function(e){return a.isExpandable(e)},forceExpandFunc:this.explorer.forceExpandFunc?function(e,t,i){return a.explorer.forceExpandFunc(e,t,i)}:void 0}),this._init(r),r&&r.setFocus===!1||s.focus();var l=function(t){return i.isFormElement(t.target)?!0:a.explorer.preventDefaultFunc&&a.explorer.preventDefaultFunc(t,a._modelIterator.cursor())?!0:t.keyCode===e.KEY.DOWN?a.onDownArrow(t):t.keyCode===e.KEY.UP?a.onUpArrow(t):t.keyCode===e.KEY.RIGHT?a.onRightArrow(t):t.keyCode===e.KEY.LEFT?a.onLeftArrow(t):t.keyCode===e.KEY.SPACE?a.onSpace(t):t.keyCode===e.KEY.ENTER?a.onEnter(t):void 0};s.addEventListener("keydown",l,!1),this._listeners.push({type:"keydown",listener:l});var c=function(){a.explorer.onFocus?a.explorer.onFocus(!1):a.toggleCursor(null,!1)};s.addEventListener("blur",c,!1),this._listeners.push({type:"blur",listener:c});var d=function(){a.explorer.onFocus?a.explorer.onFocus(!0):a.toggleCursor(null,!0)};s.addEventListener("focus",d,!1),this._listeners.push({type:"focus",listener:d}),this._parentDiv=s}return n.prototype={destroy:function(){this._parentDiv.classList.remove("selectionModelContainer"),this.removeListeners()},_init:function(e){this._linearGridMove=!1,e&&(this._selectionPolicy=e.selectionPolicy,this.gridClickSelectionPolicy=e.gridClickSelectionPolicy||"none",this.preventDefaultFunc=e.preventDefaultFunc,this.postDefaultFunc=e.postDefaultFunc)},_ctrlKeyOn:function(e){return s?e.metaKey:e.ctrlKey},removeListeners:function(){if(this._listeners)for(var e=0;e<this._listeners.length;e++)this._parentDiv.removeEventListener(this._listeners[e].type,this._listeners[e].listener,!1)},focus:function(){var e=this._getEventListeningDiv();e&&e.focus()},_getEventListeningDiv:function(t){return this.explorer.keyEventListeningDiv&&"function"==typeof this.explorer.keyEventListeningDiv?this.explorer.keyEventListeningDiv(t):e.node(this.explorer._parentId)},isExpandable:function(t){if(!t)return!1;var i=e.node(this.explorer.renderer.expandCollapseImageId(this.model.getId(t)));return i?!0:!1},isExpanded:function(e){return e?this.explorer.myTree.isExpanded(this.model.getId(e)):!1},refreshSelection:function(e,t){var i=this;this.explorer.selection&&this.explorer.selection.getSelections(function(n){i._clearSelection(t);for(var o=0;o<n.length;o++)i._selections.push(n[o]);i._selections.length>0?i.cursorOn(i._selections[0],!0,!1,e):i.cursorOn(null,!1,!1,e),i._shiftSelectionAnchor&&i._inSelection(i._shiftSelectionAnchor)>=0||(i._shiftSelectionAnchor=null)})},refreshModel:function(e,t,i,n){this._currentColumn=0,this.topIterationNodes=[],this.model=t,this._navDict=e,this.model.getTopIterationNodes?this.topIterationNodes=this.model.getTopIterationNodes():i&&(this.topIterationNodes=i),this._modelIterator.setTree(this.topIterationNodes),!n&&this.explorer.selection&&(this.toggleCursor(this._modelIterator.cursor(),!1),this._modelIterator.reset()),this.refreshSelection(!0)},getTopLevelNodes:function(){return this._modelIterator.firstLevelChildren},_inSelection:function(e){for(var t=this.model.getId(e),i=0;i<this._selections.length;i++)if(t===this.model.getId(this._selections[i]))return i;return-1},_clearSelection:function(e){if(e)for(var t=0;t<this._selections.length;t++)this._checkRow(this._selections[t],!0);this._selections=[]},getSelectionPolicy:function(){return this._selectionPolicy},setSelectionPolicy:function(e){this._selectionPolicy!==e&&(("readonlySelection"===this._selectionPolicy||"readonlySelection"===e)&&this._toggleSelectionClass("disabledRow","readonlySelection"===e),this._selectionPolicy=e,"cursorOnly"===this._selectionPolicy&&this._clearSelection(!0))},setSelection:function(e,t,i){if("readonlySelection"!==this._selectionPolicy){if("cursorOnly"===this._selectionPolicy)return void(t&&this.explorer.renderer._useCheckboxSelection&&this._checkRow(e,!0));if(this._isRowSelectable(e)){if(t&&"singleSelection"!==this._selectionPolicy){var n=this._inSelection(e);n>=0?(this._checkRow(e,!0),this._selections.splice(n,1)):(this._checkRow(e,!1),this._selections.push(e),this._lastSelection=e)}else this._clearSelection(!0),this._checkRow(e,!1),this._selections.push(e),this._lastSelection=e;i&&(this._shiftSelectionAnchor=this._lastSelection),this.explorer.selection&&(this.explorer.renderer.storeSelections(),this.explorer.selection.setSelections(this._selections))}}},moveColumn:function(e,t){e||(e=this.currentModel());var i=this._getGridChildren(e);if(i&&i.length>1||0===t&&i){0!==t&&this.toggleCursor(e,!1);var n=this._currentColumn,o=!0;return n+=t,0>n?(this._linearGridMove&&0!==t&&(this._modelIterator.iterate(!1)?e=this.currentModel():o=!1),n=o?i.length-1:this._currentColumn):n>=i.length&&(this._linearGridMove&&0!==t&&(this._modelIterator.iterate(!0)?e=this.currentModel():o=!1),n=o?0:this._currentColumn),this._currentColumn=n,0!==t&&this.toggleCursor(e,!0),!0}return!1},_getGridChildren:function(e){return this._navDict?this._navDict.getGridNavHolder(e):null},getCurrentGrid:function(e){e||(e=this.currentModel());var t=this._getGridChildren(e);return t&&t.length>0?t[this._currentColumn]:null},getAriaContainerElement:function(e){for(var t,i=this._parentDiv;e&&e!==i&&"grid"!==(t=e.getAttribute("role"))&&"tree"!==t&&"treegrid"!==t;)e=e.parentNode;return e===i?null:e},toggleCursor:function(e,t){var i=this.getRowDiv(e),n=this.getCurrentGrid(e);if(n){if(i&&(t?i.classList.add("treeIterationCursorRow"):i.classList.remove("treeIterationCursorRow")),n.domNode){var o=this.getAriaContainerElement(n.domNode);if(t){if(n.domNode.classList.add("treeIterationCursor"),o){var r=n.domNode.id;o.setAttribute("aria-activedescendant",r)}}else n.domNode.classList.remove("treeIterationCursor")}}else i&&(t?i.classList.add("treeIterationCursorRow_Dotted"):i.classList.remove("treeIterationCursorRow_Dotted"))},currentModel:function(){return this._modelIterator.cursor()},cursorOn:function(e,t,i,n){var o,r;if(e||t){if(r===this._modelIterator.cursor())return;o=this._modelIterator.cursor(),r=e,this._modelIterator.setCursor(r)}else o=this._modelIterator.prevCursor(),r=this._modelIterator.cursor();if((o!==r||t)&&(this.toggleCursor(o,!1),!t||r)){this.moveColumn(null,0),this.toggleCursor(r,!0);var s=this.getRowDiv();if(s&&!n){for(var a=s.parentNode,l=document.documentElement;a&&a!==l;){var c=window.getComputedStyle(a,null);if(!c)break;var d=c.getPropertyValue("overflow-y");if("auto"===d||"scroll"===d)break;a=a.parentNode}if(a){var h=!0;s.offsetTop<=a.scrollTop?(h=!1,void 0===i&&(i=!1)):s.offsetTop+s.offsetHeight>=a.scrollTop+a.clientHeight&&(h=!1,void 0===i&&(i=!0)),h||s.scrollIntoView(!i)}}this.explorer.onCursorChanged&&this.explorer.onCursorChanged(o,r)}},getSelection:function(){return this._selections},getSelectionIds:function(){for(var e=[],t=0;t<this._selections.length;t++)e.push(this.model.getId(this._selections[t]));return e},getRowDiv:function(t){var i=t?t:this._modelIterator.cursor();if(!i)return null;var n=this.model.getId(i),o=this._navDict.getValue(n);return o&&o.rowDomNode?o.rowDomNode:e.node(n)},iterate:function(e,t,i,n){var o=null;if(this.topIterationNodes&&0!==this.topIterationNodes.length)if(n){var r=this.currentModel();for(o=this._modelIterator.iterate(e,t),o&&this._setCursorOnItem(e,i);o&&o.isNotSelectable;)o=this._modelIterator.iterate(e,t),o&&this._setCursorOnItem(e,i);o||(this.cursorOn(r,!0,!1,!0),this._setCursorOnItem(e,i))}else o=this._modelIterator.iterate(e,t),o&&this._setCursorOnItem(e,i)},_toggleSelectionClass:function(e,t){this._selections.forEach(function(i){var n=this.getRowDiv(i);n&&(t?n.classList.add(e):n.classList.remove(e))}.bind(this))},_setCursorOnItem:function(e,t){if(this.cursorOn(null,!1,e),t){var i=this._inSelection(this._modelIterator.prevCursor()),n=this._inSelection(this._modelIterator.cursor());i>=0&&n>=0?this.setSelection(this._modelIterator.prevCursor(),!0):this.setSelection(this.currentModel(),!0)}},_checkRow:function(t,i){if(this.explorer.renderer._useCheckboxSelection&&"singleSelection"!==this._selectionPolicy){var n=this.getRowDiv(t);if(!n)return;var o=e.node(this.explorer.renderer.getCheckBoxId(n.id)),r=i?!o.checked:!0;r!==o.checked&&this.explorer.renderer.onCheck(n,o,r,!0)}else this._select(t,i)},_select:function(e){e||(e=this._modelIterator.cursor());var t=this.getRowDiv(e);t&&(this._inSelection(e)<0?t.classList.add("checkedRow"):t.classList.remove("checkedRow"))},_onModelGrid:function(e,t){var i=this._getGridChildren(e);if(i)for(var n=0;n<i.length;n++)if(t.target===i[n].domNode)return!0;return!1},onClick:function(t,i){if("readonlySelection"===this._selectionPolicy||this.isDisabled(this.getRowDiv(t)))e.stop(i);else{var n=e.node(this.explorer.renderer.expandCollapseImageId(this.model.getId(t)));if(i.target===n)return;if("none"===this.gridClickSelectionPolicy&&this._onModelGrid(t,i))return;if(this.cursorOn(t,!0,!1,!0),r)this.setSelection(t,!0);else if(this._ctrlKeyOn(i))this.setSelection(t,!0,!0);else if(i.shiftKey&&this._shiftSelectionAnchor){var o=this._modelIterator.scan(this._shiftSelectionAnchor,t);if(o){this._clearSelection(!0);for(var s=0;s<o.length;s++)this.setSelection(o[s],!0)}}else this.setSelection(t,!1,!0)}},onCollapse:function(e){this._modelIterator.collapse(e)&&this.cursorOn()},onUpArrow:function(e){return this.iterate(!1,!1,e.shiftKey,!0),this._ctrlKeyOn(e)||e.shiftKey||this.setSelection(this.currentModel(),!1,!0),e.preventDefault(),!1},onDownArrow:function(e){return this.iterate(!0,!1,e.shiftKey,!0),this._ctrlKeyOn(e)||e.shiftKey||this.setSelection(this.currentModel(),!1,!0),e.preventDefault(),!1},_shouldMoveColumn:function(e){var t=this.currentModel(),i=this._getGridChildren(t);return i&&i.length>1?this.isExpandable(t)?this._ctrlKeyOn(e):!0:!1},onLeftArrow:function(e){if(this._shouldMoveColumn(e))return this.moveColumn(null,-1),e.preventDefault(),!0;var t=this._modelIterator.cursor();return t?this.isExpandable(t)&&this.isExpanded(t)?(this.explorer.myTree.collapse(t),e.preventDefault(),!0):void(this._modelIterator.topLevel(t)?this.explorer.scopeUp&&"function"==typeof this.explorer.scopeUp&&this.explorer.scopeUp():(this.cursorOn(t.parent),this.setSelection(t.parent,!1,!0))):!1},onRightArrow:function(e){if(this._shouldMoveColumn(e))return this.moveColumn(null,1),e.preventDefault(),!0;var t=this._modelIterator.cursor();return t?this.isExpandable(t)&&!this.isExpanded(t)?(this.explorer.myTree.expand(t),this.explorer.postUserExpand&&this.explorer.postUserExpand(this.model.getId(t)),e.preventDefault(),!1):void 0:!1},_isRowSelectable:function(e){return this.explorer.isRowSelectable?this.explorer.isRowSelectable(e):!0},onSpace:function(e){this.setSelection(this.currentModel(),!0,!0),e.preventDefault()},onEnter:function(e){var t=this.getCurrentGrid(this._modelIterator.cursor());if(t)if(t.widget)"function"==typeof t.onClick?t.onClick():"function"==typeof t.widget.focus&&t.widget.focus();else{var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,0,0,this._ctrlKeyOn(e),!1,!1,!1,0,null),t.domNode.dispatchEvent(i)}else{var n=this._modelIterator.cursor();if(n){if(this.explorer.renderer.getRowActionElement){var o=this.explorer.renderer.getRowActionElement(this.model.getId(n));o.href&&(this._ctrlKeyOn(e)?window.open(o.href):window.location.href=o.href)}return this.explorer.renderer.performRowAction?(this.explorer.renderer.performRowAction(e,n),e.preventDefault(),!1):void 0}}},setIsNotSelectable:function(e,t){e.isNotSelectable=t},disableItem:function(e){var t=this.getRowDiv(e);this.isExpandable(e)&&this.isExpanded(e)&&(this._modelIterator.collapse(e),this.explorer.myTree.toggle(t.id)),t.classList.remove("checkedRow"),t.classList.add("disabledNavRow"),this.setIsNotSelectable(e,!0)},isDisabled:function(e){return e.classList.contains("disabledNavRow")},enableItem:function(e){var t=this.getRowDiv(e);t&&(t.classList.remove("disabledNavRow"),this.setIsNotSelectable(e,!1))}},n}(),n.ExplorerNavDict=function(){function e(e){this._dict={},this._model=e}return e.prototype={addRow:function(e,t){var i=this._model.getId(e);this._dict[i]={model:e,rowDomNode:t}},getValue:function(e){return this._dict[e]},getGridNavHolder:function(e,t){if(!e)return null;var i=this._model.getId(e);return this._dict[i]?(!this._dict[i].gridChildren&&t&&(this._dict[i].gridChildren=[]),this._dict[i].gridChildren):null},initGridNavHolder:function(e){if(!e)return null;var t=this._model.getId(e);this._dict[t]&&(this._dict[t].gridChildren=null)}},e}(),n}),define("orion/explorers/explorer",["i18n!orion/nls/messages","require","orion/webui/littlelib","orion/webui/treetable","orion/explorers/explorerNavHandler","orion/commands"],function(e,t,i,n,o,r){var s={};return s.Explorer=function(){function e(e,t,i,n){this.registry=e,this.renderer=i,this.selection=t,this.commandService=n,this.renderer&&(this.renderer.explorer=this),this.myTree=null}return e.prototype={destroy:function(){this._navHandler&&this._navHandler.destroy(),this.model&&this.model.destroy(),this.myTree&&this.myTree.destroy(),this.destroyed=!0},changedItem:function(e,t){this.myTree&&this.myTree.refresh.bind(this.myTree)(e,t,!0)},updateCommands:function(e){this.myTree&&this.myTree._renderer.updateCommands.bind(this.myTree._renderer)(e)},makeNewItemPlaceholder:function(e,t,i){var n=null,o=this.getRow(e);if(o){var r=o.parentNode,s=document.createElement("tr");s.id=t+"placeHolderRow",s.classList.add("navRow");var a=document.createElement("td");if(a.id=t+"placeHolderCol",a.classList.add("navColumn"),s.appendChild(a),i){var l=o.nextSibling;r.insertBefore(s,l)}else r.insertBefore(s,o);a.style.paddingLeft=o.firstChild.style.paddingLeft,n={wrapperNode:s,refNode:a,destroyFunction:function(){try{s&&s.parentNode&&s.parentNode.removeChild(s)}catch(e){}}}}return n},getRow:function(e){var t=this.model.getId(e);return t?i.node(t):void 0},collapseAll:function(){for(var e=this._navHandler.getTopLevelNodes(),t=0;t<e.length;t++)this.myTree.collapse(e[t])},expandAll:function(e){if(e)this._expandRecursively(e);else{if(!this._navHandler)return;for(var t=this._navHandler.getTopLevelNodes(),i=0;i<t.length;i++)this._expandRecursively(t[i])}},_expandRecursively:function(e){if(this._navHandler&&this._navHandler.isExpandable(e)){var t=this;this.myTree.expand(e,function(){t.model.getChildren(e,function(e){if(void 0!==e&&null!==e)for(var i=e.length,n=0;i>n;n++)t._expandRecursively(e[n])})})}},createTree:function(e,t,r){e="string"==typeof e?e:e.id||e,this.selection&&this.selection.setSelections([]),this.getNavHandler()&&this.getNavHandler()._clearSelection();var s=e+"innerTree",a=i.node(s);a&&i.empty(a),t&&(t.rootId=s),this.model=t,this._parentId=e,this._treeOptions=r;var l=!r||r&&!r.noSelection;l&&(this.selectionPolicy=r?r.selectionPolicy:"",this._navDict=new o.ExplorerNavDict(this.model)),this.myTree=new n.TableTree({id:s,model:t,parent:e,onComplete:r?r.onComplete:void 0,labelColumnIndex:this.renderer.getLabelColumnIndex(),renderer:this.renderer,showRoot:r?!!r.showRoot:!1,indent:r?r.indent:void 0,onCollapse:r?r.onCollapse:void 0,navHandlerFactory:r?r.navHandlerFactory:void 0,tableElement:r?r.tableElement:void 0,tableBodyElement:r?r.tableBodyElement:void 0,tableRowElement:r?r.tableRowElement:void 0}),this.renderer._initializeUIState(),"cursorOnly"===this.selectionPolicy&&this.initNavHandler()
},getNavHandler:function(){return this._navHandler},getNavDict:function(){return this._navDict},refreshSelection:function(){if(this.selection){var e=this.getNavHandler(),t=[];if(e&&this.getNavDict())for(var i=e.getSelection(),n=0;n<i.length;n++){var o=e.getRowDiv(i[n]);if(o&&o.parentNode){var r=this.getNavDict().getValue(this.model.getId(i[n]));r.model&&t.push(r.model)}}this.selection.setSelections(t)}},getRootPath:function(){return this.model&&this.model.root?this.model.root.Location:null},initNavHandler:function(){var e=this._treeOptions,t=!e||e&&!e.noSelection;if(t){if(!this.getNavHandler())if(e&&e.navHandlerFactory&&"function"==typeof e.navHandlerFactory.createNavHandler)this._navHandler=e.navHandlerFactory.createNavHandler(this,this._navDict,e);else{var i=e?e.getChildrenFunc:null;this._navHandler=new o.ExplorerNavHandler(this,this._navDict,{getChildrenFunc:i,setFocus:e&&e.setFocus,selectionPolicy:e?e.selectionPolicy:null})}var n=this;this.model.getRoot(function(t){t instanceof Array?n.getNavHandler().refreshModel(n.getNavDict(),n.model,t):t.children&&t.children instanceof Array&&n.getNavHandler().refreshModel(n.getNavDict(),n.model,t.children),e&&e.setFocus&&n.getNavHandler().cursorOn(null,!1,!1,!0)})}},_lastHash:null,checkbox:!1},e}(),s.createExplorerCommands=function(t,i){function n(e){return"function"==typeof e.getItemCount&&e.getItemCount()>0?i?i(e):!0:!1}var o=new r.Command({tooltip:e["Expand all"],imageClass:"core-sprite-expandAll",id:"orion.explorer.expandAll",groupId:"orion.explorerGroup",visibleWhen:function(e){return n(e)},callback:function(e){e.items.expandAll()}}),s=new r.Command({tooltip:e["Collapse all"],imageClass:"core-sprite-collapseAll",id:"orion.explorer.collapseAll",groupId:"orion.explorerGroup",visibleWhen:function(e){return n(e)},callback:function(e){e.items.collapseAll()}});t.addCommand(o),t.addCommand(s)},s.ExplorerModel=function(){function e(e,t,i){this.rootPath=e,this.fetchItems=t,this.idPrefix=i||""}return e.prototype={destroy:function(){this.destroyed=!0},getRoot:function(e){var t=this;this.fetchItems(this.rootPath).then(function(i){t.root=i,e(i)})},getChildren:function(e,t){e.Children?t(e.Children):e.ChildrenLocation?this.fetchItems(e.ChildrenLocation).then(function(i){e.Children=i,t(i)}):t([])},getId:function(e){if(e.Location===this.root.Location)return this.rootId;for(var t=e.Location.replace(/[\\\/]/g,""),i=this.idPrefix,n=0;n<t.length;n++)i+=t[n].match(/[^\.\:\-\_0-9A-Za-z]/g)?t.charCodeAt(n):t[n];return i}},e}(),s.ExplorerFlatModel=function(){function e(e,t,i){this.rootPath=e,this.fetchItems=t,this.root=i}return e.prototype=new s.ExplorerModel,e.prototype.getRoot=function(e){if(this.root)e(this.root);else{var t=this;this.fetchItems(this.rootPath).then(function(i){t.root=i,e(i)})}},e.prototype.getChildren=function(e,t){t(e===this.root?this.root:[])},e}(),s.ExplorerRenderer=function(){function e(e,t){this.explorer=t,this._init(e),this._expandImageClass="core-sprite-openarrow",this._collapseImageClass="core-sprite-closedarrow",this._progressImageClass="core-sprite-progress",this._twistieSpriteClass="modelDecorationSprite"}return e.prototype={_init:function(e){e&&(this._useCheckboxSelection=void 0===e.checkbox?!1:e.checkbox,this.selectionPolicy=e.singleSelection?"singleSelection":"",this._cachePrefix=e.cachePrefix,e.getCheckedFunc&&(this.getCheckedFunc=e.getCheckedFunc),e.onCheckedFunc&&(this.onCheckedFunc=e.onCheckedFunc),this._noRowHighlighting=e.noRowHighlighting,this._highlightSelection=!0,this._treeTableClass=e.treeTableClass||"treetable",e.highlightSelection===!1&&(this._highlightSelection=!1),this.actionScopeId||(this.actionScopeId=e.actionScopeId),this.commandService||(this.commandService=e.commandService))},getLabelColumnIndex:function(){return this.explorer.checkbox?1:0},initTable:function(e,t){this.tableTree=t,this.tableNode=e,i.empty(e),this._treeTableClass&&e.classList.add(this._treeTableClass),this.renderTableHeader(e)},getActionsColumn:function(e,t,i,n,o){i=i||"tool";var r=document.createElement("td");return r.id=t.id+"actionswrapper",n&&r.classList.add(n),this.actionScopeId&&this.commandService?this.commandService.renderCommands(this.actionScopeId,r,e,this.explorer,i,null,o&&this.explorer.getNavDict()?this.explorer.getNavDict().getGridNavHolder(e,!0):null):window.console.log("Warning, no command service or action scope was specified.  No commands rendered."),r},initCheckboxColumn:function(){if(this._useCheckboxSelection){var e=document.createElement("th");return e}},getCheckboxColumn:function(e,t){if(this._useCheckboxSelection){var i=document.createElement("td"),n=document.createElement("span");n.id=this.getCheckBoxId(t.id),n.classList.add("core-sprite-check"),n.classList.add("selectionCheckmarkSprite"),n.rowId=t.id,this.getCheckedFunc&&(n.checked=this.getCheckedFunc(e),n.checked?(this._highlightSelection&&t.classList.add("checkedRow"),n.classList.add("core-sprite-check_on")):(this._highlightSelection&&t.classList.remove("checkedRow"),n.classList.remove("core-sprite-check_on"))),i.appendChild(n);var o=this;return n.addEventListener("click",function(i){var n=i.target.checked?!1:!0;o.onCheck(t,i.target,n,!0,!1,e)},!1),i}},getCheckBoxId:function(e){return e+"selectedState"},onCheck:function(e,t,i,n,o,r){t.checked=i,i?t.classList.add("core-sprite-check_on"):t.classList.remove("core-sprite-check_on"),this.onCheckedFunc&&this.onCheckedFunc(t.rowId,i,n,r),this.explorer.getNavHandler()&&o&&this.explorer.getNavHandler().setSelection(this.explorer.getNavDict().getValue(e.id).model,!0)},storeSelections:function(){if(this.explorer.getNavHandler()){var e=this.explorer.getNavHandler().getSelectionIds(),t=this._getUIStatePreferencePath();t&&window.sessionStorage&&(window.sessionStorage[t+"selection"]=JSON.stringify(e))}},_restoreSelections:function(e){var t=this.explorer.getNavDict(),n=this.explorer.getNavHandler();if(n&&t&&"cursorOnly"!==n.getSelectionPolicy()){var o=window.sessionStorage[e+"selection"];"string"==typeof o&&(o=o.length>0?JSON.parse(o):null);var r;if(o){var s=[];for(r=0;r<o.length;r++){var a=t.getValue(o[r]);if(a&&a.rowDomNode&&a.model){s.push(a.model),this._highlightSelection&&a.rowDomNode.classList.add("checkedRow");var l=i.node(this.getCheckBoxId(a.rowDomNode.id));l&&(l.checked=!0,l.classList.add("core-sprite-check_on"))}}this.explorer.selection&&(this.explorer.selection.setSelections(s),this.explorer.getNavHandler()&&this.explorer.getNavHandler().refreshSelection())}}},_storeExpansions:function(e){window.sessionStorage[e+"expanded"]=JSON.stringify(this._expanded)},_restoreExpansions:function(e){var t=!1,n=window.sessionStorage[e+"expanded"];"string"==typeof n&&(n=n.length>0?JSON.parse(n):null);var o;if(n)for(o=0;o<n.length;o++){var r=i.node(n[o]);if(r){this._expanded.push(n[o]);var s=this;this.tableTree.expand(n[o],function(){s._restoreSelections(e)}),t=!0}}return!t},_getUIStatePreferencePath:function(){if(this.explorer){var e=this.explorer.getRootPath();if(this._cachePrefix&&e){var t=e.replace(/[^\.\:\-\_0-9A-Za-z]/g,"");return"/"+this._cachePrefix+"/"+t+"/uiState"}}return null},expandCollapseImageId:function(e){return e+"__expand"},updateExpandVisuals:function(e,t){var n=i.node(this.expandCollapseImageId(e.id));n&&(n.classList.remove(this._expandImageClass),n.classList.remove(this._collapseImageClass),n.classList.remove(this._progressImageClass),n.classList.add("progress"===t?this._progressImageClass:t?this._expandImageClass:this._collapseImageClass))},getExpandImage:function(e,t,i,n){var o=document.createElement("span");if(o.id=this.expandCollapseImageId(e.id),t.appendChild(o),o.classList.add(this._twistieSpriteClass),o.classList.add(this._collapseImageClass),i){var r=document.createElement("span");t.appendChild(r),r.classList.add(n||"imageSprite"),r.classList.add(i)}var s=this;return o.onclick=function(){if(!s.explorer.getNavHandler().isDisabled(e)){s.tableTree.toggle(e.id);var t=s.tableTree.isExpanded(e.id);if(t)s._expanded.push(e.id),s.explorer.postUserExpand&&s.explorer.postUserExpand(e.id);else for(var i in s._expanded)if(s._expanded[i]===e.id){s._expanded.splice(i,1);break}var n=s._getUIStatePreferencePath();n&&window.sessionStorage&&s._storeExpansions(n)}},o},render:function(e,t){t.classList.add("navRow"),this.renderRow(e,t)},rowsChanged:function(){if("cursorOnly"!==this.explorer.selectionPolicy&&(this.explorer.refreshSelection(),this.explorer.initNavHandler()),!this._noRowHighlighting){var e="darkSectionTreeTableRow",t="lightSectionTreeTableRow";(i.$(".sectionTreeTable",this.tableNode.parentNode)||i.$(".treetable",this.tableNode.parentNode))&&i.$$array(".treeTableRow",this.tableNode).forEach(function(i,n){var o=n%2?e:t,r=o===t?e:t;i.classList.add(o),i.classList.remove(r)})}},updateCommands:function(){if(this.commandService)for(var e=i.$$array(".treeTableRow"),t=0;t<e.length;t++){var n=e[t],o=n.id+"actionswrapper",r=i.node(o);this.commandService.destroy(r),this.actionScopeId&&this.commandService.renderCommands(this.actionScopeId,r,n._item,this.explorer,"tool")}},_initializeUIState:function(){this._expanded=[];var e=this._getUIStatePreferencePath();e&&window.sessionStorage&&this._restoreExpansions(e)&&this._restoreSelections(e)}},e}(),s.SelectionRenderer=function(){function e(e,t){this._init(e),this.explorer=t}return e.prototype=new s.ExplorerRenderer,e.prototype.renderTableHeader=function(e){var t=document.createElement("thead"),i=document.createElement("tr");t.classList.add("navTableHeading"),this._useCheckboxSelection&&i.appendChild(this.initCheckboxColumn(e));for(var n=0,o=this.getCellHeaderElement(n);o;)o.innerHTML.length>0&&o.classList.add("navColumn"),i.appendChild(o),o=this.getCellHeaderElement(++n);t.appendChild(i),n>0&&e.appendChild(t)},e.prototype.renderRow=function(e,t){if(t.verticalAlign="baseline",t.classList.add("treeTableRow"),void 0===e.selectable||e.selectable){var i=this.explorer.getNavDict();if(i){"cursorOnly"!==this.explorer.selectionPolicy&&t.classList.add("selectableNavRow"),i.addRow(e,t);var n=this;t.addEventListener("click",function(t){n.explorer.getNavHandler()&&n.explorer.getNavHandler().onClick(e,t)},!1)}var o=this.getCheckboxColumn(e,t);o&&(o.classList.add("checkColumn"),t.appendChild(o))}for(var r=0,s=this.getCellElement(r,e,t);s;)t.appendChild(s),s.classList.add(0===r?this.getPrimColumnStyle?this.getPrimColumnStyle(e):"navColumn":this.getSecondaryColumnStyle?this.getSecondaryColumnStyle():"secondaryColumn"),s=this.getCellElement(++r,e,t)},e.prototype.getCellHeaderElement=function(){},e.prototype.getCellElement=function(){},e}(),s.SimpleFlatModel=function(){function e(e,t,i){this.items=e,this.getKey=i,this.idPrefix=t,this.root={children:e}}return e.prototype=new s.ExplorerModel,e.prototype.getRoot=function(e){e(this.root)},e.prototype.getId=function(e){for(var t=this.getKey(e),i=t.replace(/[\\\/]/g,""),n="",o=0;o<i.length;o++)n+=i[o].match(/[^\.\:\-\_0-9A-Za-z]/g)?i.charCodeAt(o):i[o];return this.idPrefix+n},e.prototype.getChildren=function(e,t){t(e===this.root?this.items:[])},e}(),s}),define("orion/widgets/browse/commitInfoRenderer",["orion/objects","orion/URITemplate","orion/webui/littlelib","orion/xhr","orion/URL-shim"],function(e,t,i,n){function o(e){var t=new Date,i=new Date(e),n=t.getTime()-i.getTime(),o=Math.floor(n/1e3/60/60/24/365);n-=1e3*o*60*60*24*365;var r=Math.floor(n/1e3/60/60/24/30);n-=1e3*r*60*60*24*30;var s=Math.floor(n/1e3/60/60/24);n-=1e3*s*60*60*24;var a=Math.floor(n/1e3/60/60);n-=1e3*a*60*60;var l=Math.floor(n/1e3/60);n-=1e3*l*60;var c=Math.floor(n/1e3);return{year:o,month:r,day:s,hour:a,minute:l,second:c}}function r(e,t,i){return e>0?1===e?t+" ":e+" "+i+" ":""}function s(e){var t=o(e),i=r(t.year,"a year","years"),n=r(t.month,"a month","months"),s=r(t.day,"a day","days"),a=r(t.hour,"an hour","hours"),l=r(t.minute,"a minute","minutes"),c="";return i?c=t.year>0?i:i+n:n?c=t.month>0?n:n+s:s?c=t.day>0?s:s+a:a?c=t.hour>0?a:a+l:l&&(c=l),c?c+"ago":"Just now"}function a(e){this._parentDomNode=i.node(e.parent),this._commitInfo=e.commitInfo}return e.mixin(a.prototype,{destroy:function(){},_simpleMessage:function(e){var t=this._commitInfo.Message?this._commitInfo.Message:"";if(t){var i=t.replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n");i&&i.length>0&&(t=i[0]),e>10&&t.length>e&&(t=t.substring(0,e-3)+"...")}return t},_generateMessageNode:function(e){var i;if(this._commitInfo.URL||this._commitInfo.SHA1){if(i=document.createElement("a"),this._commitInfo.SHA1){var n=new URL("commit",window.location.href).href;n=decodeURIComponent(n),i.href=new t(n+"{/SHA1}").expand(this._commitInfo)}else i.href=this._commitInfo.URL;i.classList.add("commitInfolink"),i.appendChild(document.createTextNode(e))}else i=document.createElement("span"),i.appendChild(document.createTextNode(e));return i},_requestPhotoURL:function(e,t){var i=this,o="/manage/service/com.ibm.team.jazzhub.common.service.IPhotoService/getContributorPhotoURI",r=new URL(o,window.location.href);r.query.set("contributorUserId",e);var s=r.href;n("GET",s,{timeout:15e3}).then(function(e){var i=JSON.parse(e.response);t.src=i.photoURI},function(){i._useOtherPhotoURL(t)})},_useOtherPhotoURL:function(e){e.src=this._commitInfo.AvatarURL?this._commitInfo.AvatarURL:"https://www.gravatar.com/avatar/?d=mm"},renderSimple:function(e){this._parentDomNode.appendChild(this._generateMessageNode(this._simpleMessage(e)))},render:function(e,t){var n=this._commitInfo.Author&&this._commitInfo.Author.Date?s(this._commitInfo.Author.Date):"",o=this._simpleMessage(-1),r=this._commitInfo.Author&&this._commitInfo.Author.Name?this._commitInfo.Author.Name:"",a=e;if(a||(a="Commit"),a="Last "+a,t){var l=document.createElement("div"),c=new Image;this._commitInfo.Author&&this._commitInfo.Author.UserId?this._requestPhotoURL(this._commitInfo.Author.UserId,c):this._useOtherPhotoURL(c),c.classList.add("commitInfoAvatar"),l.appendChild(c),this._parentDomNode.appendChild(l)}else{var d=document.createElement("div");d.classList.add("commitInfoLabelContainer"),d.appendChild(document.createTextNode(a.toUpperCase())),this._parentDomNode.appendChild(d)}var h=document.createElement("div");h.classList.add("commitInfoMessageContainer");var u=document.createElement("div");u.classList.add("commitInfoAutorContainer");var p=document.createDocumentFragment(),m=document.createElement("span");m.appendChild(document.createTextNode(r)),m.classList.add("navColumnBold");var g;if(t){var f=document.createElement("span");f.appendChild(document.createTextNode(a)),f.classList.add("navColumnBold"),p.textContent=n?"${0} by ${1} "+n+".":"${0} by ${1}.",g=[f,m]}else p.textContent=n?"by ${0} "+n+".":"by ${0}.",g=[m];i.processDOMNodes(p,g),u.appendChild(p),h.appendChild(u);var v=document.createElement("div");v.classList.add("commitInfoMessageTextContainer"),v.appendChild(this._generateMessageNode(o)),h.appendChild(v),this._parentDomNode.appendChild(h)}}),{CommitInfoRenderer:a,calculateTime:s}}),define("orion/explorers/navigatorRenderer",["i18n!orion/navigate/nls/messages","orion/Deferred","orion/explorers/explorer","orion/explorers/navigationUtils","orion/extensionCommands","orion/objects","orion/URITemplate","orion/widgets/browse/commitInfoRenderer","orion/webui/littlelib"],function(e,t,i,n,o,r,s,a,l){function c(e){switch(e&&e.id){case"image/jpeg":case"image/png":case"image/gif":case"image/ico":case"image/tiff":case"image/svg":return!0}return!1}function d(e,t,i,n){if(e){var o,r=e.imageClass,s=e.image;r?(o=document.createElement("span"),o.className+=r,o.classList.add("thumbnail")):s&&(o=document.createElement("img"),o.src=s,o.classList.add("thumbnail")),o&&t.replaceChild(o,n)}}function h(){return m}function u(e,i,n,a,l,h,u,p,g){i=r.clone(i);var v;if(i.Directory){v=document.createElement("a"),v.className="navlinkonpage";var y=e?new s(e+"#{,resource,params*}"):f;v.href=y.expand({resource:i.ChildrenLocation}),i.Name&&v.appendChild(document.createTextNode(i.Name))}else{l||(l=o.getOpenWithCommands(n)),v=document.createElement("a"),v.className="navlink targetSelector",h&&"object"==typeof h&&Object.keys(h).forEach(function(e){v[e]=h[e]});var C=null,w=null;C=p?p.holderDom:v,C&&(w=document.createElement("span"),w.className="core-sprite-file modelDecorationSprite thumbnail",C.appendChild(w)),i.Name&&v.appendChild(document.createTextNode(i.Name));var _=i.Location;u&&"object"==typeof u&&(i.params={},r.mixin(i.params,u));var b=o.getOpenWithCommand(n,i,l);b&&(_=b.hrefCallback({items:i})),t.when(a.getFileContentType(i),function(e){C&&d(e,C,i.Location,w),v.href=_,g&&"function"==typeof g.updateFileNode&&g.updateFileNode(i,v,c(e))})}return v.addEventListener("click",function(){m=i}.bind(this),!1),v}function p(e,t,i,n){this.explorer=t,this.commandService=i,this.contentTypeService=n,this.openWithCommands=null,this.actionScopeId=e.actionScopeId,this._init(e),this.target="_self"}var m,g=60,f=new s("#{,resource,params*}");return p.prototype=new i.SelectionRenderer,p.prototype.wrapperCallback=function(e){e.setAttribute("role","tree")},p.prototype.tableCallback=function(t){t.setAttribute("aria-label",e.Navigator),t.setAttribute("role","presentation")},p.prototype.rowCallback=function(e){e.setAttribute("role","treeitem")},p.prototype.emptyCallback=function(t){var i=document.createElement("tr"),n=document.createElement("td");n.colSpan=this.oneColumn?1:3;var o=document.createElement("div");o.classList.add("noFile"),o.textContent=e.NoFile;var r=document.createElement("span");r.appendChild(document.createTextNode(e.File)),l.processDOMNodes(o,[r]),n.appendChild(o),i.appendChild(n),t.appendChild(i)},p.prototype.getDisplayTime=function(e){return new Date(e).toLocaleString()},p.prototype.getCommitRenderer=function(e,t){return new a.CommitInfoRenderer({parent:e,commitInfo:t})},p.prototype.getCellHeaderElement=function(e){if(this.oneColumn&&0!==e)return null;switch(e){case 0:case 1:case 2:var t=document.createElement("th");t.style.height="8px"}},p.prototype.setTarget=function(e){this.target=e},p.prototype.getFolderImage=function(){if(!this.showFolderImage)return null;var e=document.createElement("span");return e.className="core-sprite-folder modelDecorationSprite",e},p.prototype.createFolderNode=function(e){var t;if(this.showFolderLinks){t=u(this.folderLink||"",e,this.commandService,this.contentTypeService);var i=this.getFolderImage(e);i&&t.insertBefore(i,t.firstChild)}else t=document.createElement("span"),t.textContent=e.Name;return t},p.prototype.updateFileNode=function(){},p.prototype.showFolderLinks=!0,p.prototype.getCellElement=function(e,t,i){var r=t.LastCommit?2:1,s=t.LastCommit?3:2,a=t.LastCommit?1:-1;switch(e){case 0:var l=document.createElement("td"),c=document.createElement("span");c.id=i.id+"MainCol",c.setAttribute("role","presentation"),l.appendChild(c),l.setAttribute("role","presentation"),c.className="mainNavColumn";var d;return t.Directory?(this.getExpandImage(i,c),d=this.createFolderNode(t),c.appendChild(d),this.explorer._makeDropTarget(t,d),this.explorer._makeDropTarget(t,i)):(this.openWithCommands||(this.openWithCommands=o.getOpenWithCommands(this.commandService)),d=u("",t,this.commandService,this.contentTypeService,this.openWithCommands,{target:this.target},null,null,this),c.appendChild(d)),d&&(d.id=i.id+"NameLink",1===d.nodeType&&(n.addNavGrid(this.explorer.getNavDict(),t,d),d.setAttribute("role","link"),d.setAttribute("tabindex","-1"))),this.actionScopeId&&this.commandService.renderCommands(this.actionScopeId,c,t,this.explorer,"tool",null,!0),l;case r:if(this.oneColumn)return null;var h=document.createElement("td");return t.LocalTimeStamp&&(h.textContent=this.getDisplayTime(t.LocalTimeStamp)),h;case s:if(this.oneColumn)return null;var p=document.createElement("td");if(!t.Directory&&"number"==typeof t.Length){var m=parseInt(t.Length,10),f=m/1024;p.textContent=Math.ceil(f).toLocaleString()+" KB"}return p.style.textAlign="right",p;case a:if(this.oneColumn||!t.LastCommit)return null;var v=document.createElement("td");return this.getCommitRenderer(v,t.LastCommit).renderSimple(g),v}},p.prototype.constructor=p,{NavigatorRenderer:p,isImage:c,getClickedItem:h,createLink:u}}),define("orion/searchClient",["i18n!orion/search/nls/messages","require","orion/webui/littlelib","orion/i18nUtil","orion/searchUtils","orion/crawler/searchCrawler","orion/explorers/navigatorRenderer","orion/extensionCommands","orion/Deferred"],function(e,t,i,n,o,r,s,a,l){function c(e,t){this.serviceRegistry=e,this.commandRegistry=t,this.openWithCommands=null}function d(e){this.registry=e.serviceRegistry,this._commandService=e.commandService,this._fileService=e.fileService,this.defaultRenderer=new c(this.registry,this._commandService),this._fileService||console.error("No file service on search client")}return c.prototype.makeRenderFunction=function(r,c,d,h,u){function p(a,p,m,v){l.when(f.openWithCommands,function(l){if(m){i.empty(c);var f=document.createElement("div");return f.appendChild(document.createTextNode(e["Search failed."])),c.appendChild(f),void("function"==typeof h&&h(c))}var y=function(){function e(e,t){var i=t.folderName?t.folderName:t.path,n=document.createElement("span");n.id=i.replace(/[^a-zA-Z0-9_\.:\-]/g,""),n.appendChild(document.createTextNode(" - "+i+" ")),e.appendChild(n)}function t(t,n){var o=n.name;if(i.hasOwnProperty(o)){e(t,n);var r=i[o];"function"==typeof r&&(i[o]=null,r())}else i[o]=function(){e(t,n)}}var i={};return t}(),C=!1;if(i.empty(c),a&&a.length>0){var w=document.createElement("table");w.setAttribute("role","presentation");for(var _=0;_<a.length;_++){var b,S=a[_];if(!C&&(C=!0,d)){var L=w.insertRow(0);b=L.insertCell(0),b.textContent=d}var E=w.insertRow(-1);b=E.insertCell(0),b.colspan=2,u&&u(b);var R={Name:S.name,Directory:S.directory,Location:S.path||S.location},P=null;if("number"==typeof S.LineNumber&&(P={},P.line=S.LineNumber),v&&v.keyword&&!v.nameSearch){var T=o.generateSearchHelper(v);P=P||{},P.find=T.inFileQuery.searchStr,P.regEx=T.inFileQuery.wildCard?!0:void 0}var k=s.createLink(t.toUrl("edit/edit.html"),R,g,r,l,{"aria-describedby":(S.folderName?S.folderName:S.path).replace(/[^a-zA-Z0-9_\.:\-]/g,""),style:{verticalAlign:"middle"}},P);S.LineNumber&&k.appendChild(document.createTextNode(" (Line "+S.LineNumber+")")),b.appendChild(k),y(b,S)}c.appendChild(w),"function"==typeof h&&h(c)}if(!C&&p){var N=n.formatMessage(e["No matches found for ${0}"],p);i.empty(c),c.appendChild(document.createTextNode(N)),"function"==typeof h&&h(c)}})}var m=this.serviceRegistry,g=this.commandRegistry;this.openWithCommands=this.openWithCommands||a.createOpenWithCommands(m,r,g);var f=this;return p},d.prototype={search:function(e,t,i){var n=function(e){for(var i=[],n=0;n<e.response.docs.length;n++){var r=e.response.docs[n],s=r.Location,a=o.path2FolderName(r.Path?r.Path:r.Location,r.Name),l=a?a:s,c=t?l.indexOf(t)>=0:!0;c&&i.push({name:r.Name,path:s,folderName:a,directory:r.Directory,lineNumber:r.LineNumber})}return i};if(this._crawler&&e.nameSearch)this._crawler.searchName(e,function(t){i(n(t),e.keyword,null,e)});else try{this.registry.getService("orion.page.progress").progress(this._fileService.search(e),"Searching "+e.keyword).then(function(t){var o=e.keyword;o=o.substring(o.indexOf("}")+1),o=o.substring(o.indexOf(":")+1),i(n(t),o,null,e)},function(e){i(null,null,e,null)})}catch(s){if("string"==typeof s&&s.indexOf("search")>-1&&this._crawler)this._crawler.searchName(e,function(t){i(n(t),null,null,e)});else if("string"==typeof s&&s.indexOf("search")>-1&&!e.nameSearch){var a=new r.SearchCrawler(this.registry,this._fileService,e,{childrenLocation:this.getChildrenLocation()});a.search(function(t){i(n(t),null,null,e)})}else this.registry.getService("orion.page.message").setErrorMessage(s)}},getFileService:function(){return this._fileService},setCrawler:function(e){this._crawler=e},handleError:function(e,t){return console.error(e),i.empty(t),t.appendChild(document.createTextNode(e)),e},setLocationByMetaData:function(t,o){var r="",s=null;this._searchRootLocation=this._fileService.fileServiceRootURL(t.Location),o&&t&&t.Parents&&t.Parents.length>0?s="last"===o.index?t.Parents[t.Parents.length-1]:t.Parents[0]:t&&t.Directory&&t.Location&&t.Parents&&(s=t),s?(this.setLocationbyURL(s.Location),r=s.Name,this._childrenLocation=s.ChildrenLocation):t&&(this.setLocationbyURL(this._searchRootLocation),r=this._fileService.fileServiceName(t.Location),this._childrenLocation=t.ChildrenLocation);var a=i.node("search");if(r||(r=""),a&&a.placeholder){a.value="";var l=n.formatMessage(e["Search ${0}"],r);a.placeholder=l.length>30?l.substring(0,27)+"...":n.formatMessage(e["Search ${0}"],r)}a&&a.title&&(a.title=e["Type a keyword or wild card to search in "]+r)},setLocationbyURL:function(e){this._searchLocation=e},setRootLocationbyURL:function(e){this._searchRootLocation=e},setChildrenLocationbyURL:function(e){this._childrenLocation=e},getSearchLocation:function(){return this._searchLocation?this._searchLocation:this._fileService.fileServiceRootURL()},getSearchRootLocation:function(){return this._searchRootLocation?this._searchRootLocation:this._fileService.fileServiceRootURL()},getChildrenLocation:function(){return this._childrenLocation?this._childrenLocation:this._fileService.fileServiceRootURL()},createSearchParams:function(e,t,i,n){var o=i?this.getSearchRootLocation():this.getSearchLocation();return t?{resource:o,sort:"NameLower asc",rows:100,start:0,nameSearch:!0,keyword:e}:{resource:o,sort:n&&n.sort?n.sort:"Path asc",rows:n&&n.rows?n.rows:40,start:0,caseSensitive:n?n.caseSensitive:void 0,regEx:n?n.regEx:void 0,fileType:n?n.fileType:void 0,fileNamePatterns:n&&n.fileNamePatterns?n.fileNamePatterns:void 0,keyword:e,replace:n?n.replace:void 0}}},d.prototype.constructor=d,{Searcher:d}}),define("orion/operation",["orion/xhr","orion/Deferred"],function(e,t){function i(e){return e?"loadstart"===e||"progress"===e?!0:!1:!0}function n(t){e("DELETE",t,{headers:{"Orion-Version":"1"},timeout:15e3})}function o(t){e("PUT",t,{headers:{"Orion-Version":"1"},data:JSON.stringify({abort:!0}),timeout:15e3})}function r(t,o,s,a){e("GET",t,{headers:{"Orion-Version":"1"},timeout:15e3}).then(function(e){var l=e.response?JSON.parse(e.response):null;return o.progress(l),i(l.type)?void setTimeout(function(){r(t,o,s,a)},2e3):("error"===l.type||"abort"===l.type?o.reject(a?a(l):l.Result):o.resolve(s?s(l):l.Result.JsonData),void(l.Location||n(t)))},function(e){var t=e;if(void 0!==e.responseText){t=e.responseText;try{t=JSON.parse(e.responseText)}catch(i){}}void 0!==t.Message?(t.HttpCode=void 0===t.HttpCode?e.status:t.HttpCode,t.Severity=void 0===t.Severity?"Error":t.Severity,o.reject(t)):o.reject({Severity:"Error",Message:t,HttpCode:e.status})})}function s(e,t){t.then(null,function(t){t instanceof Error&&"Cancel"===t.name&&o(e)})}function a(e,i,n){var o=new t;return s(e,o),r(e,o,i,n),o}return{handle:a}}),define("orion/git/gitClient",["require","orion/xhr","orion/Deferred","orion/operation"],function(e,t,i,n){var o=o||{};return o.GitService=function(){function o(e){e&&(this._serviceRegistry=e,this._serviceRegistration=e.registerService("orion.git.provider",this))}var r="application/json; charset=UTF-8";return o.prototype={checkGitService:function(){},cloneGitRepository:function(n,o,s,a,l,c,d,h,u,p,m){var g=this,f={};n&&(f.Name=n),s&&(f.Path=s),o&&(f.GitUrl=o),f.Location=a,l&&(f.GitSshUsername=l),c&&(f.GitSshPassword=c),d&&(f.GitSshKnownHost=d),h&&(f.GitSshPrivateKey=h),u&&(f.GitSshPassphrase=u),p&&(p.GitMail&&(f.GitMail=p.GitMail),p.GitName&&(f.GitName=p.GitName)),m&&(f.initProject=m);var v=e.toUrl("gitapi/clone/._");v=v.substring(0,v.length-2);var y=new i;return t("POST",v,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify(f)}).then(function(e){g._getGitServiceResponse(y,e)},function(e){g._handleGitServiceResponseError(y,e)}),y},removeGitRepository:function(e){var n=this,o=new i;return t("DELETE",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)}),o},getGitStatus:function(e){var n=this,o=new i;return t("GET",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)}),o},stage:function(e){var n=this,o=new i;return t("PUT",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)}),o},stageMultipleFiles:function(e,n){var o=this,s=new i;return t("PUT",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Path:n})}).then(function(e){o._getGitServiceResponse(s,e)},function(e){o._handleGitServiceResponseError(s,e)}),s},unstageAll:function(e,n){var o=this,s=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Reset:n})}).then(function(e){o._getGitServiceResponse(s,e)},function(e){o._handleGitServiceResponseError(s,e)}),s},unstage:function(e,n){var o=this,s=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Path:n})}).then(function(e){o._getGitServiceResponse(s,e)},function(e){o._handleGitServiceResponseError(s,e)}),s},checkoutPath:function(e,n){var o=this,s=new i;return t("PUT",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Path:n,RemoveUntracked:"true"})}).then(function(e){o._getGitServiceResponse(s,e)},function(e){o._handleGitServiceResponseError(s,e)}),s},commitAll:function(e,n,o){var s=this,a=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:o}).then(function(e){s._getGitServiceResponse(a,e)},function(e){s._handleGitServiceResponseError(a,e)}),a},getGitClone:function(e){var n=this,o=new i;return t("GET",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)}),o},getGitCloneConfig:function(e){var n=this,o=new i;return t("GET",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)}),o},getGitBranch:function(e){var n=this,o=new i;return t("GET",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)}),o},getGitRemote:function(e){var n=this,o=new i;return t("GET",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)}),o},checkoutBranch:function(e,n){var o=this,s=new i;return t("PUT",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Branch:n})}).then(function(e){o._getGitServiceResponse(s,e)},function(e){o._handleGitServiceResponseError(s,e)}),s},resetIndex:function(e,n,o){var s=this,a=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Commit:n,Reset:o?o:"HARD"})}).then(function(e){s._getGitServiceResponse(a,e)},function(e){s._handleGitServiceResponseError(a,e)}),a},addBranch:function(e,n,o){var s=this,a={};n&&(a.Name=n),o&&(a.Branch=o);var l=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify(a)}).then(function(e){s._getGitServiceResponse(l,e)},function(e){s._handleGitServiceResponseError(l,e)}),l},removeBranch:function(e){var n=this,o=new i;return t("DELETE",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)}),o},addRemote:function(e,n,o){var s=this,a=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Remote:n,RemoteURI:o})}).then(function(e){s._getGitServiceResponse(a,e)
},function(e){s._handleGitServiceResponseError(a,e)}),a},removeRemote:function(e){var n=this,o=new i;return t("DELETE",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)}),o},doGitLog:function(e){var n=this,o=new i;return t("GET",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)}),o},getDiff:function(e,n){var o=this,s=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({New:n})}).then(function(e){o._getGitServiceResponse(s,e)},function(e){o._handleGitServiceResponseError(s,e)}),s},doFetch:function(e,n,o,s,a,l,c){var d=this,h=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Fetch:"true",Force:n,GitSshUsername:o,GitSshPassword:s,GitSshKnownHost:a,GitSshPrivateKey:l,GitSshPassphrase:c})}).then(function(e){d._getGitServiceResponse(h,e)},function(e){d._handleGitServiceResponseError(h,e)}),h},doPull:function(e,n,o,s,a,l,c){var d=this,h=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Pull:"true",Force:n,GitSshUsername:o,GitSshPassword:s,GitSshKnownHost:a,GitSshPrivateKey:l,GitSshPassphrase:c})}).then(function(e){d._getGitServiceResponse(h,e)},function(e){d._handleGitServiceResponseError(h,e)}),h},doMerge:function(e,n,o){var s=this,a=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Merge:n,Squash:o})}).then(function(e){s._getGitServiceResponse(a,e)},function(e){s._handleGitServiceResponseError(a,e)}),a},doCherryPick:function(e,n){var o=this,s=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({"Cherry-Pick":n})}).then(function(e){o._getGitServiceResponse(s,e)},function(e){o._handleGitServiceResponseError(s,e)}),s},doRevert:function(e,n){var o=this,s=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Revert:n})}).then(function(e){o._getGitServiceResponse(s,e)},function(e){o._handleGitServiceResponseError(s,e)}),s},doRebase:function(e,n,o){var s=this,a={};a.Rebase=n,o&&(a.Operation=o);var l=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify(a)}).then(function(e){s._getGitServiceResponse(l,e)},function(e){s._handleGitServiceResponseError(l,e)}),l},doPush:function(e,n,o,s,a,l,c,d,h){var u=this,p=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({PushSrcRef:n,PushTags:o,Force:s,GitSshUsername:a,GitSshPassword:l,GitSshKnownHost:c,GitSshPrivateKey:d,GitSshPassphrase:h})}).then(function(e){u._getGitServiceResponse(p,e)},function(e){u._handleGitServiceResponseError(p,e)}),p},getLog:function(e,n){var o=this,s=new i,a=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({New:n})}).then(function(e){a.resolve(e.xhr.getResponseHeader("Location"))},function(e){o._handleGitServiceResponseError(s,e)}),a.then(function(e){t("GET",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){o._getGitServiceResponse(s,e)},function(e){o._handleGitServiceResponseError(s,e)})}),s},getDefaultRemoteBranch:function(e){var n=this,o=new i,s=new i;return t("GET",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(s,e)},function(e){n._handleGitServiceResponseError(o,e)}),s.then(function(e){t("GET",e.Children[0].Location,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)})}),o},doAddTag:function(e,n){var o=this,s=new i;return t("PUT",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Name:n})}).then(function(e){o._getGitServiceResponse(s,e)},function(e){o._handleGitServiceResponseError(s,e)}),s},doRemoveTag:function(e){var n=this,o=new i;return t("DELETE",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)}),o},checkoutTag:function(e,n,o){var s=this,a=new i;return t("PUT",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Tag:n,Branch:o})}).then(function(e){s._getGitServiceResponse(a,e)},function(e){s._handleGitServiceResponseError(a,e)}),a},addCloneConfigurationProperty:function(e,n,o){var s=this,a=new i;return t("POST",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Key:n,Value:o})}).then(function(e){s._getGitServiceResponse(a,e)},function(e){s._handleGitServiceResponseError(a,e)}),a},editCloneConfigurationProperty:function(e,n){var o=this,s=new i;return t("PUT",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({Value:n})}).then(function(e){o._getGitServiceResponse(s,e)},function(e){o._handleGitServiceResponseError(s,e)}),s},deleteCloneConfigurationProperty:function(e){var n=this,o=new i;return t("DELETE",e,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json"}).then(function(e){n._getGitServiceResponse(o,e)},function(e){n._handleGitServiceResponseError(o,e)}),o},sendCommitReviewRequest:function(e,n,o,s,a,l){var c=this,d=new i;return t("POST",n,{headers:{"Orion-Version":"1","Content-Type":r},timeout:15e3,handleAs:"json",data:JSON.stringify({ReviewReqCommit:e,ReviewReqUrl:s,ReviewReqNotifyLogin:o,ReviewReqAuthorName:a,ReviewMessage:l})}).then(function(e){c._getGitServiceResponse(d,e)},function(e){c._handleGitServiceResponseError(d,e)}),d},_getGitServiceResponse:function(e,t){var i=t.response?JSON.parse(t.response):null;if(t.xhr&&202===t.xhr.status){var o=n.handle(i.Location);return o.then(e.resolve,function(t){t.failedOperation=i.Location,e.reject(t)},e.progress),void e.then(null,function(e){o.reject(e)})}e.resolve(i)},_handleGitServiceResponseError:function(e,t){e.reject(t)}},o}(),o}),define("orion/ssh/sshTools",["orion/Deferred","orion/xhr"],function(e,t){var i=i||{};return i.SshService=function(){function i(i){if(i&&(this._serviceRegistry=i,this._authService=i.getService("orion.core.auth"),this._serviceRegistration=i.registerService("orion.net.ssh",this),!this._authService)){var n;this._authService={getUser:function(){if(n){var i=new e;return i.resolve(n),i}return t("POST","../../login",{headers:{"Orion-Version":"1"},timeout:15e3}).then(function(e){return n=e.response?JSON.parse(e.response):null},function(e){return n=null,e instanceof Error&&"Cancel"===e.name?"_cancel":e.response?JSON.parse(e.response):null})}}}}return i.prototype={KNOWN_HOSTS:"knownHosts",addKnownHost:function(t){t=t||{};var i=new e,n=this,o=t.host,r=t.keyType,s=t.hostKey,a=t.port||22;return o&&r&&s&&a?(this._authService.getUser().then(function(e){var t=localStorage.getItem(e.login+"/"+n.KNOWN_HOSTS);t=t?JSON.parse(t):[];for(var l=0;l<t.length;++l){var c=t[l];if(c.host===o&&c.port===a)return void i.resolve(c.host+" "+c.keyType+" "+c.hostKey)}var c={host:o,port:a,keyType:r,hostKey:s};t.push(c),localStorage.setItem(e.login+"/"+n.KNOWN_HOSTS,JSON.stringify(t)),i.resolve(c.host+" "+c.keyType+" "+c.hostKey)},function(e){i.reject(e)}),i):(i.reject(),i)},clearKnownHosts:function(){var t=new e,i=this;return this._authService.getUser().then(function(e){var n=localStorage.getItem(e.login+"/"+i.KNOWN_HOSTS);n=n?JSON.parse(n):[],localStorage.removeItem(e.login+"/"+i.KNOWN_HOSTS),t.resolve(n)},function(e){t.reject(e)}),t},getKnownHostCredentials:function(t,i){var n=new e,o=this;return i=i||22,t&&i?(this._authService.getUser().then(function(e){var r=localStorage.getItem(e.login+"/"+o.KNOWN_HOSTS);r=r?JSON.parse(r):[];for(var s=0;s<r.length;++s){var a=r[s];if(a.host===t&&a.port===i)return void n.resolve(a.host+" "+a.keyType+" "+a.hostKey)}n.resolve("")},function(e){n.reject(e)}),n):(n.reject(),n)}},i}(),i}),define("orion/git/util",["orion/URL-shim"],function(){function e(e){for(var t=0;t<c.length;t++)if(e.type===c[t])return!0;return!1}function t(e){for(var t=0;t<l.length;t++)if(e.type===l[t])return!0;return!1}function i(i){return e(i)||t(i)}function n(e){for(var t=0;t<c.length;t++)if(e[c[t]].length>0)return!0;return!1}function o(e){for(var t=0;t<l.length;t++)if(e[l[t]].length>0)return!0;return!1}function r(e){try{var t=new URL(e);return{host:t.hostname,port:t.port}}catch(i){try{var n=e.split(":"),o=n[0].split("@"),r=o.length>1?o[1]:o[0];return{host:r,port:22}}catch(s){return{host:"",port:""}}}}function s(e){for(var t=e.split(/\r\n|\n/),i=0;t.length>0&&/^\s*$/.test(t[i]);)i++;var n=100;return t[i].length>n?t[i].substring(0,n)+"...":t[i]}function a(e){for(var t=e.split(/\r\n|\n/),i={},n=0,o=!1,r=t.length-1;r>=0;--r){var s="Change-Id: ",a="Signed-off-by: ";if(0===t[r].indexOf(s)){if(i.changeId=t[r].substring(s.length,t[r].length),++n>1){i={};break}}else o||0!==t[r].indexOf(a)||(i.signedOffBy=t[r].substring(a.length,t[r].length),a=!0)}return i}var l=["Missing","Modified","Untracked","Conflicting"],c=["Added","Changed","Removed"],d="git/git-status.html";return{statusUILocation:d,isStaged:e,isUnstaged:t,isChange:i,hasStagedChanges:n,hasUnstagedChanges:o,parseSshGitUrl:r,trimCommitMessage:s,getGerritFooter:a}}),define("orion/git/widgets/ConfirmPushDialog",["i18n!git/nls/gitmessages","orion/webui/dialog"],function(e,t){function i(e){this._init(e)}return i.prototype=new t.Dialog,i.prototype.TEMPLATE='<div id="header"></div>',i.prototype._init=function(t){var i=this;this.title="Git Push",this.modal=!0,this.messages=e,this.location=t.location,this.moreCallback=t.moreCallback,this.func=t.func,this._afterHiding=t.closeCallback,this.buttons=[],this.moreCallback&&this.buttons.push({callback:function(){i.destroy(),i.moreCallback()},text:"More"}),this.buttons.push({callback:function(){i.destroy(),i.func()},text:"OK"}),this._initialize()},i.prototype._bindToDom=function(){var e=this.$header;e.appendChild(document.createTextNode("You are going to push to the following remote: "+this.location)),e.appendChild(document.createElement("br")),this.moreCallback&&e.appendChild(document.createTextNode(" Click More to push to another remote or OK to push to default."))},i.prototype.constructor=i,{ConfirmPushDialog:i}}),define("orion/git/gitPreferenceStorage",["orion/Deferred"],function(e){function t(e){this._prefix="/git/credentials",this._preferenceService=e.getService("orion.core.preference")}return t.prototype={put:function(t,i){var n={gitSshUsername:"",gitSshPassword:"",gitPrivateKey:"",gitPassphrase:""};void 0!==i&&(void 0!==i.gitSshUsername&&null!==i.gitSshUsername&&(n.gitSshUsername=i.gitSshUsername),void 0!==i.gitSshPassword&&null!==i.gitSshPassword&&(n.gitSshPassword=i.gitSshPassword),void 0!==i.gitPrivateKey&&null!==i.gitPrivateKey&&(n.gitPrivateKey=i.gitPrivateKey),void 0!==i.gitPassphrase&&null!==i.gitPassphrase&&(n.gitPassphrase=i.gitPassphrase));var o=new e;return this._preferenceService.getPreferences(this._prefix,2).then(function(e){var i=e.get("settings");return void 0===i?void o.reject():void(i.enabled?(e.put(t,n),o.resolve()):o.reject())}),o},get:function(t){var i={gitSshUsername:"",gitSshPassword:"",gitPrivateKey:"",gitPassphrase:""},n=new e;return this._preferenceService.getPreferences(this._prefix,2).then(function(e){var o=e.get("settings");if(void 0===o)return void n.reject();if(o.enabled){var r=e.get(t);n.resolve(void 0!==r?r:i)}else n.reject()}),n},isEnabled:function(){var t=new e;return this._preferenceService.getPreferences(this._prefix,2).then(function(e){var i=e.get("settings");return void 0===i?void t.resolve(!1):void t.resolve(i.enabled)}),t},enable:function(){var t=new e;return this._preferenceService.getPreferences(this._prefix,2).then(function(e){e.put("settings",{enabled:!0}),t.resolve()}),t},disable:function(){var t=new e;return this._preferenceService.getPreferences(this._prefix,2).then(function(e){e.put("settings",{enabled:!1}),t.resolve()}),t},remove:function(t){var i=new e;return this._preferenceService.getPreferences(this._prefix,2).then(function(e){e.remove(t),i.resolve()}),i},getRepositories:function(){var t=new e;return this._preferenceService.getPreferences(this._prefix,2).then(function(e){for(var i=[],n=e.keys(),o=0;o<n.length;++o)"settings"!==n[o]&&i.push(n[o]);t.resolve(i)}),t}},t.prototype.constructor=t,t}),define("orion/git/widgets/GitCredentialsDialog",["i18n!git/nls/gitmessages","orion/git/gitPreferenceStorage","orion/webui/dialog","orion/git/util"],function(e,t,i,n){function o(e){this._init(e)}return o.prototype=new i.Dialog,o.prototype.TEMPLATE='<div id="gitCredentialsLabel" style="padding: 8px">${Repository URL:}<strong id="url"></strong></div><div id="gitSshUsernameRow" style="padding: 8px"><label id="gitSshUsernameLabel" for="gitSshUsername">${Username:}</label><input id="gitSshUsername" value=""></div><div id="gitSshPasswordRow" style="padding: 8px"><input id="isSshPassword" type="radio" name="isSshPassword" checked value="password"/><label id="gitSshPasswordLabel" for="gitSshPassword" style="padding: 0 8px">${Password:}</label><input type="password" id="gitSshPassword" value="" style="width: 30em"></div><div style="padding: 8px"><div id="gitPrivateKeyRow"><input id="isPrivateKey" type="radio" name="isSshPassword" value="privateKey" style="vertical-align: top"/><label id="gitPrivateKeyLabel" for="gitPrivateKey" style="padding: 0 8px; vertical-align: top">${Private key:}</label><textarea id="gitPrivateKey" value=""></textarea></div><div id="gitPrivateKeyFileRow" style="padding-left: 8em"><label id="gitPrivateKeyFileLabel" for="gitPrivateKeyFile">${Private key file (optional):}</label><br><input id="gitPrivateKeyFile" multiple="false" type="file" size="53" label="Browse..."></div><div id="gitPassphraseRow" style="padding-left: 8em"><label id="gitPassphraseLabel" for="gitPassphrase">${Passphrase (optional):}</label><br><input type="password" id="gitPassphrase" value="" style="width: 30em"></div></div><div id="gitSaveCredentialsRow" style="padding: 8px"><img id="gitSaveCredentialsInfo" src="/images/info.gif""><input id="gitSaveCredentials" type="checkbox" name="gitSaveCredentials"><label id="gitSaveCredentialsLabel" for="gitSaveCredentials">${Don\'t prompt me again:}</label></div>',o.prototype._init=function(t){var i=this;this.title=t.title||e["Git Credentials"],this.modal=!0,this.messages=e,this.options=t,this._afterHiding=t.closeCallback,this.options.username||this.options.password||this.options.privatekey||this.options.passphrase||(this.options.username=!0,this.options.password=!0,this.options.privatekey=!0,this.options.passphrase=!0),t.serviceRegistry&&(this._sshService=t.serviceRegistry.getService("orion.net.ssh"),this._progressService=t.serviceRegistry.getService("orion.page.progress")),this.buttons=[],this.buttons.push({callback:function(){i.destroy(),i._execute()},text:"OK",isDefault:!0}),this._initialize()},o.prototype._bindToDom=function(){var e=this;this.options.username||(this.$gitSshUsernameRow.style.display="none"),this.options.password||(this.$gitSshPasswordRow.style.display="none"),this.options.privatekey||(this.$gitPrivateKeyRow.style.display="none",this.$gitPrivateKeyFileRow.style.display="none"),this.options.passphrase||(this.$gitPassphraseRow.style.display="none"),this.options.errordata&&this.options.errordata.Url&&(this.$gitCredentialsLabel.style.display="block",this.$url.textContent=this.options.errordata.Url),this.options.errordata&&this.options.errordata.User&&""!==this.options.errordata.User&&(this.$gitSshUsername.value=this.options.errordata.User,this.$gitSshUsernameRow.style.display="none",setTimeout(function(){e.$gitSshPassword.focus()},400));var i=new t(this.options.serviceRegistry);i.isEnabled().then(function(t){t||(e.$gitSaveCredentials.style.display="none",e.$gitSaveCredentialsLabel.style.display="none",e.$gitSaveCredentialsInfo.style.display="none")}),this.$gitSshPassword.addEventListener("focus",function(){e.$isSshPassword.checked=!0}),this.$gitPrivateKey.addEventListener("focus",function(){e.$isPrivateKey.checked=!0}),this.$gitPrivateKeyFile.addEventListener("focus",function(){e.$isPrivateKey.checked=!0}),this.$gitPassphrase.addEventListener("focus",function(){e.$isPrivateKey.checked=!0}),this.$gitPrivateKeyFile.addEventListener("change",function(t){var i=t.target.files[0];e.privateKeyFile=i})},o.prototype._execute=function(){var e=this,i=this.$gitPrivateKey.value,o=this.$url.textContent,r=function(t){if(e._sshService){var i=n.parseSshGitUrl(o);e._sshService.getKnownHostCredentials(i.host,i.port).then(function(i){if(e.options.func){var n="undefined"==typeof e.options.failedOperation?e.options.errordata.failedOperation:e.options.failedOperation;"undefined"!==n&&e._progressService.removeOperation(n),e.options.func({gitSshUsername:e.$gitSshUsername.value,gitSshPassword:e.$isSshPassword.checked?e.$gitSshPassword.value:"",gitPrivateKey:e.$isPrivateKey.checked?t:"",gitPassphrase:e.$isPrivateKey.checked?e.$gitPassphrase.value:"",knownHosts:i})}})}else if(e.options.func){var r="undefined"==typeof e.options.failedOperation?e.options.errordata.failedOperation:e.options.failedOperation;"undefined"!==r&&e._progressService.removeOperation(r),e.options.func({gitSshUsername:e.$gitSshUsername.value,gitSshPassword:e.$gitSshPassword.value,gitPrivateKey:t,gitPassphrase:e.$gitPassphrase.value,knownHosts:e.$gitSshKnownHosts.value})}};if(this.privateKeyFile){var s=new FileReader;s.onload=function(){return function(n){i=n.target.result;var s=new t(e.options.serviceRegistry);e.$gitSaveCredentials.checked?s.put(o,{gitPrivateKey:i,gitPassphrase:e.$gitPassphrase.value}).then(function(){r(i)}):r(i)}}(this.privateKeyFile),s.readAsText(this.privateKeyFile)}else if(i.length>0){var a=new t(e.options.serviceRegistry);e.$gitSaveCredentials.checked?a.put(o,{gitPrivateKey:i,gitPassphrase:e.$gitPassphrase.value}).then(function(){r(i)}):r(i)}else{var a=new t(e.options.serviceRegistry);e.$gitSaveCredentials.checked?a.put(o,{gitSshUsername:e.$gitSshUsername.value,gitSshPassword:e.$gitSshPassword.value}).then(function(){r(i)}):r(i)}},o.prototype.constructor=o,{GitCredentialsDialog:o}}),define("orion/git/logic/gitCommon",["orion/git/util","orion/i18nUtil","orion/git/gitPreferenceStorage","orion/git/widgets/GitCredentialsDialog","orion/Deferred","i18n!git/nls/gitmessages"],function(e,t,i,n,o,r){function s(e){var t;try{t=JSON.parse(e.responseText)}catch(i){t={Message:r["Problem while performing the action"]}}return t.HttpCode=e.status,t}function a(e){return"REJECTED_NONFASTFORWARD"===e?r.REJECTED_NONFASTFORWARD:e}var l=function(i,n,o,s){if(confirm(t.formatMessage(r["Would you like to add ${0} key for host ${1} to continue operation? Key fingerpt is ${2}."],n.KeyType,n.Host,n.HostFingerprint))){var a=e.parseSshGitUrl(n.Url),l={host:n.Host,keyType:n.KeyType,hostKey:n.HostKey,port:a.port},c=i.getService("orion.net.ssh");c.addKnownHost(l).then(function(e){if(o.knownHosts=e,"undefined"!=typeof o.failedOperation){var t=i.getService("orion.page.progress");t.removeOperation(o.failedOperation)}s(o)})}},c=function(e,t,o,r,s,a){var l=t?t.Url:void 0,c=function(){var t=new n.GitCredentialsDialog({title:s,serviceRegistry:e,func:r,errordata:o.errordata,failedOperation:o.failedOperation,closeCallback:a});t.show()};if(o.gitSshUsername&&""!==o.gitSshUsername||o.gitSshPassword&&""!==o.gitSshPassword||o.gitPrivateKey&&""!==o.gitPrivateKey)c();else{var d=new i(e);d.get(l).then(function(t){if(""!==t.gitPrivateKey||""!==t.gitSshUsername||""!==t.gitSshPassword){if("undefined"!=typeof o.failedOperation){var i=e.getService("orion.page.progress");i.removeOperation(o.failedOperation)}return void r({knownHosts:o.knownHosts,gitSshUsername:t.gitSshUsername,gitSshPassword:t.gitSshPassword,gitPrivateKey:t.gitPrivateKey,gitPassphrase:t.gitPassphrase})}c()},c)}},d=function(e,t,n,o){if(e&&void 0!==e.status&&(e=s(e)),!e||!e.HttpCode)return void(n&&n(e));switch(e.HttpCode){case 401:var r=new i(t);r.isEnabled().then(function(t){t&&void 0!==e.JsonData.Url?r.remove(e.JsonData.Url).then(function(){o(e)}):o(e)});break;case 400:if(e.JsonData&&e.JsonData.HostKey)return void o(e);default:var l=[];l.Severity=e.Severity||"Error",l.HTML=!1,l.Message=a(e.DetailedMessage?e.DetailedMessage:e.Message),t.getService("orion.page.message").setProgressResult(l),n&&n(e)}},h=function(s,a,l,c){var d,h=new o,u=a.items;u.LocalBranch&&u.RemoteBranch&&(u=u.LocalBranch),void 0!==u.RemoteLocation?d=u.RemoteLocation[0].GitUrl:void 0!==u.GitUrl?d=u.GitUrl:void 0!==u.errorData?d=u.errorData.Url:void 0!==u.toRef&&(d=u.toRef.RemoteLocation[0].GitUrl);var p=s.getService("orion.net.ssh"),m=e.parseSshGitUrl(d),g=function(e){s.getService("orion.net.ssh").getKnownHostCredentials(m.host,m.port).then(function(t){a.sshObject=e,h.resolve({knownHosts:t,gitSshUsername:e.gitSshUsername,gitSshPassword:e.gitSshPassword,gitPrivateKey:e.gitPrivateKey,gitPassphrase:e.gitPassphrase})})},f=a.errorData;if(f&&f.HostKey){if(confirm(t.formatMessage(r["Would you like to add ${0} key for host ${1} to continue operation? Key fingerpt is ${2}."],f.KeyType,f.Host,f.HostFingerprint))){var v=e.parseSshGitUrl(f.Url),y={host:f.Host,keyType:f.KeyType,hostKey:f.HostKey,port:v.port};p.addKnownHost(y).then(function(){if(!a.sshObject||""===a.sshObject.gitSshUsername&&""===a.sshObject.gitSshPassword&&""===a.sshObject.gitPrivateKey){var e=new i(s);e.get(d).then(function(e){g(e)},function(){g({gitSshUsername:"",gitSshPassword:"",gitPrivateKey:"",gitPassphrase:""})})}else g({gitSshUsername:"",gitSshPassword:"",gitPrivateKey:"",gitPassphrase:""})})}else"function"==typeof c&&c();return h}var C=function(){if(!a.parameters&&!a.optionsRequested)return void g({gitSshUsername:"",gitSshPassword:"",gitPrivateKey:"",gitPassphrase:""});if(a.parameters&&!a.optionsRequested){var e=a.parameters&&a.parameters.valueFor("sshuser")?a.parameters.valueFor("sshuser"):a.errorData.User,t=a.parameters?a.parameters.valueFor("sshpassword"):"",o=a.parameters&&a.parameters.valueFor("saveCredentials")?a.parameters.valueFor("saveCredentials"):!1,r=new i(s);return o?void r.put(d,{gitSshUsername:e,gitSshPassword:t}).then(function(){g({gitSshUsername:e,gitSshPassword:t,gitPrivateKey:"",gitPassphrase:""})}):void g({gitSshUsername:e,gitSshPassword:t,gitPrivateKey:"",gitPassphrase:""})}var h=new n.GitCredentialsDialog({title:l,serviceRegistry:s,func:g,errordata:f,closeCallback:c});h.show()};if(!a.sshObject||""===a.sshObject.gitSshUsername&&""===a.sshObject.gitSshPassword&&""===a.sshObject.gitPrivateKey){var w=new i(s);w.get(d).then(function(e){return""!==e.gitPrivateKey||""!==e.gitSshUsername||""!==e.gitSshPassword?void g(e):void C()},C)}else C();return h},u=function(e,t,i,n,o,r){if(e&&void 0!==e.status&&(e=s(e)),!e||void 0===e.HttpCode)return void(n&&n(e));switch(e.HttpCode){case 401:return e.JsonData&&(t.errordata=e.JsonData),e.failedOperation&&(t.failedOperation=e.failedOperation),void c(i,e.JsonData,t,o,r);case 400:if(e.JsonData&&e.JsonData.HostKey)return e.failedOperation&&(t.failedOperation=e.failedOperation),void l(i,e.JsonData,t,o);if(e.JsonData&&e.JsonData.Host)return e.JsonData&&(t.errordata=e.JsonData),e.failedOperation&&(t.failedOperation=e.failedOperation),void c(i,e.JsonData,t,o,r);default:var a=[];a.Severity="Error",a.HTML=!1,a.Message=e.DetailedMessage?e.DetailedMessage:e.Message,i.getService("orion.page.message").setProgressResult(a),n&&n(e)}};return{handleGitServiceResponse:d,handleProgressServiceResponse:u,gatherSshCredentials:h,handleSshAuthenticationError:c,handleKnownHostsError:l}}),define("orion/git/widgets/RemotePrompterDialog",["i18n!git/nls/gitmessages","orion/webui/dialog","orion/explorers/explorer","orion/selection"],function(e,t,i,n){function o(e,t){this.explorer=t,this._init(e)}function r(e){this._init(e)}var s=function(){function e(e,t,i,n){this.gitClient=e,this.rootPath=t,this.fetchItems=i,this.root=n?n:null}return e.prototype=new i.ExplorerModel,e.prototype.getRoot=function(e){var t=this;return this.root?void e(this.root):void this.fetchItems(this.rootPath).then(function(i){t.root=i,e(i)})},e.prototype.getIdentity=function(e){var t;return e.Location?(t=e.Location,t=t.replace(/[^\.\:\-\_0-9A-Za-z]/g,"")):t="ROOT",t},e.prototype.getChildren=function(e,t){if(e.children=[],e.Children){for(var i=0;i<e.Children.length;i++)e.Children[i].parent=e,e.children[i]=e.Children[i];t(e.Children)}else e.BranchLocation&&e.RemoteLocation?(e.children=[{GroupNode:"true",Location:e.BranchLocation,Name:"Branches",parent:e},{GroupNode:"true",Location:e.RemoteLocation,BranchLocation:e.BranchLocation,Name:"Remotes",parent:e},{GroupNode:"true",Location:e.TagLocation,Name:"Tags",parent:e}],t(e.children)):e.GroupNode?this.gitClient.getGitBranch(e.Location).then(function(i){e.children=i.Children;for(var n=0;n<i.Children.length;n++)i.Children[n].parent=e;t(i.Children)}):"Remote"===e.Type&&this.gitClient.getGitBranch(e.Location).then(function(i){e.children=i.Children;for(var n=0;n<i.Children.length;n++)i.Children[n].parent=e;t(i.Children)})},e}();return o.prototype=new i.SelectionRenderer,o.prototype.constructor=o,o.prototype.getLabelColumnIndex=function(){return 0},o.prototype.getCellElement=function(t,i,n){var o=document.createElement("td");n.appendChild(o);var r=document.createElement("span");r.id=n.id+"navSpan",o.appendChild(r),r.className="mainNavColumn singleNavColumn",(i.children||i.Children||i.GroupNode||"Remote"===i.Type||i.BranchLocation&&i.RemoteLocation)&&this.getExpandImage(n,r);var s=i.Name;"RemoteTrackingBranch"!==i.Type||i.Id||(s=i.Name+e[" [New branch]"]),r.appendChild(document.createTextNode(s))},r.prototype=new t.Dialog,r.prototype.TEMPLATE='<div><div id="treeContentPane" style="width:25em; min-height: 25em; max-height: 30em; height: auto; overflow-y: auto; padding: 8px"></div><div id="newBranchPane" style="padding: 8px"><label for="newBranch">${New Branch:}</label><input id="newBranch" value="" disabled=true/></div></div>',r.prototype._init=function(t){var i=this;this.title=t.title||e["Choose a Folder"],this.modal=!0,this.messages=e,this.func=t.func,this.treeRoot=t.treeRoot,this.gitClient=t.gitClient,this.hideNewBranch=t.hideNewBranch,this.serviceRegistry=t.serviceRegistry,this._afterHiding=t.closeCallback,this.buttons=[],this.buttons.push({callback:function(){i.$remoteOk.classList.contains(this.DISABLED)||(i.destroy(),i._execute.bind(i)())},text:"OK",isDefault:!0,id:"remoteOk"}),this._initialize()},r.prototype._bindToDom=function(){var t=this;this.$newBranch.addEventListener("input",function(){t._validate()}),this.$newBranch.placeholder=e["No remote selected"],this.hideNewBranch&&(this.$newBranchPane.style.display="none")},r.prototype._beforeShowing=function(){this._loadRemoteChildren()},r.prototype._afterShowing=function(){this.$treeContentPane.focus(),this._validate()},r.prototype._loadRemoteChildren=function(){var e=new s(this.gitClient,null,this.gitClient.getGitClone,this.treeRoot);this._createTree(e)},r.prototype._createTree=function(t){var r=this,s=this.serviceRegistry.getService("orion.remotePrompter.selection");s||(s=new n.Selection(this.serviceRegistry,"orion.remotePrompter.selection"));var a=new o({checkbox:!1,singleSelection:!0,treeTableClass:"directoryPrompter"});this.explorer=new i.Explorer(this.serviceRegistry,s,a),a.explorer=this.explorer,this.explorer.createTree("treeContentPane",t),s.addEventListener("selectionChanged",function(t){t.selection&&"Remote"===t.selection.Type?(r.$newBranch.disabled=!1,r.$newBranch.placeholder=e["Enter a name..."]):(r.$newBranch.disabled=!0,r.$newBranch.placeholder=e["No remote selected"]),r._validate(t.selection)})},r.prototype._validate=function(e){var t=function(e){return e&&"RemoteTrackingBranch"===e.Type?void this.$remoteOk.classList.remove(this.DISABLED):e&&"Remote"===e.Type&&""!==this.$newBranch.value?void this.$remoteOk.classList.remove(this.DISABLED):void this.$remoteOk.classList.add(this.DISABLED)};e?t.bind(this)(e):this.serviceRegistry.getService("orion.remotePrompter.selection").getSelection(t.bind(this))},r.prototype._execute=function(){var e=this;this.serviceRegistry.getService("orion.remotePrompter.selection").getSelection(function(t){if(e.func)if("RemoteTrackingBranch"===t.Type)e.func(t,t.parent);else{var i=t.CloneLocation.substring(t.CloneLocation.indexOf(t.CloneLocation.split("/")[3])),n={};n.parent=t,n.FullName="refs/remotes/"+t.Name+"/"+e.$newBranch.value,n.Name=t.Name+"/"+e.$newBranch.value,n.Type="RemoteTrackingBranch",n.Location="/gitapi/remote/"+t.Name+"/"+encodeURIComponent(encodeURIComponent(e.$newBranch.value))+"/"+i,e.func(null,t,n)}})},r.prototype.constructor=r,{RemotePrompterDialog:r}}),define("orion/git/logic/gitPush",["i18n!git/nls/gitmessages","orion/commandRegistry","orion/git/widgets/ConfirmPushDialog","orion/git/gitPreferenceStorage","orion/git/logic/gitCommon","orion/Deferred","orion/git/widgets/RemotePrompterDialog"],function(e,t,i,n,o,r,s){var a=o.handleGitServiceResponse,l=o.handleProgressServiceResponse,c=o.gatherSshCredentials;return function(o){var d=o.serviceRegistry,h=o.commandService,u=o.tags,p=o.force,m=o.gerrit,g=o.confirmDialogCloseCallback,f=o.remotePrompterDialogCloseCallback,v=o.sshCredentialsDialogCloseCallback,y=o.sshSlideoutCloseCallback,C=function(t,i,n){var o=new r,a=new r,c=d.getService("orion.git.provider"),h=d.getService("orion.page.progress");return 1===i.RemoteLocation.length&&i.RemoteLocation[0].Children&&1===i.RemoteLocation[0].Children.length?a=h.progress(c.getGitRemote(t.RemoteLocation),"Getting git remote details "+i.Name):a.resolve({Children:i.RemoteLocation}),a.then(function(r){var a=function(e){l(e,{},d),o.reject(e)},u=new s.RemotePrompterDialog({title:e["Choose Branch"],serviceRegistry:d,gitClient:c,closeCallback:function(){o.reject()},treeRoot:{Children:r.Children},hideNewBranch:!1,func:function(e,r,s){var l;if(l=null===e?s:e,void 0===n||n){var d="branch."+i.Name+".remote";h.progress(c.addCloneConfigurationProperty(t.ConfigLocation,d,l.parent.Name),"Adding git configuration property "+i.Name).then(function(){o.resolve(l)},function(e){409===e.status?c.getGitCloneConfig(t.ConfigLocation).then(function(e){if(e.Children)for(var t=0;t<e.Children.length;t++)if(e.Children[t].Key===d){var i=e.Children[t].Location;h.progress(c.editCloneConfigurationProperty(i,l.parent.Name),"Updating configuration property "+l.parent.Name).then(function(){o.resolve(l)},a);break}},a):a(e)})}else o.resolve(l)}});u.show()}),o},w=function(o){function s(o){var r=o.targetBranch,g=o.confirmedWarnings;if(p&&!g){if(!confirm(e["You're going to override content of the remote branch. This can cause the remote repository to lose commits."]+"\n\n"+e["Are you sure?"]))return void l.reject();o.confirmedWarnings=!0,g=!0}var f=o.items;f.LocalBranch&&f.RemoteBranch&&(r=f.RemoteBranch,f=f.LocalBranch),f.toRef&&(f=f.toRef);var v=o;v.command||(v.command={},v.command.callback=s);var y=function(i,o){if(i.JsonData.HostKey)o.parameters=null,o.errorData=i.JsonData,o.errorData.failedOperation=i.failedOperation,h.collectParameters(o,S);else if(o.optionsRequested)o.errorData=i.JsonData,o.errorData.failedOperation=i.failedOperation,h.collectParameters(o,S);else{var r=new n(d);r.isEnabled().then(function(n){o.parameters=n?i.JsonData.User?new t.ParametersDescription([new t.CommandParameter("sshpassword","password",e["Password:"]),new t.CommandParameter("saveCredentials","boolean",e["Don't prompt me again:"])],{hasOptionalParameters:!0}):new t.ParametersDescription([new t.CommandParameter("sshuser","text",e["User Name:"]),new t.CommandParameter("sshpassword","password",e["Password:"]),new t.CommandParameter("saveCredentials","boolean",e["Don't prompt me again:"])],{hasOptionalParameters:!0}):i.JsonData.User?new t.ParametersDescription([new t.CommandParameter("sshpassword","password",e["Password:"])],{hasOptionalParameters:!0}):new t.ParametersDescription([new t.CommandParameter("sshuser","text",e["User Name:"]),new t.CommandParameter("sshpassword","password",e["Password:"])],{hasOptionalParameters:!0}),o.errorData=i.JsonData,o.errorData.failedOperation=i.failedOperation,h.collectParameters(o,S)
})}};if(v.parameters&&v.parameters.optionsRequested)return v.parameters=null,v.optionsRequested=!0,void h.collectParameters(v,S);var L=d.getService("orion.git.provider"),E=d.getService("orion.page.progress");v.errorData&&v.errorData.failedOperation&&E.removeOperation(v.errorData.failedOperation);var R=function(t,i,n,o,r){var s=d.getService("orion.page.message"),c=E.progress(L.doPush(i,n,u,r,t.gitSshUsername,t.gitSshPassword,t.knownHosts,t.gitPrivateKey,t.gitPassphrase),e["Pushing remote: "]+o);s.createProgressMonitor(c,e["Pushing remote: "]+o),c.then(function(e){a(e,d,function(){l.resolve()},function(e){y(e,v)})},function(e){a(e,d,function(){l.resolve()},function(e){y(e,v)})})};E.progress(L.getGitClone(f.CloneLocation),"Getting git repository details "+f.Name).then(function(t){var n=t.Children[0];c(d,v,null,b).then(function(t){if(r)return void R(t,r.Location,"HEAD",r.Name,p);var o=function(){C(n,f).then(function(e){v.targetBranch=e,v.items.RemoteLocation=e.parent,R(t,e.Location,"HEAD",e.Name,p)},function(){_()})};if(1===f.RemoteLocation.length&&f.RemoteLocation[0].Children&&1===f.RemoteLocation[0].Children.length){var s=f.RemoteLocation[0].Children[0],a=f.Name;if(m){var l=f.RemoteLocation[0].Children[0].Location,c=l.split("/");a="refs/for/master",c[4]=encodeURIComponent(encodeURIComponent(a));var h=c.join("/");s.Location=h,s.Name=a}var u=new i.ConfirmPushDialog({title:e["Choose Branch"],serviceRegistry:d,gitClient:L,moreCallback:function(){o()},location:s.Name,func:function(){v.targetBranch=s,R(t,s.Location,"HEAD",a,p)},closeCallback:w});u.show()}else o()})})}var l=new r,w=function(){"function"==typeof g&&g(),l.reject()},_=function(){"function"==typeof f&&f(),l.reject()},b=function(){"function"==typeof v&&v(),l.reject()},S=function(){"function"==typeof y&&y(),l.reject()};return s(o),l};return{perform:w,chooseRemote:C}}}),define("orion/git/widgets/gitCommitInfo",["require","i18n!git/nls/gitmessages","orion/URITemplate","orion/i18nUtil","orion/git/util","orion/objects"],function(e,t,i,n,o,r){function s(e){this.parent=e.parent,this.commit=e.commit,this.showTags=e.showTags,this.commitLink=e.commitLink}var a=new i("git/git-commit.html#{,resource,params*}?page=1&pageSize=1");return r.mixin(s.prototype,{display:function(){var i,r=this.commit,s=this.parent,l=r.Message.split(/(\r?\n|$)/)[0];this.commitLink?(i=document.createElement("a"),i.className="navlinkonpage",i.href=e.toUrl(a.expand({resource:r.Location}))):i=document.createElement("span"),i.appendChild(document.createTextNode(o.trimCommitMessage(l))),s.appendChild(i);var c=document.createElement("div");if(c.style.paddingTop="15px",s.appendChild(c),r.AuthorImage){var d=new Image;d.src=r.AuthorImage,d.name=r.AuthorName,d.className="git-author-icon",c.appendChild(d)}var h=document.createElement("div");h.textContent=n.formatMessage(t[" authored by ${0} {${1}) on ${2}"],r.AuthorName,r.AuthorEmail,new Date(r.Time).toLocaleString()),c.appendChild(h);var u=document.createElement("div");u.textContent=n.formatMessage(t["committed by 0 (1)"],r.CommitterName,r.CommitterEmail),c.appendChild(u);var p=document.createElement("div");p.style.paddingTop="15px",p.textContent=t["commit:"]+r.Name,c.appendChild(p);var m=o.getGerritFooter(r.Message);if(m.changeId){var g=document.createElement("div");g.style.paddingTop="15px",g.textContent=t["Change-Id: "]+m.changeId,c.appendChild(g)}if(m.signedOffBy){var f=document.createElement("div");f.textContent=t["Signed-off-by: "]+m.signedOffBy,c.appendChild(f)}if(r.Parents&&r.Parents.length>0){var v=document.createElement("div");v.textContent=t["parent:"],(m.signedOffBy||m.changeId)&&(v.style.paddingTop="15px");var y=document.createElement("a");y.className="navlinkonpage",y.href=e.toUrl(a.expand({resource:r.Parents[0].Location})),y.textContent=r.Parents[0].Name,v.appendChild(y),c.appendChild(v)}var C=r.Branches&&r.Branches.length>0,w=this.showTags&&r.Tags&&r.Tags.length>0;if(C){var _=document.createElement("section");_.style.paddingTop="15px",_.textContent=t["branches: "],c.appendChild(_);var b=document.createElement("div");_.appendChild(b);for(var S=0;S<r.Branches.length;++S){var L=document.createElement("span");L.style.paddingLeft="10px",L.textContent=r.Branches[S].FullName,b.appendChild(L)}}if(w){var E=document.createElement("div");E.style.paddingTop="15px",c.appendChild(E);var R=document.createElement("section");c.appendChild(R);var P=document.createElement("span");P.textContent=t["tags: "],R.appendChild(P);var T=document.createElement("div");for(R.appendChild(T),S=0;S<r.Tags.length;++S){var k=document.createElement("span");k.style.paddingLeft="10px",k.textContent=r.Tags[S].Name,T.appendChild(k)}}}}),{GitCommitInfo:s}}),define("orion/git/widgets/CommitTooltipDialog",["orion/git/widgets/gitCommitInfo","orion/webui/popupdialog"],function(e,t){function i(e){this._init(e)}return i.prototype=new t.PopupDialog,i.prototype.TEMPLATE='<div id="parentPane" style="padding:10px; width:520px"></div>',i.prototype._init=function(e){this.commit=e.commit,this._initialize(e.triggerNode,null,null,"mouseover",1e3)},i.prototype._bindToDom=function(){this._displayCommit(this.commit)},i.prototype._displayCommit=function(t){var i=new e.GitCommitInfo({parent:this.$parentPane,commit:t,showTags:!0,commitLink:!0});i.display()},i.prototype.constructor=i,{CommitTooltipDialog:i}}),define("orion/git/widgets/gitCommitList",["require","i18n!git/nls/gitmessages","orion/commands","orion/Deferred","orion/explorers/explorer","orion/URITemplate","orion/git/util","orion/commonHTMLFragments","orion/git/logic/gitPush","orion/i18nUtil","orion/explorers/navigationUtils","orion/git/widgets/CommitTooltipDialog","orion/webui/littlelib","orion/objects"],function(e,t,i,n,o,r,s,a,l,c,d,h,u,p){function m(e){this.root=e.root,this.section=e.section,this.location=e.location,this.handleError=e.handleError,this.repository=e.repository,this.progressService=e.progressService,this.statusService=e.statusService,this.gitClient=e.gitClient,this.progressService=e.progressService,this.legacyLog=e.legacyLog,this.logDeferred=new n}function g(e){var t=new f({registry:e.serviceRegistry,commandService:e.commandRegistry,actionScopeId:e.actionScopeId,cachePrefix:"LogNavigator",checkbox:!1},this);o.Explorer.call(this,e.serviceRegistry,e.selection,t,e.commandRegistry),this.checkbox=!1,this.parentId=e.parentId,this.actionScopeId=e.actionScopeId,this.section=e.section,this.root=e.root,this.handleError=e.handleError,this.location=e.location,this.gitClient=e.gitClient,this.progressService=e.progressService,this.statusService=e.statusService,this.legacyLog=e.legacyLog,this.incomingActionScope="IncomingActions",this.outgoingActionScope="OutgoingActions",this.syncActionScope="SynchronizedActions",this.createCommands()}function f(){o.SelectionRenderer.apply(this,arguments)}var v=new r("git/git-commit.html#{,resource,params*}?page=1&pageSize=1"),y="?page=1&pageSize=20";return m.prototype=Object.create(o.Explorer.prototype),p.mixin(m.prototype,{destroy:function(){},getRoot:function(e){e(this.root)},_getRepository:function(){var e=this;return n.when(e.log||e._getLog(),function(t){return e.progressService.progress(e.gitClient.getGitClone(t.CloneLocation),"Getting repository details for "+t.Name).then(function(i){var n=i.Children[0];return t.Clone=n,t.ContentLocation=n.ContentLocation,e.root.repository=n})},function(t){e.handleError(t)})},_getLog:function(){var e=this,i=e.location?t["Getting git log"]:c.formatMessage(t['Getting commits for "${0}" branch'],e.currentBranch.Name);return e.progressService.progress(e.gitClient.doGitLog(e.location||e.currentBranch.CommitLocation+y),i).then(function(t){return e.location&&"RemoteTrackingBranch"===t.Type?e.progressService.progress(e.gitClient.doGitLog(t.CommitLocation),i).then(function(t){return e.log=t},function(t){e.handleError(t)}):e.log=t},function(t){e.handleError(t)})},_getOutgoing:function(){var e=this,i=this.getLocalBranch(),n=this.getRemoteBranch(),o=n.CommitLocation+(e.log?e.log.RepositoryPath:""),r=i.Name;return e.progressService.progress(e.gitClient.getLog(o+y,r),t["Getting outgoing commits"]).then(function(t){return e.outgoingCommits=t.Children})},_getIncoming:function(){var e=this,i=this.getLocalBranch(),n=this.getRemoteBranch(),o=i.CommitLocation+(e.log?e.log.RepositoryPath:""),r=n.Name;return e.progressService.progress(e.gitClient.getLog(o+y,r),t["Getting git incoming changes..."]).then(function(t){return e.incomingCommits=t.Children})},getLocalBranch:function(){var e=this.log?this.log.toRef:this.currentBranch;return"RemoteTrackingBranch"===e.Type?(this.tracksRemoteBranch(),this.localBranch):e},getRemoteBranch:function(){if(this.remoteBranch)return this.remoteBranch;var e=this.log?this.log.toRef:this.currentBranch;return"RemoteTrackingBranch"===e.Type?e:e.RemoteLocation[0].Children[e.RemoteLocation[0].Children.length-1]},tracksRemoteBranch:function(){var e=this.log&&this.log.toRef||this.currentBranch;if(e&&"RemoteTrackingBranch"===e.Type&&this.root.repository&&this.root.repository.Branches){var t=!1,i=this;return this.root.repository.Branches.some(function(n){return n.RemoteLocation&&1===n.RemoteLocation.length&&1===n.RemoteLocation[0].Children.length&&n.RemoteLocation[0].Children[0].Name===e.Name?(i.localBranch=n,t=!0,!0):!1}),t}return e&&e.RemoteLocation&&1===e.RemoteLocation.length&&1===e.RemoteLocation[0].Children.length},isRebasing:function(){var e=this.root.repository;return e&&e.status&&"REBASING_INTERACTIVE"===e.status.RepositoryState},getChildren:function(e,i){var o=this,r=this.tracksRemoteBranch();if(e instanceof Array&&e.length>0)i(e);else if(e.children)i(e.children);else if("CommitRoot"===e.Type){var s=this.section,a=s.createProgressMonitor();a.begin(t["Getting git log"]),n.when(e.repository||o._getRepository(),function(r){var l=c.formatMessage(t.GettingCurrentBranch,r.Name);a.worked(l),n.when(r.Branches||o.progressService.progress(o.gitClient.getGitBranch(r.BranchLocation+"?commits=1"),l),function(l){var d,h=l.Children||l;if(h.some(function(e){return e.Current?(d=e,!0):!1}),o.currentBranch=d,!o.currentBranch||!d.RemoteLocation[0])return o.isRebasing()?(s.setTitle(t.RebaseProgress),i([])):(s.setTitle(t.NoBranch),i(o.processChildren(e,[]))),void a.done();r.ActiveBranch=d.CommitLocation,r.Branches=h;var u=o.getLocalBranch(),p=o.getRemoteBranch();return s.setTitle(u&&!o.legacyLog?c.formatMessage(t['Commits for "${0}" branch against'],u.Name):c.formatMessage(t['Commits for "${0}" branch'],p.Name)),a.done(),o.legacyLog?n.when(o.log||o._getLog(),function(t){e.log=t,o.logDeferred.resolve(t),i(o.processChildren(e,t.Children))},function(e){o.handleError(e)}):void i(o.processChildren(e,[{Type:"Outgoing",localBranch:u,remoteBranch:p},{Type:"Incoming",localBranch:u,remoteBranch:p},{Type:"Synchronized"}]))},function(e){a.done(),o.handleError(e)})},function(e){a.done(),o.handleError(e)})}else if("Incoming"===e.Type){if(!r)return n.when(o.log||o._getLog(),function(t){var n=[];"RemoteTrackingBranch"===t.toRef.Type&&(n=t.Children),i(o.processChildren(e,n))},function(e){o.handleError(e)});n.when(o.incomingCommits||o._getIncoming(),function(t){i(o.processChildren(e,t))},function(e){o.handleError(e)})}else if("Outgoing"===e.Type){if(!r)return n.when(o.log||o._getLog(),function(t){var n=[];"Branch"===t.toRef.Type&&(n=t.Children),i(o.processChildren(e,n))},function(e){o.handleError(e)});n.when(o.outgoingCommits||o._getOutgoing(),function(t){i(o.processChildren(e,t))},function(e){o.handleError(e)})}else if("Synchronized"===e.Type){if(r)return n.when(o.log||o._getLog(),function(t){e.log=t,o.logDeferred.resolve(t);var r="RemoteTrackingBranch"===t.toRef.Type;n.when(r?o.incomingCommits||o._getIncoming():o.outgoingCommits||o._getOutgoing(),function(n){var r=[];t.Children.forEach(function(e){n.some(function(t){return t.Name===e.Name})||r.push(e)}),i(o.processChildren(e,r))},function(e){o.handleError(e)})},function(e){o.handleError(e)});i(o.processChildren(e,[]))}else i([])},getId:function(e){return e.Name||e.Type},processChildren:function(e,t){return 0===t.length&&(t=[{Type:"NoCommits"}]),t.forEach(function(t){t.parent=e}),e.children=t,t}}),g.prototype=Object.create(o.Explorer.prototype),p.mixin(g.prototype,{changedItem:function(e){var i=new n,o=this,r=this.model;e||r.getRoot(function(t){e=t}),"CommitRoot"===e.Type&&(r.incomingCommits=r.outgoingCommits=null),e.children=r.log=null,r.logDeferred=new n;var s=this.section.createProgressMonitor();return s.begin(t["Getting git log"]),r.getChildren(e,function(t){e.removeAll=!0,o.myTree.refresh.bind(o.myTree)(e,t,!1),o.myTree.expand(o.model.getId(t[0])),o.myTree.expand(o.model.getId(t[1])),o.location&&o.myTree.expand(o.model.getId(t[2])),"Synchronized"===e.Type?o.updatePageCommands(e):o.updateCommands(),s.done(),i.resolve(t)}),i},display:function(){var e=this,t=new n,i=new m({root:this.root,registry:this.registry,progressService:this.progressService,statusService:this.statusService,gitClient:this.gitClient,section:this.section,location:this.location,handleError:this.handleError,legacyLog:this.legacyLog});return this.createTree(this.parentId,i,{onComplete:function(){e.status=i.status;var n=function(){e.model.getRoot(function(t){e.model.getChildren(t,function(t){e.myTree.expand(e.model.getId(t[0])),e.myTree.expand(e.model.getId(t[1])),e.location&&e.myTree.expand(e.model.getId(t[2]))})}),e.updateCommands(),t.resolve(i.log)};e.fetch().then(n,n)}}),t},createCommands:function(){var e=this.commandService,n=new i.Command({name:t["Next Page >"],tooltip:t["Show next page of git log"],id:"eclipse.orion.git.commit.nextPage",callback:function(e){var t=e.items;t.log&&(e.handler.model.location=t.log.NextLocation,e.handler.changedItem(t))},visibleWhen:function(e){return!!e.log.NextLocation}});e.addCommand(n);var o=new i.Command({name:t["< Previous Page"],tooltip:t["Show previous page of git log"],id:"eclipse.orion.git.commit.previousPage",callback:function(e){var t=e.items;t.log&&(e.handler.model.location=t.log.PreviousLocation,e.handler.changedItem(t))},visibleWhen:function(e){return!!e.log.PreviousLocation}});e.addCommand(o);var r=new i.Command({name:t["Choose Branch"],tooltip:t["Choose the remote branch."],id:"eclipse.orion.git.commit.chooseBranch",callback:function(e){var t=e.handler,i=t.model;l({serviceRegistry:t.registry,commandService:t.commandService}).chooseRemote(i.root.repository,i.log?i.log.toRef:i.currentBranch).then(function(t){var i=e.handler.model;i.remoteBranch=t,i.getRoot(function(t){e.handler.changedItem(t)})})},visibleWhen:function(e){var i=e,n=i.Name;return"RemoteTrackingBranch"!==i.Type||i.Id||(n+=t[" [New branch]"]),r.name=n,!0}});e.addCommand(r)},fetch:function(){var e=this.model;if(e.tracksRemoteBranch()&&!this.legacyLog){var t=this.commandService,i=e.getRemoteBranch(),o=e.getLocalBranch();return t.runCommand("eclipse.orion.git.fetch",{LocalBranch:o,RemoteBranch:i,noAuth:!0},this)}return(new n).resolve()},updateCommands:function(){var e=this.model,t=e.currentBranch,i=this.root.repository,n=this.commandService,o=this.section,r=o.actionsNode.id,s=o.titleLeftActionsNode.id;if(!t&&e.isRebasing())n.registerCommandContribution(r,"eclipse.orion.git.resetCommand",100),n.registerCommandContribution(r,"eclipse.orion.git.rebaseContinueCommand",200),n.registerCommandContribution(r,"eclipse.orion.git.rebaseSkipPatchCommand",300),n.registerCommandContribution(r,"eclipse.orion.git.rebaseAbortCommand",400),n.renderCommands(r,r,i.status,this,"button");else if(t&&!this.legacyLog){var a=this.incomingActionScope,l=this.outgoingActionScope;u.node(r)&&n.destroy(r),u.node(s)&&n.destroy(s),u.node(a)&&n.destroy(a),u.node(l)&&n.destroy(l);var c=e.tracksRemoteBranch(),d=e.getLocalBranch(),h=e.getRemoteBranch();c&&(n.registerCommandContribution(a,"eclipse.orion.git.fetch",100),n.registerCommandContribution(a,"eclipse.orion.git.merge",300),n.registerCommandContribution(a,"eclipse.orion.git.rebase",200),n.registerCommandContribution(a,"eclipse.orion.git.resetIndex",400),h.GitUrl=d.RemoteLocation[0].GitUrl,n.renderCommands(a,a,h,this,"button"),n.registerCommandContribution(r,"eclipse.orion.git.sync",100),n.renderCommands(r,r,{LocalBranch:d,RemoteBranch:h},this,"button")),n.registerCommandContribution(s,"eclipse.orion.git.commit.chooseBranch",100),n.renderCommands(s,s,h,this,"button"),n.addCommandGroup(l,"eclipse.gitPushGroup",1e3,"Push",null,null,null,"Push",null,"eclipse.orion.git.push"),n.registerCommandContribution(l,"eclipse.orion.git.push",1100,"eclipse.gitPushGroup"),n.registerCommandContribution(l,"eclipse.orion.git.pushBranch",1200,"eclipse.gitPushGroup"),n.registerCommandContribution(l,"eclipse.orion.git.pushToGerrit",1200,"eclipse.gitPushGroup"),n.renderCommands(l,l,{LocalBranch:d,RemoteBranch:h},this,"button")}},updatePageCommands:function(e){var t=this;this.model.logDeferred.then(function(){var i=t.commandService;u.node(t.syncActionScope)&&i.destroy(t.syncActionScope),i.registerCommandContribution(t.syncActionScope,"eclipse.orion.git.commit.nextPage",200),i.registerCommandContribution(t.syncActionScope,"eclipse.orion.git.commit.previousPage",100),i.renderCommands(t.syncActionScope,t.syncActionScope,e,t,"button")})}}),f.prototype=Object.create(o.SelectionRenderer.prototype),p.mixin(f.prototype,{getCellElement:function(i,n,o){var r=this.explorer,l=n;switch(i){case 0:var c=document.createElement("td"),u=document.createElement("div");c.appendChild(u);var p=document.createElement("div");p.style.overflow="hidden",u.appendChild(p);var m,g,f;if("Commit"!==n.Type){if("NoCommits"!==n.Type){u.className="gitCommitSectionTableItem";var y=document.createElement("div");y.style.display="inline-block",y.style.styleFloat="left",y.style.cssFloat="left";var C=this.getExpandImage(o,y);"Synchronized"===n.Type&&C.addEventListener("click",function(){r.updatePageCommands(n)}),p.appendChild(y),o.classList.add("gitCommitListSection")}else o.classList.add("gitCommitListNoCommit"),u.classList.add("sectionTableItem");g=document.createElement("div"),g.className="stretch",p.appendChild(g);var w=document.createElement("div");w.textContent=t[n.Type],"NoCommits"!==n.Type&&w.classList.add("gitCommitListSectionTitle"),g.appendChild(w),f=document.createElement("ul"),f.className="layoutRight commandList",f.id=n.Type+"Actions",p.appendChild(f),p.classList.add("toolComposite");var _=a.slideoutHTMLFragment(f.id),b=document.createElement("div");b.innerHTML=_,p.appendChild(b)}else{if(u.className="sectionTableItem",l.AuthorImage){var S=document.createElement("div");S.style["float"]="left";var L=new Image;L.src=l.AuthorImage,L.name=l.AuthorName,L.className="git-author-icon",S.appendChild(L),p.appendChild(S)}g=document.createElement("div"),g.className="stretch",p.appendChild(g);var E=document.createElement("a");E.className="navlinkonpage",E.href=e.toUrl(v.expand({resource:l.Location})),E.textContent=s.trimCommitMessage(l.Message),g.appendChild(E),d.addNavGrid(this.explorer.getNavDict(),n,E),new h.CommitTooltipDialog({commit:l,triggerNode:E});var R=document.createElement("div");g.appendChild(R),m=document.createElement("div"),m.textContent=t[" (SHA "]+l.Name+t[") by "]+l.AuthorName+t[" on "]+new Date(l.Time).toLocaleString(),g.appendChild(m);var P=document.createElement("div");if(P.textContent=t["Tags:"],P.className="gitCommitListTagsTitle",l.Tags&&l.Tags.length)l.Tags.forEach(function(e){var t=document.createElement("span");t.textContent=e.Name,t.className="gitCommitListTag",P.appendChild(t);var i=document.createElement("span");i.className="core-sprite-close gitCommitListTagClose",i.addEventListener("click",function(){r.commandService.runCommand("eclipse.removeTag",e,r)}),t.appendChild(i)});else{var T=document.createElement("span");T.textContent=t.None,P.className="gitCommitListNoTag",P.appendChild(T)}g.appendChild(P);var k="itemLevelCommands";f=document.createElement("ul"),f.className="layoutRight commandList",f.id=k,p.appendChild(f),r.commandService.renderCommands(k,f,n,r,"tool")}return c}},emptyCallback:function(e){var i=document.createElement("tr"),n=document.createElement("td");n.colSpan=1;var o=document.createElement("div");if(o.classList.add("sectionTableItem"),this.explorer.model.isRebasing())o.style.whiteSpace="pre",o.appendChild(document.createTextNode(t.RebaseProgressDetails));else{var r=document.createElement("div");r.textContent=t["The branch is up to date."],o.appendChild(r);var s=document.createElement("div");s.textContent=t["You have no outgoing or incoming commits."],o.appendChild(s)}n.appendChild(o),i.appendChild(n),e.appendChild(i)}}),{GitCommitListExplorer:g,GitCommitListRenderer:f}}),define("orion/section",["orion/webui/littlelib","orion/selection","orion/commandRegistry","orion/commonHTMLFragments","orion/objects","orion/selection"],function(e,t,i,n,o,r){function s(t,i){var o=this;if(this._expandImageClass="core-sprite-openarrow",this._collapseImageClass="core-sprite-closedarrow",this._progressImageClass="core-sprite-progress",this._twistieSpriteClass="modelDecorationSprite",!i.id)throw new Error("Missing required argument: id");if(this.id=i.id,!i.title)throw new Error("Missing required argument: title");var r=i.useAuxStyle?["sectionWrapper","sectionWrapperAux","toolComposite"]:["sectionWrapper","toolComposite"];this.domNode=document.createElement("div"),t.appendChild(this.domNode);for(var s=0;s<r.length;s++)this.domNode.classList.add(r[s]);this.domNode.id=i.id,i.canHide&&(this.twistie=document.createElement("span"),this.twistie.classList.add("modelDecorationSprite"),this.twistie.classList.add("layoutLeft"),this.twistie.classList.add("sectionTitleTwistie"),this.domNode.style.cursor="pointer",this.domNode.appendChild(this.twistie),this.domNode.tabIndex=0,this.domNode.addEventListener("click",function(e){(e.target===o.titleNode||e.target===o.twistie||e.target===o.domNode)&&o._changeExpandedState()},!1),this.domNode.addEventListener("keydown",function(t){t.keyCode!==e.KEY.ENTER||t.target!==o.domNode&&t.target!==o.titleNode&&t.target!==o.twistie||o._changeExpandedState()},!1));var a;if(i.iconClass){var l=document.createElement("span");l.classList.add("sectionIcon"),this.domNode.appendChild(l),a=Array.isArray(i.iconClass)?i.iconClass:[i.iconClass],a.forEach(function(e){l.classList.add(e)})}if(i.headerClass&&(a=Array.isArray(i.headerClass)?i.headerClass:[i.headerClass],a.forEach(function(e){this.domNode.classList.add(e)}.bind(this))),this.titleActionsNode=document.createElement("div"),this.titleActionsNode.id=i.id+"TitleActionsArea",this.titleActionsNode.classList.add("layoutLeft"),this.titleActionsNode.classList.add("sectionActions"),this.domNode.appendChild(this.titleActionsNode),this.titleNode=document.createElement("div"),this.titleNode.id=i.id+"Title",this.titleNode.classList.add("sectionAnchor"),this.titleNode.classList.add("sectionTitle"),this.titleNode.classList.add("layoutLeft"),this.domNode.appendChild(this.titleNode),this.titleNode.textContent=i.title,"function"==typeof i.getItemCount){var c=document.createElement("div");c.classList.add("layoutLeft"),c.classList.add("sectionItemCount"),this.domNode.appendChild(c),c.textContent=i.getItemCount(this)}this._progressNode=document.createElement("div"),this._progressNode.id=i.id+"Progress",this._progressNode.classList.add("sectionProgress"),this._progressNode.classList.add("sectionTitle"),this._progressNode.classList.add("layoutLeft"),this._progressNode.style.display="none",this._progressNode.textContent="...",this.domNode.appendChild(this._progressNode),this.titleLeftActionsNode=document.createElement("div"),this.titleLeftActionsNode.id=i.id+"LeftTitleActionsArea",this.titleLeftActionsNode.classList.add("layoutLeft"),this.titleLeftActionsNode.classList.add("sectionActions"),this.domNode.appendChild(this.titleLeftActionsNode);var d=document.createElement("div");if(d.id=i.id+"FilterSearchBox",this.domNode.appendChild(d),this._toolActionsNode=document.createElement("div"),this._toolActionsNode.id=i.id+"ToolActionsArea",this._toolActionsNode.classList.add("layoutRight"),this._toolActionsNode.classList.add("sectionActions"),this.domNode.appendChild(this._toolActionsNode),this.actionsNode=document.createElement("ul"),this.actionsNode.id=i.id+"ActionArea",this.actionsNode.classList.add("layoutRight"),this.actionsNode.classList.add("commandList"),this.actionsNode.classList.add("sectionActions"),this.domNode.appendChild(this.actionsNode),this.selectionNode=document.createElement("ul"),this.selectionNode.id=i.id+"SelectionArea",this.selectionNode.classList.add("layoutRight"),this.selectionNode.classList.add("commandList"),this.selectionNode.classList.add("sectionActions"),this.domNode.appendChild(this.selectionNode),i.slideout){var h=n.slideoutHTMLFragment(i.id),u=document.createRange();u.selectNode(this.domNode),h=u.createContextualFragment(h),this.domNode.appendChild(h)}if(this._contentParent=document.createElement("div"),this._contentParent.id=this.id+"Content",this._contentParent.role="region",this._contentParent.classList.add("sectionTable"),this._contentParent.setAttribute("aria-labelledby",this.titleNode.id),t.appendChild(this._contentParent),i.content&&this.setContent(i.content),"function"==typeof i.onExpandCollapse&&(this._onExpandCollapse=i.onExpandCollapse),this._preferenceService=i.preferenceService,this._collapse(),this._preferenceService){var p=this;this._preferenceService.getPreferences("/window/views").then(function(e){var t=e.get(p.id);void 0===t?i.hidden||p._expand():t&&p._expand(),p._updateExpandedState(!1)})}else i.hidden||this._expand(),this._updateExpandedState(!1);this._commandService=i.commandService,this._lastMonitor=0,this._loading={}}function a(e){this._section=e,this._id=++e._lastMonitor}return s.prototype={setTitle:function(e){this.titleNode.textContent=e},getHeaderElement:function(){return this.domNode},getTitleElement:function(){return this.titleNode},getActionElement:function(){return this._toolActionsNode},setContent:function(e){"string"==typeof e?this._contentParent.innerHTML=e:(this._contentParent.innerHTML="",this._contentParent.appendChild(e))},getContentElement:function(){return this._contentParent},embedExplorer:function(t,i,n){this._contentParent.innerHTML="",t.parent||(t.parent=i),this._contentParent.appendChild(t.parent),t.section=this,o.mixin(t,{createActionSections:function(){this.actionsSections&&this.actionsSections.forEach(function(t){if(!e.node(t)){var i=document.createElement("ul");i.id=t,i.classList.add("commandList"),i.classList.add("layoutRight"),this.section.actionsNode.appendChild(i)}}.bind(this))},getCommandsVisible:function(){return"hidden"!==this.section.actionsNode.style.visibility},setCommandsVisible:function(t,i){this.section.actionsNode.style.visibility=t?"":"hidden",void 0===i&&(i=t?null:"cursorOnly"),this.renderer.selectionPolicy=i;var n=this.getNavHandler();n&&n.setSelectionPolicy(i),t?this.updateCommands():this.actionsSections&&this.actionsSections.forEach(function(t){e.node(t)&&this.commandRegistry.destroy(t)}.bind(this))},destroy:function(){Object.getPrototypeOf(this).destroy.call(this);var e=this;this.actionsSections&&(this.actionsSections.forEach(function(t){delete e[t]}),delete this.actionsSections)},updateCommands:function(e){this.section.actionsNode&&this.getCommandsVisible()&&(this.createActionSections(),Object.getPrototypeOf(this).updateCommands.call(this,e))},loaded:function(){var e=this;this.selection||n||(this.serviceRegistry||this.registry?(this.selection=new r.Selection(this.serviceRegistry||this.registry,this.parent.id+"Selection"),this.selection.addEventListener("selectionChanged",function(t){e.updateCommands(t.selections)})):window.console.error("Could not create a Selection for the explorer because of lack of serviceRegistry"));var t=this.registerCommands();t&&t.then?t.then(function(){e.updateCommands()}):e.updateCommands()}}),t.renderer&&(t.renderer.section=this,o.mixin(t.renderer,{getCellHeaderElement:function(e){var t=Object.getPrototypeOf(this).getCellHeaderElement.call(this,e);return t&&this.section.setTitle(t.innerHTML),null}}))},createProgressMonitor:function(){return new a(this)},_setMonitorMessage:function(e,t){this._progressNode.style.display="block",this._loading[e]=t;var i="";for(var n in this._loading)""!==i&&(i+="\n"),i+=this._loading[n];this._progressNode.title=i,this._updateExpandedState(!1)},_monitorDone:function(e){delete this._loading[e];var t="";for(var i in this._loading)""!==t&&(t+="\n"),t+=this._loading[i];this._progressNode.title=t,""===t&&(this._progressNode.style.display="none"),this._updateExpandedState(!1)},_changeExpandedState:function(){this.hidden?this._expand():this._collapse(),this._updateExpandedState(!0)},_updateExpandedState:function(e){var t=!this.hidden,i=this.working,n=this.twistie,o=this.id;n&&(n.classList.remove(this._expandImageClass),n.classList.remove(this._collapseImageClass),n.classList.remove(this._progressImageClass),n.classList.add(i?this._progressImageClass:t?this._expandImageClass:this._collapseImageClass)),this._preferenceService&&e&&this._preferenceService.getPreferences("/window/views").then(function(e){e.put(o,t)}),this._onExpandCollapse&&this._onExpandCollapse(t,this)},_expand:function(){this._contentParent.classList.remove("sectionClosed"),this.domNode.classList.remove("sectionClosed"),this.hidden=!1},_collapse:function(){this.hidden=!0,this._contentParent.classList.add("sectionClosed"),this.domNode.classList.add("sectionClosed")}},s.prototype.constructor=s,a.prototype={begin:function(e){this._section.working=!0,this.status=e,this._section._setMonitorMessage(this.id,e)},worked:function(e){this.status=e,this._section._setMonitorMessage(this.id,e)},done:function(e){this._section.working=!1,this.status=e,this._section._monitorDone(this.id)}},a.prototype.constructor=a,{Section:s}}),define("orion/compare/compareUtils",["orion/URITemplate"],function(e){var t=t||{};return t.compareUtils=t.compareUtils||{},t.compareUtils.lookUpMapper=function(e,t,i){for(var n=0,o=0;o<e.length;o++){var r=e[o][t];if(0===r&&(r=1),i>=n&&n+r>i)return{mapperIndex:o,startFrom:n};if(o===e.length-1)break;n+=e[o][t]}return{mapperIndex:e.length-1,startFrom:n}},t.compareUtils.lookUpLineIndex=function(e,t,i){if(0===i)return 0;for(var n=0,o=0;i>o;o++)n+=e[o][t];return n},t.compareUtils.updateMapper=function(e,i,n,o,r){if(o!==r&&(o>0||r>0)){var s=t.compareUtils.lookUpMapper(e,i,n);if(s.mapperIndex<0)return;if(o>0)for(var a=o,l=n-s.startFrom,c=s.mapperIndex;c<e.length;c++){var d=e[c][i]-l;if(d>=a){e[c][i]-=a;break}e[c][i]-=d,a-=d,l=0}r>0&&(e[s.mapperIndex][i]+=r)}},t.compareUtils.overlapMapper=function(e,t,i,n,o){var r=i+e[t]-1;return i>r&&(r=i),n>o&&(o=n),n>r||i>o?!1:!0},t.compareUtils.findFirstDiff=function(e,i,n,o){for(var r=0,s=null,a=0;a<e.length&&!(r>o)&&(!t.compareUtils.overlapMapper(e[a],i,r,n,o)||(s={mapperIndex:a,startFrom:r},0===e[a][2]));a++)r+=e[a][i];return s},t.compareUtils.matchMapper=function(e,i,n,o){if(0===e.length)return n;var r=n+Math.round((o-n)/3),s=t.compareUtils.findFirstDiff(e,i,n,o),a=0===e[s.mapperIndex][i]?s.startFrom:s.startFrom+e[s.mapperIndex][i]-1,l=t.compareUtils.lookUpLineIndex(e,1-i,s.mapperIndex),c=s.startFrom-n;if(0===e[s.mapperIndex][2])return l-c;if(r>=s.startFrom&&a>=r)return l-Math.round((o-n)/3);if(r<s.startFrom)return l-c;var d=0===e[s.mapperIndex][1-i]?l:l+e[s.mapperIndex][1-i]-1;return d-(a-n)},t.compareUtils.getMapperLineCount=function(e){for(var t=0,i=0;i<e.length;i++)t+=Math.max(e[i][0],e[i][1]);return t},t.compareUtils.getAnnotationIndex=function(e,t){for(var i=0;i<e.length;i++)if(e[i][0]===t)return i;return-1},t.compareUtils.getAnnotationMapperIndex=function(e,t){return e[t][1]},t.compareUtils.getAnnotationIndexByMapper=function(e,t){for(var i=0;i<e.length;i++)if(e[i][1]===t)return{current:i,prev:i-1,next:i+1};return{current:-1,prev:-1,next:-1}},t.compareUtils.isMapperConflict=function(e,t){return 0>t?!1:e[t][3]?1===e[t][3]:!1},t.compareUtils.mergeDiffBlocks=function(e,t,i,n,o,r){for(var s=0;s<t.length;s++){var a=t[s][0],l=t[s][1],c=i[l];if(c[0]>0){for(var d="",h=0;h<c[0];h++){var u=n[c[2]-1+h];d=d+u.substring(o)+r}var p=e.getLineCount();if(a>=p){var m=e.getLineEnd(p-1),g=e.getLineEnd(p-1,!0);
m===g?(e.setText(r,m,m),a=p):a=p-1}var f=e.getLineStart(a);e.setText(d,f,f)}}},t.compareUtils.generateCompareHref=function(t,i){var n=require.toUrl("compare/compare.html");i.conflict||(i.conflict=void 0),i.readonly||(i.readonly=void 0);var o=new e(n+"#{,resource,params*}").expand({resource:t,params:i});return o},t.compareUtils.generateCompareTreeHref=function(t,i){var n=require.toUrl("compare-tree/compare-tree.html"),o=new e(n+"#{,resource,params*}").expand({resource:t,params:i});return o},t.compareUtils}),define("orion/git/gitConfigPreference",["orion/Deferred"],function(e){function t(e){this._prefix="/git/config",this._preferenceService=e.getService("orion.core.preference")}return t.prototype={getConfig:function(){var t=new e;return this._preferenceService.getPreferences(this._prefix).then(function(e){var i=e.get("userInfo");t.resolve(i)}),t},setConfig:function(t){var i=new e;return this._preferenceService.getPreferences(this._prefix).then(function(e){e.put("userInfo",t),i.resolve()}),i}},t.prototype.constructor=t,t}),define("orion/git/widgets/ReviewRequestDialog",["i18n!git/nls/gitmessages","orion/webui/dialog"],function(e,t){function i(e){this._init(e)}return i.prototype=new t.Dialog,i.prototype.TEMPLATE='<div><div id="treeContentPane" style="padding: 8px"><label for="reviewReqUrl">${Paste link in email or IM}</label><br><input id="reviewReqUrl" style="width: 50em" value=""/></div><div id="newBranchPane" style="padding: 8px"><label for="reviewerName">${Send the link to the reviewer}</label><br><input id="reviewerName" style="width: 30em"  value=""/></div></div>',i.prototype._init=function(t){var i=this;this.title=t.title||e["Contribution Review Request"],this.modal=!0,this.messages=e,this.url=t.url,this.func=t.func,this.buttons=[],this.buttons.push({callback:function(){i.destroy(),i.func(i.$reviewerName.value)},text:e.Submit}),this._initialize()},i.prototype._bindToDom=function(){this.$reviewReqUrl.value=this.url},i.prototype.constructor=i,{ReviewRequestDialog:i}}),define("orion/fileUtils",["require","i18n!orion/nls/messages","orion/URL-shim"],function(e){function t(e){if(!e)return e;var t=window.location.protocol+"//"+window.location.host;return 0===e.indexOf(t)?e.substring(t.length):e}function i(e){if(!e)return!1;if("/workspace"===e)return!0;var t=new URL(e,window.location.href);return 0===t.href.indexOf(n)}var n;return n=e.toUrl?new URL(e.toUrl("workspace"),window.location.href).href:new URL("/",window.location.href).href,{makeRelative:t,isAtRoot:i}}),define("orion/explorers/explorer-table",["i18n!orion/navigate/nls/messages","orion/Deferred","orion/webui/littlelib","orion/i18nUtil","orion/fileUtils","orion/explorers/explorer","orion/EventTarget","orion/objects","orion/util"],function(e,t,i,n,o,r,s,a,l){function c(e,t,i,n,o,r){this.registry=e,this.root=t,this.fileClient=i,this.idPrefix=n||"",this.excludeFiles=!!o,this.excludeFolders=!!r}function d(e){s.attach(this),this.registry=e.serviceRegistry,this.treeRoot=e.treeRoot,this.selection=e.selection,this.fileClient=e.fileClient,this.excludeFiles=e.excludeFiles,this.excludeFolders=e.excludeFolders,this.navHandlerFactory=e.navHandlerFactory,this.parentId=e.parentId,this.renderer=e.rendererFactory(this),this.dragAndDrop=e.dragAndDrop,this.setFocus=e.setFocus,this.model=null,this.myTree=null,this.checkbox=!1,this._hookedDrag=!1;var t=e.modelEventDispatcher?e.modelEventDispatcher:new s;this.modelEventDispatcher=t;var n=this;this._modelListeners={},["copy","copyMultiple","create","delete","deleteMultiple","import","move","moveMultiple"].forEach(function(e){t.addEventListener(e,n._modelListeners[e]=n.modelHandler[e].bind(n))}),this._clickListener=function(e){if("A"===e.target.tagName){for(var t=e.target;t&&!t._item;)t=t.parentNode;t&&t._item&&n.onLinkClick({type:"linkClick",item:t._item})}};var o=i.node(this.parentId);o&&o.addEventListener("click",this._clickListener);var r=this.renderer;this.registry&&this.registry.registerService("orion.cm.managedservice",{updated:function(e){var t;t=e&&"undefined"!==e["links.newtab"]&&e["links.newtab"]?"_blank":"_self",r.setTarget&&r.setTarget(t)}},{pid:"nav.config"})}c.prototype=new r.ExplorerModel,a.mixin(c.prototype,{getRoot:function(e){e(this.root)},processParent:function(e,t){var i=e.Projects?[]:[e].concat(e.Parents||[]);if(this.excludeFiles||this.excludeFolders){var n=[];for(var o in t){var r=t[o].Directory?this.excludeFolders:this.excludeFiles;r||(n.push(t[o]),t[o].parent=e,t[o].Parents||(t[o].Parents=i))}t=n}else for(var s in t)t[s].parent=e,t[s].Parents||(t[s].Parents=i);return e.children=t,e.children.sort(this.sortChildren),t},sortChildren:function(e,t){var i=e.Directory,n=t.Directory;if(i!==n)return i?-1:1;var o=e.Name&&e.Name.toLowerCase(),r=t.Name&&t.Name.toLowerCase();return r>o?-1:o>r?1:0},getChildren:function(t,i){var n=this;if(t.children)i(t.children);else if(void 0!==t.Directory&&t.Directory===!1)i([]);else if(t.Children)i(n.processParent(t,t.Children));else if(t.Location){var o=null;this.registry&&(o=this.registry.getService("orion.page.progress")),(o?o.progress(this.fileClient.fetchChildren(t.ChildrenLocation),e["Fetching children of "]+t.Name):this.fileClient.fetchChildren(t.ChildrenLocation)).then(function(e){n.destroyed||i(n.processParent(t,e))},function(){i([])})}else i([])},hasChildren:function(){var e=!1;return this.root.Children&&(e=this.root.Children.length>0),e}}),c.prototype.constructor=c;var h,u;return d.prototype=Object.create(r.Explorer.prototype),a.mixin(d.prototype,{destroy:function(){var e=this;Object.keys(this._modelListeners).forEach(function(t){e.modelEventDispatcher.removeEventListener(t,e._modelListeners[t])});var t=i.node(this.parentId);t&&t.removeEventListener("click",this._clickListener),r.Explorer.prototype.destroy.call(this)},onLinkClick:function(e){this.dispatchEvent(e)},onModelCreate:function(e){return this.changedItem(e.parent,!0)},onModelCopy:function(e){var i=this,n={};return(e.items||[e]).forEach(function(e){var t=e.parent;t=t||i.treeRoot,n[t.Location]=t}),t.all(Object.keys(n).map(function(e){return i.changedItem(n[e],!0)}))},onModelMove:function(e){var i=this,n={};return(e.items||[e]).forEach(function(e){var o=i.treeRoot;if((o.Location||o.ContentLocation)===e.oldValue.Location){var r=i.treeRoot,s=e.newValue,a=s.ChildrenLocation?s:this.fileClient.read(s.ContentLocation,!0);return t.when(a,function(e){i.dispatchEvent({type:"rootMoved",oldValue:r,newValue:e}),i.loadResourceList(e)})}var l=e.oldValue.parent;l=l||i.treeRoot,n[l.Location]=l,l=e.parent,l=l||i.treeRoot,n[l.Location]=l,e.oldValue.Directory&&e.newValue&&i.isExpanded(e.oldValue)&&(n[e.newValue.Location]=e.newValue)}),t.all(Object.keys(n).map(function(e){return i.changedItem(n[e],!0)}))},onModelDelete:function(e){var i,n=e.items||[e],o=this,r=o.treeRoot,s=n.some(function(e){return e.oldValue.Location===(r.Location||r.ContentLocation)?(e.oldValue.Location!==(e.parent.Location||e.parent.ContentLocation)&&(i=e.parent),!0):!1});if(s)return this.loadResourceList(i);var a={};return n.forEach(function(e){var t=e.parent;a[t.Location]=t}),t.all(Object.keys(a).map(function(e){return o.changedItem(a[e],!0)}))},modelHandler:{copy:function(e){return e.count?void 0:this.onModelCopy(e)},copyMultiple:function(e){return this.onModelCopy(e)},create:function(e){return this.onModelCreate(e)},"delete":function(e){return e.count?void 0:this.onModelDelete(e)},deleteMultiple:function(e){return this.onModelDelete(e)},"import":function(e){var t=e.target;return this.changedItem(t,!0)},move:function(e){return e.count?void 0:this.onModelMove(e)},moveMultiple:function(e){return this.onModelMove(e)}},makeNewChildItemPlaceholder:function(e,i,n){var o=new t;return this.model.getChildren(e,function(t){var r=null,s=!1;if(t){t.push(i),t.sort(this.model.sortChildren);var a=t.indexOf(i),l=a+1;if(t.length>l)r=t[l];else{var c=a-1;r=c>=0?t[c]:e,s=!0}}else r=e;var d=this.makeNewItemPlaceholder(r,n,s);o.resolve(d)}.bind(this)),o},_makeDropTarget:function(r,s,a){function c(i,s,a,l,d,h){var u=!1,p=o.isAtRoot(s.Location);h?(u=!0,h.entryCount++):i.isDirectory&&(u=!0,h={entryCount:1,deferred:new t},a._makeUploadNode(s,i.name,!0).then(function(e){var t=function(){e.destroyFunction(),p?a.loadResourceList(a.treeRoot.Path,!0):a.changedItem(s)};h.deferred.then(t,t)}));var m=function(){h&&(h.entryCount--,0===h.entryCount&&h.deferred.resolve())},g=function(e){if(w){var t=null;t="string"==typeof e?{Severity:"Error",Message:e}:e&&e.error?{Severity:"Error",Message:e.error}:e,w.setProgressResult(t)}else window.console.log(e);m()};if(!s.Location&&s.fileMetadata&&(s=s.fileMetadata),i.isFile)p?g(e["You cannot copy files directly into the workspace.  Create a folder first."]):i.file(function(t){if(h){var i=t.name.indexOf(".zip")===t.name.length-4&&window.confirm(n.formatMessage(e["Unzip ${0}?"],t.name)),o={error:function(){var i=e["Uploading the following file failed: "]+t.name;w?w.setProgressResult({Severity:"Error",Message:i}):window.console.log(i)},loadend:m};l(s,t,a,i,!1,o,!0)}else a._uploadFile(r,t,!0)}.bind(this));else if(i.isDirectory){var f=i.createReader(),v=function(e){f.readEntries(function(t){for(var i=0;i<t.length;i++)c(t[i],e,a,l,d,h);m()})};p?(C?C.progress(d.createProject(s.ChildrenLocation,i.name),n.formatMessage(e["Creating ${0}"],i.name)):d.createProject(s.ChildrenLocation,i.name)).then(function(t){(C?C.progress(d.read(t.ContentLocation,!0),e["Loading "]+t.name):d.read(t.ContentLocation,!0)).then(function(e){v(e)},g)},g):(C?C.progress(d.createFolder(s.Location,i.name),n.formatMessage(e["Creating ${0}"],i.name)):d.createFolder(s.Location,i.name)).then(function(e){var t=a.modelEventDispatcher;u||t.dispatchEvent({type:"create",parent:r,newValue:e}),v(e)},g)}}if(this.dragAndDrop){var d=this,p=this.dragAndDrop,m=function(e){h=e.target};a&&(this._oldDragStart&&s.removeEventListener("dragstart",this._oldDragStart,!1),this._oldDragStart=m),s.addEventListener("dragstart",m,!1);var g=function(){h=null};a&&(this._oldDragEnd&&s.removeEventListener("dragend",this._oldDragEnd,!1),this._oldDragEnd=g),s.addEventListener("dragend",g,!1);var f=function(e){s.classList.remove("dragOver"),e.preventDefault(),e.stopPropagation()};a&&(this._oldDragLeave&&s.removeEventListener("dragleave",this._oldDragLeave,!1),this._oldDragLeave=f),s.addEventListener("dragleave",f,!1);var v=function(e){if(h){var t=l.isMac?e.altKey:e.ctrlKey;u=e.dataTransfer.dropEffect=t?"copy":"move"}else!l.isIE&&("all"===e.dataTransfer.effectAllowed||"uninitialized"===e.dataTransfer.effectAllowed||e.dataTransfer.effectAllowed.indexOf("copy")>=0)&&(e.dataTransfer.dropEffect="copy");s.classList.add("dragOver"),i.stop(e)};a&&(this._oldDragEnter&&s.removeEventListener("dragenter",this._oldDragEnter,!1),this._oldDragEnter=v),s.addEventListener("dragenter",v,!1);var y=function(e){if(h){var t=l.isMac?e.altKey:e.ctrlKey;u=e.dataTransfer.dropEffect=t?"copy":"move"}else!l.isIE&&("all"===e.dataTransfer.effectAllowed||"uninitialized"===e.dataTransfer.effectAllowed||e.dataTransfer.effectAllowed.indexOf("copy")>=0)&&(e.dataTransfer.dropEffect="copy");i.stop(e)};a&&!this._oldDragOver&&(s.addEventListener("dragover",y,!1),this._oldDragOver=y);var C=null,w=null;d.registry&&(C=d.registry.getService("orion.page.progress"),w=d.registry.getService("orion.page.message"));var _=function(e){if(w){var t=null;t="string"==typeof e?{Severity:"Error",Message:e}:e&&e.error?{Severity:"Error",Message:e.error}:e,w.setProgressResult(t)}else window.console.log(e)},b=function(t){var a,l;if(s.classList.remove("dragOver"),h){for(var m,g=d.fileClient,f=h;f;){if(f._item){m=f._item;break}f=f.parentNode}if(!m)return;var v="copy"===u,y=v?g.copyFile:g.moveFile;if(l=y.apply(g,[m.Location,r.Location,m.Name]),C){var w=n.formatMessage(e[v?"Copying ${0}":"Moving ${0}"],m.Location);l=C.showWhile(l,w)}l.then(function(e){var t=d.modelEventDispatcher;t.dispatchEvent({type:v?"copy":"move",oldValue:m,newValue:e,parent:r})},_)}else if(t.dataTransfer.items&&t.dataTransfer.items.length>0)for(a=0;a<t.dataTransfer.items.length;a++){var b=null;"function"==typeof t.dataTransfer.items[a].getAsEntry?b=t.dataTransfer.items[a].getAsEntry():"function"==typeof t.dataTransfer.items[a].webkitGetAsEntry&&(b=t.dataTransfer.items[a].webkitGetAsEntry()),b&&c(b,r,d,p,d.fileClient)}else if(t.dataTransfer.files&&t.dataTransfer.files.length>0)for(a=0;a<t.dataTransfer.files.length;a++){var S=t.dataTransfer.files[a];S.size||S.type?o.isAtRoot(r.Location)?_(e["You cannot copy files directly into the workspace.  Create a folder first."]):d._uploadFile(r,S,!0):_(n.formatMessage(e["Did not drop ${0}.  Folder drop is not supported in this browser."],S.name))}i.stop(t)};a&&(this._oldDrop&&s.removeEventListener("drop",this._oldDrop,!1),this._oldDrop=b),s.addEventListener("drop",b,!1)}},_uploadFile:function(t,i,o){var r=t;!r.Location&&r.fileMetadata&&(r=r.fileMetadata);var s=function(){this._makeUploadNode(r,i.name,!1).then(function(t){var o=t.refNode,s=t.progressBar,a=t.cancelButton,l=t.destroyFunction,c=this.registry.getService("orion.page.message"),d={progress:function(t){var i="";if(t.lengthComputable){i=Math.floor(t.loaded/t.total*100)+"%",s.style.width=i;var n=Math.round(t.loaded/1024),r=Math.round(t.total/1024);s.title=e["Upload progress: "]+i+",  "+n+"/"+r+" KB",o.title=s.title}},loadend:function(){l(),this.changedItem(r)}.bind(this),error:function(){var t=e["Uploading the following file failed: "]+i.name;c?c.setProgressResult({Severity:"Error",Message:t}):window.console.log(t)}},h=i.name.indexOf(".zip")===i.name.length-4&&window.confirm(n.formatMessage(e["Unzip ${0}?"],i.name)),u=this.dragAndDrop(r,i,this,h,!1,d,!0);a.addEventListener("click",function(){u.abort()})}.bind(this))}.bind(this);o?this.expandItem(r,!1).then(s):s()},_makeUploadNode:function(t,i,n){var o=this.getRow(t).id,r={Name:i,Directory:n};return this.makeNewChildItemPlaceholder(t,r,o).then(function(t){var o,r,s=null;if(t){s={},o=t.refNode,r=t.wrapperNode,o.classList.add("uploadNode"),s.refNode=o,s.wrapperNode=r;var a=document.createElement("span");a.classList.add("uploadNodeText"),a.appendChild(document.createTextNode(i)),o.appendChild(a);var l=document.createElement("span");l.classList.add("progressBarWrapper");var c=document.createElement("span");if(c.classList.add("progressBar"),l.appendChild(c),o.appendChild(l),s.progressBar=c,n)c.classList.add("continuous"),o.title=e["Uploading "]+i,c.title=o.title;else{var d=document.createElement("button");d.classList.add("imageSprite"),d.classList.add("core-sprite-delete"),d.classList.add("uploadCancelButton"),d.title=e["Cancel upload"],o.appendChild(d),s.cancelButton=d}s.destroyFunction=t.destroyFunction}return s}.bind(this))},createModel:function(){return new c(this.registry,this.treeRoot,this.fileClient,this.parentId,this.excludeFiles,this.excludeFolders)},changedItem:function(e,i){if(this.treeRoot&&this.treeRoot.Location===e.Location)return this.loadResourceList(this.treeRoot,i);var n=this,o=new t;return e.children=e.Children=null,this.model.getChildren(e,function(t){n.getNavHandler(),n.myTree.refresh.bind(n.myTree)(e,t,i),o.resolve(t)}),o},showItem:function(e,i){var n=new t;if(!e||!this.model||!this.myTree||!this.myTree.showRoot&&e.Location===this.treeRoot.Location)return n.reject();var o=this.getRow(e);return o?(n.resolve(o._item||e),n):e.Parents&&e.Parents.length>0?(e.Parents[0].Parents=e.Parents.slice(1),this.expandItem(e.Parents[0],i).then(function(i){var n=this.getRow(e);return n?n._item||e:this.changedItem(i,!0).then(function(){var i=this.getRow(e);return i?i._item:(new t).reject()}.bind(this))}.bind(this))):void 0===i||i?this.reroot(e):n.reject()},expandItem:function(e,i){var n=new t;return this.showItem(e,i).then(function(e){this.myTree.isExpanded(e)?n.resolve(e):this.myTree.expand(this.model.getId(e),function(){n.resolve(e)})}.bind(this),n.reject),n},reveal:function(e,t){return this.showItem(e,t).then(function(e){var t=this.getNavHandler();return t&&(t.cursorOn(e,!0),t.setSelection(e)),e}.bind(this))},reroot:function(){return(new t).reject()},isExpanded:function(e){var t=this.model.getId(e);return this.renderer.tableTree.isExpanded(t)},getNameNode:function(e){var t=this.model.getId(e);return t?i.node(t+"NameLink"):void 0},scopeUp:function(){},scopeDown:function(){},loadResourceList:function(i,n,r){if(i&&"object"==typeof i&&(i=i.ChildrenLocation||i.ContentLocation),i=o.makeRelative(i),!n&&i===this._lastPath)return(new t).resolve(this.treeRoot);this._lastPath=i;var s=this;return n||i!==this.treeRoot.Path?this.load(this.fileClient.loadWorkspace(i),e["Loading "]+i).then(function(){return s.treeRoot.Path=i,"function"==typeof r&&r(),s.dispatchEvent({type:"rootChanged",root:s.treeRoot}),(new t).resolve(s.treeRoot)},function(e){return s.treeRoot.Path=null,s.dispatchEvent({type:"rootChanged",root:s.treeRoot}),(new t).reject(e)}):(new t).resolve(s.treeRoot)},load:function(e,n,o){var r=i.node(this.parentId),s=i.node("progress");s||(s=document.createElement("div"),s.id="progress",i.empty(r),r.appendChild(s)),i.empty(s);var a=setTimeout(function(){i.empty(s),s.appendChild(document.createTextNode(n))},500),l=this;return t.when(e,function(e){if(clearTimeout(a),!l.destroyed){l.treeRoot={};for(var i in e)l.treeRoot[i]=e[i];if(l.model=l.createModel(),l.dragAndDrop)if(l._hookedDrag)l._makeDropTarget(l.treeRoot,r,!0);else{var n=r&&("draggable"in r||"ondragstart"in r&&"ondrop"in r);n=n&&!!(window.File&&window.FileList&&window.FileReader),l._hookedDrag=!0,n?l._makeDropTarget(l.treeRoot,r,!0):(l.dragAndDrop=null,window.console.log("Local file drag and drop is not supported in this browser."))}var s=new t;return l.createTree(l.parentId,l.model,{onComplete:function(e){s.resolve(e)},navHandlerFactory:l.navHandlerFactory,setFocus:"undefined"==typeof l.setFocus?!0:l.setFocus,selectionPolicy:l.renderer.selectionPolicy,onCollapse:function(e){l.getNavHandler()&&l.getNavHandler().onCollapse(e)}}),s.then(function(){if("function"==typeof o)try{o()}catch(e){l.registry&&l.registry.getService("orion.page.message").setErrorMessage(e)}return"function"==typeof l.onchange&&l.onchange(l.treeRoot),l.treeRoot})}},function(e){return clearTimeout(a),l.registry&&l.registry.getService("orion.page.message").setProgressResult(e),(new t).reject(e)})},onchange:function(){}}),d.prototype.constructor=d,{FileExplorer:d,FileModel:c}}),define("orion/webui/dialogs/DirectoryPrompterDialog",["i18n!orion/widgets/nls/messages","orion/webui/littlelib","orion/webui/dialog","orion/fileUtils","orion/selection","orion/explorers/navigationUtils","orion/explorers/explorer","orion/explorers/explorer-table"],function(e,t,i,n,o,r,s,a){function l(e,t){this.explorer=t,this._init(e)}function c(e){this._init(e)}return l.prototype=new s.SelectionRenderer,l.prototype.constructor=l,l.prototype.getLabelColumnIndex=function(){return 0},l.prototype.getCellElement=function(e,t,i){var n=document.createElement("td");i.appendChild(n);var o=document.createElement("span");o.id=i.id+"navSpan",n.appendChild(o),o.className="mainNavColumn singleNavColumn",this.getExpandImage(i,o),o.appendChild(document.createTextNode(t.Name))},c.prototype=new i.Dialog,c.prototype.TEMPLATE='<div id="message" style="width: 25em; padding-bottom: 5px;"></div><div id="directoryTree" class="explorerTreeClass" style="width:25em; min-height: 25em; max-height:30em; height: auto; overflow-y: auto;"></div>',c.prototype._init=function(t){this.title=t.title||e["Choose a Folder"],this.modal=!0,this.buttons=[{text:e.OK,isDefault:!0,callback:this.done.bind(this)}],this.customFocus=!0,this._fileClient=t.fileClient,this._serviceRegistry=t.serviceRegistry,this._message=t.message||"",this._func=t.func,this._initialize()},c.prototype._bindToDom=function(){this.loadFolderList("/"),this._message?this.$message.appendChild(document.createTextNode(this._message)):this.$message.style.display="none",this.$directoryTree.focus()},c.prototype.loadFolderList=function(e){e=n.makeRelative(e),this.selection=new o.Selection(this._serviceRegistry,"orion.directoryPrompter.selection"),this.explorer=new a.FileExplorer({treeRoot:{children:[]},selection:this.selection,serviceRegistry:this._serviceRegistry,fileClient:this._fileClient,parentId:"directoryTree",excludeFiles:!0,rendererFactory:function(e){return new l({checkbox:!1,singleSelection:!0,treeTableClass:"directoryPrompter"},e)}}),this.explorer.loadResourceList(e,!0,null)},c.prototype.done=function(){this.selection.getSelection(function(e){this.hide(),this._func(e)}.bind(this))},c.prototype.constructor=c,{DirectoryPrompterDialog:c}}),define("orion/git/widgets/CloneGitRepositoryDialog",["i18n!git/nls/gitmessages","orion/webui/dialogs/DirectoryPrompterDialog","orion/webui/dialog","orion/URITemplate","require"],function(e,t,i,n,o){function r(e){this._init(e)}var s=new n("edit/edit.html#{,resource,params*}");return r.prototype=new i.Dialog,r.prototype.TEMPLATE='<span id="basicPane"><div style="padding: 8px"><label for="gitUrl">${Repository URL:}</label><input id="gitUrl" style="width: 50em" value=""/></div><div style="padding: 8px; text-align: right;"><a id="advancedLink" href="javascript:">${Choose target location}</a><a id="advancedLinkHide" href="javascript:" style="display: none">${Default target location}</a></div></span><span id="advancedPane" style="display: none;"><div style="padding: 8px"><input id="isNewProject" type="radio" name="isNewProject" checked value="new"/><label for="gitName" style="padding: 0 8px">${New folder:}</label><input id="gitName" value=""></div><div style="padding: 8px"><input id="isExistingProject" type="radio" name="isNewProject" value="existing"/><label for="gitPath" style="padding: 0 8px">${Existing directory:}</label><input id="gitPath" type="hidden" value=""><span id="shownGitPath" style="padding-right: 24px"></span><a id="changeGitPath" href="javascript:">${Change...}</a></div></span>',r.prototype._init=function(t){var i=this;this.title=t.title?t.title:e["Clone Git Repository"],this.modal=!0,this.messages=e,this.advancedShown=!1,this.alwaysShowAdvanced=t.alwaysShowAdvanced,this.advancedOnly=t.advancedOnly,this.url=t.url,this.serviceRegistry=t.serviceRegistry,this.fileClient=t.fileClient,this.func=t.func,this.buttons=[],this.buttons.push({callback:function(){i.destroy(),i._execute()},text:"OK"}),this._initialize()},r.prototype._bindToDom=function(){var e=this;this.url&&(this.$gitUrl.value=this.url),this.advancedOnly&&(this.$basicPane.style.display="none",this.$advancedPane.style.display="",setTimeout(function(){e.$gitName.focus()},400)),this.$changeGitPath.addEventListener("click",function(){e._openDirectoryPickerDialog()}),this.$isExistingProject.addEventListener("click",function(){e._checkNewExisting()}),this.$isNewProject.addEventListener("click",function(){e._checkNewExisting()}),this.$gitName.addEventListener("focus",function(){e._showNewProject()}),this.$advancedLink.addEventListener("click",function(){e._showAdvanced()}),this.$advancedLinkHide.addEventListener("click",function(){e._hideAdvanced()}),this.alwaysShowAdvanced&&this._showAdvanced()},r.prototype._execute=function(){this.func&&this.func(this.advancedOnly?void 0:this.$gitUrl.value,this.advancedShown&&this.$isNewProject.checked?void 0:this.$gitPath.value,this.advancedShown&&!this.$isNewProject.checked?void 0:this.$gitName.value)},r.prototype._showAdvanced=function(){this.advancedShown=!0,this.$advancedPane.style.display="",this.$advancedLink.style.display="none",this.$advancedLinkHide.style.display=""},r.prototype._hideAdvanced=function(){this.advancedShown=!1,this.$advancedPane.style.display="none",this.$advancedLink.style.display="",this.$advancedLinkHide.style.display="none"},r.prototype._checkNewExisting=function(){this.$isExistingProject.checked?this._openDirectoryPickerDialog():this.$gitName.focus()},r.prototype._showNewProject=function(){this.$isNewProject.checked=!0},r.prototype._openDirectoryPickerDialog=function(){function i(e){var t=document.createElement("a");return t.href=o.toUrl(s.expand({resource:e.ChildrenLocation})),t.textContent=e.Name,t}var n=this;this.$isExistingProject.checked=!0;var r=new t.DirectoryPrompterDialog({title:e["Choose a Folder"],serviceRegistry:this.serviceRegistry,fileClient:this.fileClient,func:function(e){if(e&&e.Location){for(n.$gitPath.value=e.Location;n.$shownGitPath.hasChildNodes();)n.$shownGitPath.removeChild(n.$shownGitPath.lastChild);n.$shownGitPath.appendChild(i(e));for(var t=e;t.parent&&"/"!==t.parent.Location;)n.$shownGitPath.insertBefore(document.createTextNode("/"),n.$shownGitPath.firstChild),n.$shownGitPath.insertBefore(i(t.parent),n.$shownGitPath.firstChild),t=t.parent}}});this._addChildDialog(r),r.show()},r.prototype.constructor=r,{CloneGitRepositoryDialog:r}}),define("orion/git/widgets/OpenCommitDialog",["require","i18n!git/nls/gitmessages","orion/i18nUtil","orion/Deferred","orion/webui/dialog","orion/URITemplate","orion/webui/littlelib"],function(e,t,i,n,o,r,s){function a(e){this._init(e)}var l=new r("git/git-commit.html#{,resource,params*}?page=1&pageSize=1");return a.prototype=new o.Dialog,a.prototype.TEMPLATE='<div><label for="resourceName">${Type the commit name (sha1):}</label></div><div><input type="text" id="resourceName"></div><div id="results" style="max-height:400px; height:auto; overflow-y:auto;"></div>',a.prototype._init=function(e){if(this.title=e.title||t["Find Commit"],this.modal=!0,this.messages=t,this.SEARCH_DELAY=500,this.timeoutId=null,this.time=0,this.serviceRegistry=e.serviceRegistry,!this.serviceRegistry)throw new Error("Missing required argument: serviceRegistry");if(this.repositories=e.repositories,!this.repositories)throw new Error("Missing required argument: repositories");this.commitName=e.commitName,this._initialize()},a.prototype._bindToDom=function(){var e=this;this.$resourceName.addEventListener("input",function(){e.time=+new Date,e.timeoutId&&clearTimeout(e.timeoutId),e.timeoutId=setTimeout(e._checkSearch.bind(e),0)},!1),this.$resourceName.addEventListener("keydown",function(t){if(t.keyCode===s.KEY.ENTER){var i=s.$("a",e.$results);i&&(s.stop(t),window.open(i.href),e.hide())}},!1),this.$resourceName.value=this.commitName},a.prototype._checkSearch=function(){var e=this;clearTimeout(this.timeoutId);var t=(new Date).getTime();t-this.time>this.SEARCH_DELAY?(this.time=t,this._doSearch()):this.timeoutId=setTimeout(e._checkSearch.bind(e),50)},a.prototype._findCommitLocation=function(e,t,i){var o=this;return i||(i=new n),e.length>0?this.serviceRegistry.getService("orion.page.progress").progress(o.serviceRegistry.getService("orion.git.provider").doGitLog("/gitapi/commit/"+t+e[0].ContentLocation+"?page=1&pageSize=1"),"Getting commit details "+t).then(function(e){i.resolve(e.Children[0])},function(){o._findCommitLocation(e.slice(1),t,i)}):i.reject(),i},a.prototype._doSearch=function(){var e=this,i=this.$resourceName&&this.$resourceName.value;if(i){var n=document.createElement("div");n.appendChild(document.createTextNode(t["Searching..."])),s.empty(this.$results),this.$results.appendChild(n),this.serviceRegistry.getService("orion.page.message").setProgressMessage(t["Looking for the commit"]),this._findCommitLocation(this.repositories,i).then(function(t){var i=t;s.empty(e.$results),e._displayCommit(i,e.$results),e.serviceRegistry.getService("orion.page.message").setProgressMessage("")},function(){var t=document.createElement("div");t.appendChild(document.createTextNode("No commits found")),s.empty(e.$results),e.$results.appendChild(t),e.serviceRegistry.getService("orion.page.message").setProgressMessage("")})}},a.prototype._displayCommit=function(n,o){var r=this,a=document.createElement("div");a.style.padding="10px",a.style.maxWidth="480px",s.empty(o),o.appendChild(a);var c=n.Message.split(/(\r?\n|$)/)[0],d=document.createElement("a");d.className="navlinkonpage",d.href=e.toUrl(l.expand({resource:n.Location})),d.textContent=c,a.appendChild(d),d.addEventListener("mouseup",function(e){0!==e.button||e.ctrlKey||e.metaKey||r.hide()},!1),d.addEventListener("keyup",function(e){e.keyCode===s.KEY.ENTER&&r.hide()},!1);var h=document.createElement("div");if(h.style.paddingTop="15px",a.appendChild(h),n.AuthorImage){var u=new Image;u.src=n.AuthorImage,u.name=n.AuthorName,u.className="git-author-icon",h.appendChild(u)}var p=document.createElement("div");p.textContent=i.formatMessage(t[" authored by ${0} {${1}) on ${2}"],n.AuthorName,n.AuthorEmail,new Date(n.Time).toLocaleString()),h.appendChild(p);var m=document.createElement("div");m.textContent=i.formatMessage(t["committed by 0 (1)"],n.CommitterName,n.CommitterEmail),h.appendChild(m);var g=document.createElement("div");if(g.style.paddingTop="15px",g.textContent=t["commit:"]+n.Name,h.appendChild(g),n.Parents&&n.Parents.length>0){var o=document.createElement("div");o.textContent=t["parent:"];var f=document.createElement("a");f.className="navlinkonpage",f.href=e.toUrl(l.expand({resource:n.Parents[0].Location})),f.textContent=n.Parents[0].Name,o.appendChild(f),f.addEventListener("mouseup",function(e){0!==e.button||e.ctrlKey||e.metaKey||r.hide()},!1),f.addEventListener("keyup",function(e){e.keyCode===s.KEY.ENTER&&r.hide()},!1),h.appendChild(o)}},a.prototype._beforeHiding=function(){clearTimeout(this._timeoutId)},a.prototype.constructor=a,{OpenCommitDialog:a}}),define("orion/git/widgets/CommitDialog",["i18n!git/nls/gitmessages","orion/webui/dialog","orion/git/gitConfigPreference"],function(e,t){function i(e){this._init(e)}return i.prototype=new t.Dialog,i.prototype.TEMPLATE='<div style="display: none; padding-top: 10px; padding-bottom: 10px;" id="commitInfoBar"><strong id="commitInfo"></strong></div><div style="padding:4px"><div style="vertical-align:top"><label style="display:block; float:left" id="commitMessageLabel" for="commitMessage">${Message:}</label><textarea id="commitMessage" rows="5" style="width: 30em"></textarea></div></div><div style="padding:4px"><label id="amendLabel" for="amend">${Amend:}</label><input id="amend" type="checkbox"></div><div style="padding:4px"><label id="changeIdLabel" for="changeId">${ChangeId:}</label><input id="changeId" type="checkbox"></div><div style="padding:4px"><label id="committerNameLabel" for="committerName">${Committer Name:}</label><input id="committerName" style="width: 30em" value=""></div><div style="padding:4px"><label id="committerEmailLabel" for="committerEmail">${Committer Email:}</label><input id="committerEmail" style="width: 30em" value=""></div><div style="padding:4px"><label id="authorNameLabel" for="authorName">${Author Name:}</label><input id="authorName" style="width: 30em" value=""></div><div style="padding:4px"><label id="authorEmailLabel" for="authorEmail">${Author Email:}</label><input id="authorEmail" style="width: 30em" value=""></div><div style="padding:4px"><label id="persistLabel" for="persist">${Remember my committer name and email:}</label><input id="persist" type="checkbox"></div>',i.prototype._init=function(t){var i=this;this.title=e["Commit Changes"],this.modal=!0,this.messages=e,this.options=t,this.buttons=[],this.buttons.push({callback:function(){i._execute()},text:"OK",id:"commitChangesButton"}),this._initialize()},i.prototype._bindToDom=function(){var e=this;this.options.body.Message&&(this.$commitMessage.value=this.options.body.Message),this.$commitMessage.addEventListener("keyup",function(){e._validate()}),this.options.body.Amend&&(this.$amend.checked=!0),this.options.body.ChangeId&&(this.$changeId.checked=!0),this.options.body.CommitterName&&(this.$committerName.value=this.options.body.CommitterName),this.$committerName.addEventListener("keyup",function(){e._validate()}),this.options.body.CommitterEmail&&(this.$committerEmail.value=this.options.body.CommitterEmail),this.$committerEmail.addEventListener("keyup",function(){e._validate()}),this.options.body.AuthorName&&(this.$authorName.value=this.options.body.AuthorName),this.$authorName.addEventListener("keyup",function(){e._validate()}),this.options.body.AuthorEmail&&(this.$authorEmail.value=this.options.body.AuthorEmail),this.$authorEmail.addEventListener("keyup",function(){e._validate()}),this._validate()},i.prototype._validate=function(){this.$commitMessage.value?this.$committerName.value?this.$committerEmail.value?this.$authorName.value?this.$authorEmail.value?(this.$commitInfoBar.style.display="none",this.$commitChangesButton.classList.remove(this.DISABLED)):(this.$commitInfoBar.style.display="block",this.$commitChangesButton.classList.add(this.DISABLED),this.$commitInfo.textContent=e["The author mail is required."]):(this.$commitInfoBar.style.display="block",this.$commitChangesButton.classList.add(this.DISABLED),this.$commitInfo.textContent=e["The author name is required."]):(this.$commitInfoBar.style.display="block",this.$commitChangesButton.classList.add(this.DISABLED),this.$commitInfo.textContent=e["The committer mail is required."]):(this.$commitInfoBar.style.display="block",this.$commitChangesButton.classList.add(this.DISABLED),this.$commitInfo.textContent=e["The committer name is required."]):(this.$commitInfoBar.style.display="block",this.$commitChangesButton.classList.add(this.DISABLED),this.$commitInfo.textContent=e["The commit message is required."])
},i.prototype._execute=function(){if(!this.$commitChangesButton.classList.contains(this.DISABLED)){if(this.options.func){var e={};e.Message=this.$commitMessage.value,e.Amend=this.$amend.checked?!0:!1,e.ChangeId=this.$changeId.checked?!0:!1,e.CommitterName=this.$committerName.value,e.CommitterEmail=this.$committerEmail.value,e.AuthorName=this.$authorName.value,e.AuthorEmail=this.$authorEmail.value,e.persist=this.$persist.checked?!0:!1,this.options.func(e)}this.hide()}},i.prototype.constructor=i,{CommitDialog:i}}),define("orion/git/widgets/ApplyPatchDialog",["i18n!git/nls/gitmessages","orion/webui/dialog"],function(e,t){function i(e){this._init(e)}return i.prototype=new t.Dialog,i.prototype.TEMPLATE='<div style="padding:4px"><input type="radio" name="radio" value="urlRadio" id="urlRadio" checked/>'+e["URL:"]+'<input type="text" name="url" id="url"/></div><div style="padding:4px"><input type="radio" name="radio" value="fileRadio" id="fileRadio"/>'+e["File:"]+'<input type="file" name="selectedFile" id="selectedFile" class="uploadChooser" /></div>',i.prototype._init=function(t){var i=this;this.title=e["Apply Patch"],this.modal=!0,this.messages=e,this.options=t,this.buttons=[],this.buttons.push({callback:function(){i._applyPatch()},text:e.OK}),this._initialize()},i.prototype._bindToDom=function(){this.$selectedFile.onchange=function(){this.$urlRadio.checked=!1,this.$fileRadio.checked="fileRadio"}.bind(this),this.$url.onchange=function(){this.$urlRadio.checked="urlRadio",this.$fileRadio.checked=!1}.bind(this)},i.prototype._applyPatch=function(){var e=new FormData;e.append("uploadedfile",this.$selectedFile.files[0]),e.append("url",this.$url.value),e.append("radio",this.$fileRadio.checked?"fileRadio":"urlRadio"),this.req=new XMLHttpRequest,this.req.open("post",this.options.diffLocation),this.req.setRequestHeader("Orion-Version","1"),this.req.onreadystatechange=this.handleReadyState.bind(this),this.req.send(e)},i.prototype.handleReadyState=function(){4===this.req.readyState&&(200===this.req.status?this.options.deferred&&this.options.deferred.resolve(this.req.responseText):this.options.deferred&&this.options.deferred.reject(this.req.responseText),this.hide())},i.prototype.constructor=i,{ApplyPatchDialog:i}}),define("orion/git/logic/gitCommit",["i18n!git/nls/gitmessages","orion/commandRegistry","orion/Deferred","orion/git/widgets/CommitDialog","orion/git/logic/gitCommon","orion/i18nUtil","orion/webui/littlelib"],function(e,t,i,n,o,r,s){var a=o.handleProgressServiceResponse;return function(o){var l=o.serviceRegistry,c=(o.commandService,new t.CommandEventListener("change",function(t,i){var n=t.target,o=i.items.status||i.handler.status,r=document.getElementById("nameparameterCollector");if(n.checked){var s=l.getService("orion.page.message"),a=l.getService("orion.page.progress"),c=a.progress(l.getService("orion.git.provider").doGitLog(o.CommitLocation+"?page=1&pageSize=1"),e["Fetching previous commit message"]);s.createProgressMonitor(c,e["Fetching previous commit message"],c.then(function(e){var t=e.Children[0].Message;r.value=t}),function(){r.value=""})}else r.value=""})),d=function(i){return new t.ParametersDescription([new t.CommandParameter("name","text",e["Commit message:"],"",4),new t.CommandParameter("amend","boolean",i?e.SmartAmend:e["Amend:"],!1,null,c),new t.CommandParameter("changeId","boolean",i?e.SmartChangeId:e["ChangeId:"],!1)],{hasOptionalParameters:!0,getParameterElement:i?function(e,t){return s.$("#"+e.name+"parameterCollector",t.parentNode.parentNode)}:null,getSubmitName:i?function(t){var i=t.items;return Array.isArray(i)||(i=[i]),r.formatMessage(e.SmartCountCommit,i.length)}:null})},h=function(e,t,n){var o=l.getService("orion.git.provider"),r=new i;return o.addCloneConfigurationProperty(n,e,t).then(function(){r.resolve()},function(i){if(409===i.status){var s=o.getGitCloneConfig(n);s.then(function(i){if(i.Children)for(var n=0;n<i.Children.length;n++)if(i.Children[n].Key===e){var s=i.Children[n].Location;o.editCloneConfigurationProperty(s,t).then(function(){r.resolve()},function(e){r.reject(e)});break}},function(e){r.reject(e)})}else r.reject(i)}),r},u=function(t){var i={};i.Severity="Error",i.HTML=!1;try{var n=JSON.parse(t.responseText);401===t.status?(i.HTML=!0,i.Message="<span>",i.Message+=r.formatMessage(e["Authentication required for: ${0}. ${1} and re-try the request."],n.label,'<a target="_blank" href="'+n.SignInLocation+'">'+e.Login+"</a>")+"</span>"):i.Message=n.DetailedMessage?n.DetailedMessage:n.Message?n.Message:e["Problem while performing the action"]}catch(o){i.Message=e["Problem while performing the action"]}l.getService("orion.page.message").setProgressResult(i)},p=function(t){var o=new i,r=t.items.status||t.handler.status,s=r.Clone.ConfigLocation,c=function(e){a(e,{},l)},d=function(t){t.persist&&h("user.name",t.CommitterName,s).then(function(){h("user.email",t.CommitterEmail,s).then(function(){},function(e){c(e),o.reject(e)})},function(e){c(e),o.reject(e)});var i=l.getService("orion.page.message"),n=l.getService("orion.page.progress"),a=n.progress(l.getService("orion.git.provider").commitAll(r.Clone.HeadLocation,null,JSON.stringify(t)),e["Committing changes"]);i.createProgressMonitor(a,e["Committing changes"]),a.then(function(){o.resolve()},function(e){u(e),o.reject(e)})},p=function(e,i){for(var o=0;o<i.length;o++)"user.name"===i[o].Key?(e.CommitterName=i[o].Value,e.AuthorName=i[o].Value):"user.email"===i[o].Key&&(e.CommitterEmail=i[o].Value,e.AuthorEmail=i[o].Value);if(e.Message&&e.CommitterName&&e.CommitterEmail&&!t.parameters.optionsRequested)d(e);else{var r=new n.CommitDialog({body:e,func:d});r.show()}},m={};m.Message=t.parameters.valueFor("name"),m.Amend=t.parameters.valueFor("amend"),m.ChangeId=t.parameters.valueFor("changeId");var g=r.Clone.Config;if(m.Amend&&!m.Message){var f=l.getService("orion.page.message"),v=l.getService("orion.page.progress"),y=v.progress(l.getService("orion.git.provider").doGitLog(r.CommitLocation+"?page=1&pageSize=1"),e["Committing changes"]);f.createProgressMonitor(y,e["Committing changes"]),y.then(function(e){m.Message=e.Children[0].Message,p(m,g)},function(){p(m,g)})}else p(m,g);return o};return{perform:p,createParameters:d,displayErrorOnStatus:u,amendEventListener:c,setGitCloneConfig:h}}}),define("orion/git/gitCommands",["i18n!git/nls/gitmessages","require","orion/Deferred","orion/i18nUtil","orion/webui/littlelib","orion/commands","orion/commandRegistry","orion/git/util","orion/compare/compareUtils","orion/git/gitPreferenceStorage","orion/git/gitConfigPreference","orion/git/widgets/ConfirmPushDialog","orion/git/widgets/RemotePrompterDialog","orion/git/widgets/ReviewRequestDialog","orion/git/widgets/CloneGitRepositoryDialog","orion/git/widgets/GitCredentialsDialog","orion/git/widgets/OpenCommitDialog","orion/git/widgets/CommitDialog","orion/git/widgets/ApplyPatchDialog","orion/URL-shim","orion/PageLinks","orion/URITemplate","orion/git/logic/gitPush","orion/git/logic/gitCommit","orion/objects"],function(e,t,i,n,o,r,s,a,l,c,d,h,u,p,m,g,f,v,y,C,w,_,b,S,L){var E={};return function(){function h(t){var i;try{i=JSON.parse(t.responseText)}catch(n){i={Message:e["Problem while performing the action"]}}return i.HttpCode=t.status,i}function u(t){return"REJECTED_NONFASTFORWARD"===t?e.REJECTED_NONFASTFORWARD:t}var v=!1,C=new _("git/git-repository.html#{,resource,params*}"),R=new _("git/git-log.html#{,resource,params*}?page=1"),P=new _("git/git-log.html#{,resource,params*}"),T=new _("git/git-commit.html#{,resource,params*}?page=1&pageSize=1"),k=new _("edit/edit.html#{,resource,params*}");E.updateNavTools=function(e,t,i,n,r,s,a){var l=o.node(n);if(!l)throw"could not find toolbar "+n;if(t.destroy(l),t.renderCommands(n,l,s,i,"button"),a){var c=o.node(a);c&&(t.destroy(c),t.renderCommands(a,c,s,i,"button"))}if(r){var d=o.node(r);d&&(t.destroy(r),t.renderCommands(r,d,null,i,"button"))}v||(v=!0,e.getService("orion.page.selection").addEventListener("selectionChanged",function(e){var n=o.node(r);n&&(t.destroy(n),t.renderCommands(r,n,e.selections,i,"button"))}))},E.handleKnownHostsError=function(t,i,o,r){if(confirm(n.formatMessage(e["Would you like to add ${0} key for host ${1} to continue operation? Key fingerpt is ${2}."],i.KeyType,i.Host,i.HostFingerprint))){var s=a.parseSshGitUrl(i.Url),l={host:i.Host,keyType:i.KeyType,hostKey:i.HostKey,port:s.port},c=t.getService("orion.net.ssh");c.addKnownHost(l).then(function(e){if(o.knownHosts=e,"undefined"!=typeof o.failedOperation){var i=t.getService("orion.page.progress");i.removeOperation(o.failedOperation)}r(o)})}},E.handleSshAuthenticationError=function(e,t,i,n,o){var r=t?t.Url:void 0,s=function(){var t=new g.GitCredentialsDialog({title:o,serviceRegistry:e,func:n,errordata:i.errordata,failedOperation:i.failedOperation});t.show()};if(i.gitSshUsername&&""!==i.gitSshUsername||i.gitSshPassword&&""!==i.gitSshPassword||i.gitPrivateKey&&""!==i.gitPrivateKey)s();else{var a=new c(e);a.get(r).then(function(t){if(""!==t.gitPrivateKey||""!==t.gitSshUsername||""!==t.gitSshPassword){if("undefined"!=typeof i.failedOperation){var o=e.getService("orion.page.progress");o.removeOperation(i.failedOperation)}return void n({knownHosts:i.knownHosts,gitSshUsername:t.gitSshUsername,gitSshPassword:t.gitSshPassword,gitPrivateKey:t.gitPrivateKey,gitPassphrase:t.gitPassphrase})}s()},s)}},E.getDefaultSshOptions=function(e,t,n){var o,r=new i,s=e.getService("orion.net.ssh"),l=n&&!n.optionsRequested?n.valueFor("sshuser"):"",c=n&&!n.optionsRequested?n.valueFor("sshpassword"):"";if(void 0!==t.GitUrl?o=t.GitUrl:void 0!==t.errorData?o=t.errorData.Url:void 0!==t.toRef?o=t.toRef.RemoteLocation[0].GitUrl:void 0!==t.RemoteLocation&&(o=t.RemoteLocation[0].GitUrl),!o)return r.resolve({knownHosts:"",gitSshUsername:l,gitSshPassword:c,gitPrivateKey:"",gitPassphrase:""}),r;var d=a.parseSshGitUrl(o);return s.getKnownHostCredentials(d.host,d.port).then(function(e){r.resolve({knownHosts:e,gitSshUsername:l,gitSshPassword:c,gitPrivateKey:"",gitPassphrase:""})}),r},E.handleProgressServiceResponse=function(e,t,i,n,o,r){if(e&&void 0!==e.status&&(e=h(e)),!e||void 0===e.HttpCode)return void(n&&n(e));switch(e.HttpCode){case 401:return e.JsonData&&(t.errordata=e.JsonData),e.failedOperation&&(t.failedOperation=e.failedOperation),void E.handleSshAuthenticationError(i,e.JsonData,t,o,r);case 400:if(e.JsonData&&e.JsonData.HostKey)return e.failedOperation&&(t.failedOperation=e.failedOperation),void E.handleKnownHostsError(i,e.JsonData,t,o);if(e.JsonData&&e.JsonData.Host)return e.JsonData&&(t.errordata=e.JsonData),e.failedOperation&&(t.failedOperation=e.failedOperation),void E.handleSshAuthenticationError(i,e.JsonData,t,o,r);default:var s=[];s.Severity="Error",s.HTML=!1,s.Message=e.DetailedMessage?e.DetailedMessage:e.Message,i.getService("orion.page.message").setProgressResult(s),n&&n(e)}},E.gatherSshCredentials=function(t,o,r,s){var l,d=new i;void 0!==o.items.RemoteLocation?l=o.items.RemoteLocation[0].GitUrl:void 0!==o.items.GitUrl?l=o.items.GitUrl:void 0!==o.items.errorData?l=o.items.errorData.Url:void 0!==o.items.toRef&&(l=o.items.toRef.RemoteLocation[0].GitUrl);var h=t.getService("orion.net.ssh"),u=a.parseSshGitUrl(l),p=function(e){t.getService("orion.net.ssh").getKnownHostCredentials(u.host,u.port).then(function(t){o.sshObject=e,d.resolve({knownHosts:t,gitSshUsername:e.gitSshUsername,gitSshPassword:e.gitSshPassword,gitPrivateKey:e.gitPrivateKey,gitPassphrase:e.gitPassphrase})})},m=o.errorData;if(m&&m.HostKey){if(confirm(n.formatMessage(e["Would you like to add ${0} key for host ${1} to continue operation? Key fingerpt is ${2}."],m.KeyType,m.Host,m.HostFingerprint))){var f=a.parseSshGitUrl(m.Url),v={host:m.Host,keyType:m.KeyType,hostKey:m.HostKey,port:f.port};h.addKnownHost(v).then(function(){if(!o.sshObject||""===o.sshObject.gitSshUsername&&""===o.sshObject.gitSshPassword&&""===o.sshObject.gitPrivateKey){var e=new c(t);e.get(l).then(function(e){p(e)},function(){p({gitSshUsername:"",gitSshPassword:"",gitPrivateKey:"",gitPassphrase:""})})}else p({gitSshUsername:"",gitSshPassword:"",gitPrivateKey:"",gitPassphrase:""})})}return d}var y=function(){if(s)return void d.reject();if(!o.parameters&&!o.optionsRequested)return void p({gitSshUsername:"",gitSshPassword:"",gitPrivateKey:"",gitPassphrase:""});if(o.parameters&&!o.optionsRequested){var e=o.parameters&&o.parameters.valueFor("sshuser")?o.parameters.valueFor("sshuser"):o.errorData.User,i=o.parameters?o.parameters.valueFor("sshpassword"):"",n=o.parameters&&o.parameters.valueFor("saveCredentials")?o.parameters.valueFor("saveCredentials"):!1,a=new c(t);return n?void a.put(l,{gitSshUsername:e,gitSshPassword:i}).then(function(){p({gitSshUsername:e,gitSshPassword:i,gitPrivateKey:"",gitPassphrase:""})}):void p({gitSshUsername:e,gitSshPassword:i,gitPrivateKey:"",gitPassphrase:""})}var h=new g.GitCredentialsDialog({title:r,serviceRegistry:t,func:p,errordata:m});h.show()};if(!o.sshObject||""===o.sshObject.gitSshUsername&&""===o.sshObject.gitSshPassword&&""===o.sshObject.gitPrivateKey){var C=new c(t);C.get(l).then(function(e){return""!==e.gitPrivateKey||""!==e.gitSshUsername||""!==e.gitSshPassword?void p(e):void y()},y)}else y();return d},E.handleGitServiceResponse=function(e,t,i,n){if(e&&void 0!==e.status&&(e=h(e)),!e||!e.HttpCode)return void(i&&i(e));switch(e.HttpCode){case 401:var o=new c(t);o.isEnabled().then(function(t){t&&void 0!==e.JsonData.Url?o.remove(e.JsonData.Url).then(function(){n(e)}):n(e)});break;case 400:if(e.JsonData&&e.JsonData.HostKey)return void n(e);default:var r=[];r.Severity="Error",r.HTML=!1,r.Message=u(e.DetailedMessage?e.DetailedMessage:e.Message),t.getService("orion.page.message").setProgressResult(r),i&&i(e)}},E.createFileCommands=function(o,a,d,h){function u(t){var i={};i.Severity="Error",i.HTML=!1;try{var r=JSON.parse(t.responseText);401===t.status?(i.HTML=!0,i.Message="<span>",i.Message+=n.formatMessage(e["Authentication required for: ${0}. ${1} and re-try the request."],r.label,'<a target="_blank" href="'+r.SignInLocation+'">'+e.Login+"</a>")+"</span>"):i.Message=r.DetailedMessage?r.DetailedMessage:r.Message?r.Message:e["Problem while performing the action"]}catch(s){i.Message=e["Problem while performing the action"]}o.getService("orion.page.message").setProgressResult(i)}var m=function(e){e.handler.changedItem?e.handler.changedItem():d.changedItem()},g=new s.ParametersDescription([new s.CommandParameter("name","text",e["Local Branch Name:"])]),f=new r.Command({name:e.Checkout,tooltip:e["Checkout the current tag, creating a local branch based on its contents."],imageClass:"git-sprite-checkout",spriteClass:"gitCommandSprite",id:"eclipse.checkoutTag",parameters:g,callback:function(t){var i=t.items,r=function(t,i,r){var s=o.getService("orion.page.progress");s.showWhile(o.getService("orion.git.provider").checkoutTag(t,i,r),n.formatMessage(e["Checking out tag ${0}"],r)).then(function(){d.changedItem()},u)},s=i.Repository?i.Repository.Location:i.CloneLocation;t.parameters.valueFor("name")&&!t.parameters.optionsRequested&&r(s,i.Name,t.parameters.valueFor("name"))},visibleWhen:function(e){return"Tag"===e.Type||"Commit"===e.Type}});a.addCommand(f);var v=new r.Command({name:e.Checkout,tooltip:e["Checkout the branch or corresponding local branch and make it active. If the remote tracking branch does not have a corresponding local branch, the local branch will be created first."],imageClass:"git-sprite-checkout",spriteClass:"gitCommandSprite",id:"eclipse.checkoutBranch",callback:function(t){var i=t.items,r=o.getService("orion.git.provider"),s=o.getService("orion.page.message"),a=o.getService("orion.page.progress");if(s.setProgressMessage(i.Name?n.formatMessage(e["Checking out branch ${0}..."],i.Name):e["Checking out branch..."]),"Branch"===i.Type)a.progress(r.checkoutBranch(i.CloneLocation,i.Name),"Checking out branch "+i.Name).then(function(){s.setProgressResult(e["Branch checked out."]),d.changedItem(i.parent)},function(e){u(e)});else{var l;l=i.Repository?i.Repository.BranchLocation:i.parent.parent.repository.BranchLocation,a.progress(r.addBranch(l,null,i.Name),"Adding branch "+i.Name).then(function(t){a.progress(r.checkoutBranch(t.CloneLocation,t.Name),"Checking out branch "+i.Name).then(function(){s.setProgressResult(e["Branch checked out."]),d.changedItem(i.Repository?i.Repository.BranchLocation:i.parent.parent.parent)},function(e){u(e)})},function(e){u(e)})}},visibleWhen:function(e){return"Branch"===e.Type||"RemoteTrackingBranch"===e.Type}});a.addCommand(v);var y=new s.ParametersDescription([new s.CommandParameter("name","text","Name:")]),_=new r.Command({name:e["New Branch"],tooltip:e["Add a new local branch to the repository"],id:"eclipse.addBranch",parameters:y,callback:function(e){var t,i=e.items,n=o.getService("orion.page.progress"),r=function(e,t){n.progress(o.getService("orion.git.provider").addBranch(e,t),"Adding branch "+t).then(function(){d.changedItem(i)},u)};t="Clone"===i.Type?i.BranchLocation:i.Location,e.parameters.valueFor("name")&&!e.parameters.optionsRequested&&r(t,e.parameters.valueFor("name"))},visibleWhen:function(e){return e.GroupNode&&"Branches"===e.Name||"Clone"===e.Type&&"artifacts"===d.parentId}});a.addCommand(_);var S=new r.Command({name:e.Delete,tooltip:e["Delete the local branch from the repository"],imageClass:"core-sprite-delete",id:"eclipse.removeBranch",callback:function(t){var i=t.items,r=o.getService("orion.page.progress");confirm(n.formatMessage(e["Are you sure you want to delete branch ${0}?"],i.Name))&&r.progress(o.getService("orion.git.provider").removeBranch(i.Location),"Removing branch "+i.Name).then(function(){d.changedItem?d.changedItem(i.parent):d.displayBranches&&d.displayBranches(i.ParentLocation,null)},u)},visibleWhen:function(e){return"Branch"===e.Type&&!e.Current}});a.addCommand(S);var T=new r.Command({name:e.Delete,tooltip:e["Delete the remote tracking branch from the repository"],imageClass:"core-sprite-delete",id:"eclipse.removeRemoteBranch",callback:function(t){var i=t.items,r=o.getService("orion.page.progress");confirm(n.formatMessage(e["You're going to delete remote branch ${0} and push the change."],i.Name)+"\n\n"+e["Are you sure?"])&&E.getDefaultSshOptions(o,i).then(function(t){var n=arguments.callee,s=o.getService("orion.git.provider"),a=o.getService("orion.page.message"),l=r.progress(s.doPush(i.Location,"",!1,!1,t.gitSshUsername,t.gitSshPassword,t.knownHosts,t.gitPrivateKey,t.gitPassphrase),e["Removing remote branch: "]+i.Name);a.createProgressMonitor(l,e["Removing remote branch: "]+i.Name),l.then(function(r){E.handleProgressServiceResponse(r,t,o,function(e){"Ok"==e.Result.Severity&&d.changedItem(i.parent)},n,e["Delete Remote Branch"])},function(r){E.handleProgressServiceResponse(r,t,o,function(){},n,e["Removing remote branch: "]+i.Name)})})},visibleWhen:function(e){return"RemoteTrackingBranch"===e.Type}});a.addCommand(T);var N=new s.ParametersDescription([new s.CommandParameter("name","text","Name:"),new s.CommandParameter("url","url","Url:")]),x=new r.Command({name:e["New Remote"],tooltip:e["Add a new remote to the repository"],id:"eclipse.addRemote",parameters:N,callback:function(e){var t,i=e.items,n=o.getService("orion.page.progress"),r=function(e,t,r){n.progress(o.getService("orion.git.provider").addRemote(e,t,r),"Adding remote "+e).then(function(){d.changedItem(i)},u)};t="Clone"===i.Type?i.RemoteLocation:i.Location,e.parameters.valueFor("name")&&e.parameters.valueFor("url")&&r(t,e.parameters.valueFor("name"),e.parameters.valueFor("url"))},visibleWhen:function(e){return e.GroupNode&&"Remotes"===e.Name||"Clone"===e.Type&&"artifacts"===d.parentId}});a.addCommand(x);var A=new r.Command({name:e.Delete,tooltip:e["Delete the remote from the repository"],imageClass:"core-sprite-delete",id:"eclipse.removeRemote",callback:function(t){var i=t.items;if(confirm(n.formatMessage(e["Are you sure you want to delete remote ${0}?"],i.Name))){var r=o.getService("orion.page.progress");r.progress(o.getService("orion.git.provider").removeRemote(i.Location),"Removing remote "+i.Name).then(function(){d.changedItem(i.parent)},u)}},visibleWhen:function(e){return"Remote"===e.Type}});a.addCommand(A);var I=new r.Command({name:e.Pull,tooltip:e["Pull from the repository"],imageClass:"git-sprite-pull",spriteClass:"gitCommandSprite",id:"eclipse.orion.git.pull",callback:function(t){var i=t.items,n=i.Location,r=i.Name;E.getDefaultSshOptions(o,i).then(function(t){var s=arguments.callee,a=o.getService("orion.git.provider"),l=o.getService("orion.page.message"),c=o.getService("orion.page.progress"),h=c.progress(a.doPull(n,!1,t.gitSshUsername,t.gitSshPassword,t.knownHosts,t.gitPrivateKey,t.gitPassphrase),e["Pulling: "]+r);l.createProgressMonitor(h,e["Pulling: "]+r);var u;h.then(function(e){E.handleProgressServiceResponse(e,t,o,function(){"Clone"===i.Type&&d.changedItem(i)},s,"Pull Git Repository")},function(n){u&&(n.failedOperation=u),E.handleProgressServiceResponse(n,t,o,function(){d.changedItem(i)},s,e["Pull Git Repository"])},function(e){u=e.Location})})},visibleWhen:function(e){return"Clone"===e.Type}});a.addCommand(I);var O=new r.Command({name:e["Git Log"],tooltip:e["Open the log for the branch"],id:"eclipse.openGitLog",hrefCallback:function(e){var i=e.items;return t.toUrl(R.expand({resource:i.CommitLocation}))},visibleWhen:function(e){return"Branch"===e.Type||"RemoteTrackingBranch"===e.Type}});a.addCommand(O);var D=new r.Command({name:e["Git Log"],tooltip:e["Open the log for the repository"],id:"eclipse.openGitLogAll",imageClass:"git-sprite-log",spriteClass:"gitCommandSprite",hrefCallback:function(e){var i=e.items;return t.toUrl(R.expand({resource:i.CommitLocation}))},visibleWhen:function(e){return e.CommitLocation&&e.StatusLocation?!0:!1}});a.addCommand(D);var M=new r.Command({name:e.ShowInEditor,tooltip:e.ShowInEditorTooltip,id:"eclipse.openCloneContent",hrefCallback:function(e){return t.toUrl(k.expand({resource:e.items.ContentLocation}))},visibleWhen:function(e){return e.ContentLocation?!0:!1}});a.addCommand(M);var F=new r.Command({name:e["Compare With Each Other"],id:"eclipse.compareGitCommits",hrefCallback:function(e){var t=e.items,i=o.getService("orion.page.progress");return i.progress(o.getService("orion.git.provider").getDiff(t[1].DiffLocation,t[0].Name),"Generating Diff for "+t[0].Name+" and "+t[1].Name).then(function(e){return l.generateCompareHref(e.Location,{readonly:!0})})},visibleWhen:function(e){return d.isDirectory?!1:Array.isArray(e)&&2===e.length&&"Commit"===e[0].Type&&"Commit"===e[1].Type?!0:!1}});a.addCommand(F);var $=new r.Command({name:e["Compare With Working Tree"],imageClass:"git-sprite-compare",spriteClass:"gitCommandSprite",id:"eclipse.compareWithWorkingTree",hrefCallback:function(e){return l.generateCompareHref(e.items.DiffLocation,{})},visibleWhen:function(e){return"Commit"===e.Type&&null!==e.ContentLocation&&!d.isDirectory}});a.addCommand($);var U=new r.Command({name:e.Open,id:"eclipse.openGitCommit",imageClass:"git-sprite-open",spriteClass:"gitCommandSprite",hrefCallback:function(e){return t.toUrl(k.expand({resource:e.items.ContentLocation}))},visibleWhen:function(e){return"Commit"===e.Type&&null!=e.ContentLocation&&!d.isDirectory}});a.addCommand(U);var B=function(t,n,r){var l=new i;if(r&&!r(r))return l.reject(),l;var d=t.items,h=!1;d.LocalBranch&&d.RemoteBranch&&(h=d.noAuth,d=d.RemoteBranch);var p=d.Location,m=d.Name,g=t,f=function(t,i){if(t.JsonData.HostKey)i.parameters=null,i.errorData=t.JsonData,i.errorData.failedOperation=t.failedOperation,a.collectParameters(i);else if(i.optionsRequested)i.errorData=t.JsonData,i.errorData.failedOperation=t.failedOperation,a.collectParameters(i);else{var n=new c(o);n.isEnabled().then(function(n){i.parameters=n?t.JsonData.User?new s.ParametersDescription([new s.CommandParameter("sshpassword","password",e["Password:"]),new s.CommandParameter("saveCredentials","boolean",e["Don't prompt me again:"])],{hasOptionalParameters:!0}):new s.ParametersDescription([new s.CommandParameter("sshuser","text",e["User Name:"]),new s.CommandParameter("sshpassword","password",e["Password:"]),new s.CommandParameter("saveCredentials","boolean",e["Don't prompt me again:"])],{hasOptionalParameters:!0}):t.JsonData.User?new s.ParametersDescription([new s.CommandParameter("sshpassword","password",e["Password:"])],{hasOptionalParameters:!0}):new s.ParametersDescription([new s.CommandParameter("sshuser","text",e["User Name:"]),new s.CommandParameter("sshpassword","password",e["Password:"])],{hasOptionalParameters:!0}),i.errorData=t.JsonData,i.errorData.failedOperation=t.failedOperation,a.collectParameters(i)})}},v=function(){if(g.parameters&&g.parameters.optionsRequested)return g.parameters=null,g.optionsRequested=!0,void a.collectParameters(g);if(g.errorData&&g.errorData.failedOperation){var t=o.getService("orion.page.progress");t.removeOperation(g.errorData.failedOperation)}E.gatherSshCredentials(o,g,null,h).then(function(t){var i=o.getService("orion.git.provider"),r=o.getService("orion.page.message"),s=o.getService("orion.page.progress"),a=s.progress(i.doFetch(p,n,t.gitSshUsername,t.gitSshPassword,t.knownHosts,t.gitPrivateKey,t.gitPassphrase),e["Fetching remote: "]+m);r.createProgressMonitor(a,e["Fetching remote: "]+m),a.then(function(e){E.handleGitServiceResponse(e,o,function(){l.resolve()},function(e){f(e,g)})},function(e){E.handleGitServiceResponse(e,o,function(){l.resolve()},function(e){f(e,g)})})},l.reject)};if(g.items.GitUrl)v();else{var y=o.getService("orion.git.provider"),C=o.getService("orion.page.progress");C.progress(y.getGitRemote(p),"Getting remote details "+m).then(function(e){C.progress(y.getGitClone(e.CloneLocation),"Getting git repository information "+e.Name).then(function(e){g.items.GitUrl=e.Children[0].GitUrl,v()},u)},u)}return l},G=function(e){return e.LocalBranch&&e.RemoteBranch&&(e=e.RemoteBranch),"RemoteTrackingBranch"===e.Type?!0:"Remote"===e.Type?!0:"Commit"===e.Type&&e.toRef&&"RemoteTrackingBranch"===e.toRef.Type?!0:!1},H=new r.Command({name:e.Fetch,tooltip:e["Fetch from the remote"],imageClass:"git-sprite-fetch",spriteClass:"gitCommandSprite",id:"eclipse.orion.git.fetch",callback:function(e){return B(e,!1).then(function(){m(e)})},visibleWhen:G});a.addCommand(H);var K=new r.Command({name:e["Force Fetch"],imageClass:"git-sprite-fetch",spriteClass:"gitCommandSprite",tooltip:e["Fetch from the remote branch into your remote tracking branch overriding its current content"],id:"eclipse.orion.git.fetchForce",callback:function(t){var i=e["You're going to override content of the remote tracking branch. This can cause the branch to lose commits."]+"\n\n"+e["Are you sure?"];B(t,!0,i).then(function(){m(t)})},visibleWhen:G});a.addCommand(K);var j=new r.Command({name:e.Merge,tooltip:e["Merge the content from the branch to your active branch"],imageClass:"git-sprite-merge",spriteClass:"gitCommandSprite",id:"eclipse.orion.git.merge",callback:function(t){var i=t.items,r=o.getService("orion.git.provider"),s=o.getService("orion.page.progress"),a=o.getService("orion.page.message");s.progress(r.doMerge(i.HeadLocation,i.Name,!1),"Merging "+i.Name).then(function(t){var o={};if("FAST_FORWARD"===t.Result||"ALREADY_UP_TO_DATE"===t.Result)o.Severity="Ok",o.HTML=!1,o.Message=t.Result;else if(t.Result){if(o.Severity="Warning",o.HTML=!0,o.Message="<span>"+t.Result,t.FailingPaths){var r="",s=!0;for(var l in t.FailingPaths)s||(r+=", "),s=!1,r+=l;s||(o.Severity="Error",o.Message+=". "+n.formatMessage(e["Failing paths: ${0}"],r))}o.Message+="</span>"}else if(t.error){if(o.Severity="Error",t.error.responseText&&JSON.parse(t.error.responseText)){var c=JSON.parse(t.error.responseText);o.Message=c.DetailedMessage?c.DetailedMessage:c.Message}else o.Message=t.error.message;o.HTML=!0,o.Message="<span>"+o.Message+"</span>"}a.setProgressResult(o),d.changedItem(i)},function(e,t){var n={};n.Severity="Error",n.HTML=!0,n.Message="<span>"+JSON.stringify(t.xhr.responseText).DetailedMessage+"</span>",o.getService("orion.page.message").setProgressResult(n),d.changedItem(i)})},visibleWhen:function(e){return"RemoteTrackingBranch"===e.Type?!0:"Branch"!==e.Type||e.Current?"Commit"===e.Type&&e.toRef&&"RemoteTrackingBranch"===e.toRef.Type?!0:!1:!0}});a.addCommand(j);var W=new r.Command({name:e["Merge Squash"],tooltip:e["Squash the content of the branch to the index"],imageClass:"git-sprite-merge-squash",spriteClass:"gitCommandSprite",id:"eclipse.orion.git.mergeSquash",callback:function(e){var t=e.items,i=o.getService("orion.git.provider"),n=o.getService("orion.page.progress"),r=o.getService("orion.page.message");n.progress(i.doMerge(t.HeadLocation,t.Name,!0),"Merging "+t.Name).then(function(e){var i=[];if("FAST_FORWARD_SQUASHED"===e.Result||"ALREADY_UP_TO_DATE"===e.Result)i.Severity="Ok",i.HTML=!1,i.Message=e.Result;else if(e.Result)i.Severity="Warning",i.HTML=!0,i.Message="<span>"+e.Result+"</span>";else if(e.error){if(i.Severity="Error",e.error.responseText&&JSON.parse(e.error.responseText)){var n=JSON.parse(e.error.responseText);i.Message=n.DetailedMessage?n.DetailedMessage:n.Message}else i.Message=e.error.message;i.HTML=!0,i.Message="<span>"+i.Message+"</span>"}r.setProgressResult(i),d.changedItem(t)},function(e,i){var n=[];n.Severity="Error",n.HTML=!0,n.Message="<span>"+JSON.stringify(i.xhr.responseText).DetailedMessage+".</span>",o.getService("orion.page.message").setProgressResult(n),d.changedItem(t)})},visibleWhen:function(e){return"RemoteTrackingBranch"===e.Type?!0:"Branch"!==e.Type||e.Current?"Commit"===e.Type&&e.toRef&&"RemoteTrackingBranch"===e.toRef.Type?!0:!1:!0}});a.addCommand(W);var V=function(t){var n=new i,r=t.items;r.LocalBranch&&r.RemoteBranch&&(r=r.RemoteBranch);var s=o.getService("orion.page.message"),a=o.getService("orion.page.progress"),l=a.progress(o.getService("orion.git.provider").doRebase(r.HeadLocation,r.Name,"BEGIN"),r.Name?e["Rebase on top of "]+r.Name:e.Rebase);return s.createProgressMonitor(l,r.Name?e["Rebase on top of "]+r.Name:e.Rebase),l.then(function(t){var i={};switch(t.Result){case"OK":case"FAST_FORWARD":case"UP_TO_DATE":i.Severity="Ok";break;case"FAILED_WRONG_REPOSITORY_STATE":case"FAILED_UNMERGED_PATHS":case"FAILED_PENDING_CHANGES":case"UNCOMMITTED_CHANGES":i.Severity="Error";break;case"STOPPED":default:i.Severity="Warning"}if("Ok"===i.Severity)i.HTML=!1,i.Message=t.Result;else{i.HTML=!0;var r=e["Rebase"+t.Result];i.Message="<span>"+t.Result+(r?r:"")+"</span>"}o.getService("orion.page.message").setProgressResult(i),n.resolve(t)},function(e){u(e),n.reject()}),n},q=new r.Command({name:e.Rebase,tooltip:e["Rebase your commits by removing them from the active branch, starting the active branch again based on the latest state of the selected branch "]+"and applying each commit again to the updated active branch.",id:"eclipse.orion.git.rebase",imageClass:"git-sprite-rebase",spriteClass:"gitCommandSprite",callback:function(e){V(e).then(function(){m(e)})},visibleWhen:function(t){return this.tooltip=e["Rebase your commits by removing them from the active branch, "]+e["starting the active branch again based on the latest state of '"]+t.Name+"' "+e["and applying each commit again to the updated active branch."],"RemoteTrackingBranch"===t.Type||"Branch"===t.Type&&!t.Current}});a.addCommand(q);var z={serviceRegistry:o,commandService:a,explorer:d,toolbarId:h},J=b(L.mixin(z,{tags:!0,force:!1})).perform,Y=b(L.mixin(z,{tags:!1,force:!1})).perform,X=b(L.mixin(z,{tags:!0,force:!0})).perform,Z=b(L.mixin(z,{tags:!1,force:!0})).perform,Q=b(L.mixin(z,{tags:!1,force:!1,gerrit:!0})).perform,et=function(e){return e.LocalBranch&&e.RemoteBranch&&(e=e.LocalBranch),e.toRef?""===e.RepositoryPath&&"Branch"===e.toRef.Type&&e.toRef.Current&&e.toRef.RemoteLocation:"Branch"===e.Type&&e.Current&&e.RemoteLocation},tt=new r.Command({name:e.Sync,tooltip:e.SyncTooltip,id:"eclipse.orion.git.sync",callback:function(e){return B(e).then(function(){return V(e).then(function(t){return"OK"===t.Result||"FAST_FORWARD"===t.Result||"UP_TO_DATE"===t.Result?J(e).then(function(){m(e)}):void 0})})},visibleWhen:et});a.addCommand(tt);var it=new r.Command({name:e["Push All"],tooltip:e["Push commits and tags from your local branch into the remote branch"],imageClass:"git-sprite-push",spriteClass:"gitCommandSprite",id:"eclipse.orion.git.push",callback:function(e){J(e).then(function(){m(e)
})},visibleWhen:et});a.addCommand(it);var nt=new r.Command({name:e["Push Branch"],tooltip:e["Push commits without tags from your local branch into the remote branch"],imageClass:"git-sprite-push",spriteClass:"gitCommandSprite",id:"eclipse.orion.git.pushBranch",callback:function(e){Y(e).then(function(){m(e)})},visibleWhen:et});a.addCommand(nt);var ot=new r.Command({name:e["Push for Review"],tooltip:e["Push commits to Gerrit Code Review"],imageClass:"git-sprite-push",spriteClass:"gitCommandSprite",id:"eclipse.orion.git.pushToGerrit",callback:function(e){Q(e).then(function(){m(e)})},visibleWhen:function(e){return e.LocalBranch&&e.RemoteBranch&&(e=e.LocalBranch),e.toRef?""===e.RepositoryPath&&"Branch"===e.toRef.Type&&e.toRef.Current&&e.toRef.RemoteLocation&&e.toRef.RemoteLocation[0].IsGerrit:"Branch"===e.Type&&e.Current&&e.RemoteLocation&&e.RemoteLocation[0].IsGerrit}});a.addCommand(ot);var rt=new r.Command({name:e["Force Push All"],tooltip:e["Push commits and tags from your local branch into the remote branch overriding its current content"],imageClass:"git-sprite-push",spriteClass:"gitCommandSprite",id:"eclipse.orion.git.pushForce",callback:function(e){X(e).then(function(){m(e)})},visibleWhen:et});a.addCommand(rt);var st=new r.Command({name:e["Force Push Branch"],tooltip:e["Push commits without tags from your local branch into the remote branch overriding its current content"],imageClass:"git-sprite-push",spriteClass:"gitCommandSprite",id:"eclipse.orion.git.pushForceBranch",callback:function(e){Z(e).then(function(){m(e)})},visibleWhen:et});a.addCommand(st);var at=new r.Command({name:e["< Previous Page"],tooltip:e["Show previous page of git log"],id:"eclipse.orion.git.previousLogPage",hrefCallback:function(e){return t.toUrl(P.expand({resource:e.items.PreviousLocation}))},visibleWhen:function(e){return"RemoteTrackingBranch"===e.Type||e.toRef&&"Branch"===e.toRef.Type||null!==e.RepositoryPath?void 0!==e.PreviousLocation:!1}});a.addCommand(at);var lt=new r.Command({name:e["Next Page >"],tooltip:e["Show next page of git log"],id:"eclipse.orion.git.nextLogPage",hrefCallback:function(e){return t.toUrl(P.expand({resource:e.items.NextLocation}))},visibleWhen:function(e){return"RemoteTrackingBranch"===e.Type||e.toRef&&"Branch"===e.toRef.Type||null!==e.RepositoryPath?void 0!==e.NextLocation:!1}});a.addCommand(lt);var ct=new r.Command({name:e["< Previous Page"],tooltip:e["Show previous page of git tags"],id:"eclipse.orion.git.previousTagPage",hrefCallback:function(e){return t.toUrl(C.expand({resource:e.items.PreviousLocation}))},visibleWhen:function(e){return"Tag"===e.Type?void 0!==e.PreviousLocation:!1}});a.addCommand(ct);var dt=new r.Command({name:e["Next Page >"],tooltip:e["Show next page of git tags"],id:"eclipse.orion.git.nextTagPage",hrefCallback:function(e){return t.toUrl(C.expand({resource:e.items.NextLocation}))},visibleWhen:function(e){return"Tag"===e.Type?void 0!==e.NextLocation:!1}});a.addCommand(dt);var ht=function(t,i,r,s,a){var l=t.items;if(confirm(n.formatMessage(a,r))){var c=o.getService("orion.git.provider"),h=o.getService("orion.page.message"),u=o.getService("orion.page.progress"),p=u.progress(c.resetIndex(i,r,s),"Resetting git index for "+r);h.createProgressMonitor(p,e["Resetting index..."]),p.then(function(){var e={};e.Severity="Info",e.HTML=!1,e.Message="Ok",d.changedItem(l),h.setProgressResult(e)},function(e){var t={};t.Severity="Error",t.HTML=!1,t.Message=e.message,h.setProgressResult(t)})}},ut=new r.Command({name:e.Reset,tooltip:e["Reset your active branch to the state of the selected branch. Discard all staged and unstaged changes."],id:"eclipse.orion.git.resetIndex",imageClass:"git-sprite-reset",spriteClass:"gitCommandSprite",callback:function(t){ht(t,t.items.IndexLocation,t.items.Name,"HARD",e.GitResetIndexConfirm)},visibleWhen:function(e){return"RemoteTrackingBranch"===e.Type}});a.addCommand(ut);var pt=new r.Command({name:e.Undo,tooltip:e.UndoTooltip,id:"eclipse.orion.git.undoCommit",callback:function(t){ht(t,t.items.parent.remoteBranch.IndexLocation,"HEAD^","SOFT",e.UndoConfirm)},visibleWhen:function(e){return"Commit"===e.Type&&e.parent&&"Outgoing"===e.parent.Type&&e.parent.children&&e.parent.children[0].Name===e.Name}});a.addCommand(pt);var mt=new s.ParametersDescription([new s.CommandParameter("name","text",e["Name:"])]),gt=new r.Command({name:e.Tag,tooltip:e["Create a tag for the commit"],imageClass:"git-sprite-tag",spriteClass:"gitCommandSprite",id:"eclipse.orion.git.addTag",parameters:mt,callback:function(e){var t=e.items,i=function(e,i){var n=o.getService("orion.page.progress");n.progress(o.getService("orion.git.provider").doAddTag(e,i),"Adding tag "+i).then(function(){d.changedItem(t)},u)},n=t.Location;e.parameters.valueFor("name")&&!e.parameters.optionsRequested&&i(n,e.parameters.valueFor("name"))},visibleWhen:function(e){return"Commit"===e.Type}});a.addCommand(gt);var ft=new r.Command({name:e.Delete,tooltip:e["Delete the tag from the repository"],imageClass:"core-sprite-delete",id:"eclipse.removeTag",callback:function(t){var i=t.items;if(confirm(n.formatMessage(e["Are you sure you want to delete tag ${0}?"],i.Name))){var r=o.getService("orion.page.progress");r.progress(o.getService("orion.git.provider").doRemoveTag(i.Location),"Removing tag "+i.Name).then(function(){d.changedItem(i.parent)},u)}},visibleWhen:function(e){return"Tag"===e.Type}});a.addCommand(ft);var vt=new s.ParametersDescription([new s.CommandParameter("reviewer","text",e["Reviewer name"])],{hasOptionalParameters:!0}),yt=new r.Command({name:e["Ask for review"],tooltip:e["Ask for review tooltip"],imageClass:"core-sprite-tag",id:"eclipse.orion.git.askForReviewCommand",parameters:vt,callback:function(t){var i=o.getService("orion.page.progress"),n=function(e){var t=e,i=document.createElement("a");i.href=t;var n=i.protocol;if("ssh:"===n){var o=t.indexOf("@");if(-1!==o){var r="ssh://"+t.substr(o+1);t=r}}return t},r=function(e){var r=t.items,s=r.Location.replace(r.Name,"HEAD"),a=r.AuthorName,l=r.Name,c=r.Message;i.progress(o.getService("orion.git.provider").getGitClone(r.CloneLocation),"Getting repository details "+r.Name).then(function(t){var d=(window.location.href.split("#")[0],w.getOrionHome()),h=n(t.Children[0].GitUrl),p=d+"/git/reviewRequest.html#"+h+"_"+r.Name;i.progress(o.getService("orion.git.provider").sendCommitReviewRequest(l,s,e,p,a,c),"Sending review request for "+l).then(function(e){var t={};t.Severity="Ok",t.HTML=!1,t.Message=e.Result,o.getService("orion.page.message").setProgressResult(t)},u)})};if(t.parameters.valueFor("reviewer")&&!t.parameters.optionsRequested)r(t.parameters.valueFor("reviewer"));else{var s=t.items;i.progress(o.getService("orion.git.provider").getGitClone(s.CloneLocation),"Getting git details "+s.Name).then(function(t){var i=(window.location.href.split("#")[0],w.getOrionHome()),o=n(t.Children[0].GitUrl),a=i+"/git/reviewRequest.html#"+o+"_"+s.Name,l=new p.ReviewRequestDialog({title:e["Contribution Review Request"],url:a,func:r});l.show()},u)}},visibleWhen:function(e){return"Commit"===e.Type}});a.addCommand(yt);var Ct=new r.Command({name:e["Cherry-Pick"],tooltip:e["Apply the change introduced by the commit to your active branch"],id:"eclipse.orion.git.cherryPick",imageClass:"git-sprite-cherry-pick",spriteClass:"gitCommandSprite",callback:function(t){var i=t.items,r=o.getService("orion.page.progress"),s=o.getService("orion.git.provider"),a=i.Location.replace(i.Name,"HEAD");r.progress(s.doCherryPick(a,i.Name),"Cherry picking "+i.Name).then(function(t){var i={};if("OK"===t.Result)i.Severity="Ok",t.HeadUpdated?(i.HTML=!1,i.Message=t.Result):(i.HTML=!0,i.Message="<span>"+e["Nothing changed."]+"</span>");else if("CONFLICTING"===t.Result)i.Severity="Warning",i.HTML=!0,i.Message="<span>"+t.Result+e[". Some conflicts occurred"]+"</span>";else if("FAILED"===t.Result){if(i.Severity="Error",i.HTML=!0,i.Message="<span>"+t.Result,t.FailingPaths){var r="",s=!0;for(var a in t.FailingPaths)s||(r+=", "),s=!1,r+=a;s||(i.Message+=". "+n.formatMessage(e["Failing paths: ${0}"],r))}i.Message+="</span>"}else i.Severity="Warning",i.HTML=!1,i.Message=t.Result;o.getService("orion.page.message").setProgressResult(i)},u)},visibleWhen:function(e){return"Commit"===e.Type}});a.addCommand(Ct);var wt=new r.Command({name:e.Revert,tooltip:e["Revert changes introduced by the commit into your active branch"],id:"eclipse.orion.git.revert",imageClass:"git-sprite-reset",spriteClass:"gitCommandSprite",callback:function(t){var i=t.items,n=o.getService("orion.page.progress"),r=o.getService("orion.git.provider"),s=i.Location.replace(i.Name,"HEAD");n.progress(r.doRevert(s,i.Name),"Reverting "+i.Name).then(function(t){var i=[];"OK"===t.Result?(i.Severity="Ok",i.HTML=!1,i.Message=t.Result):"FAILURE"===t.Result?(i.Severity="Warning",i.HTML=!0,i.Message="<span>"+t.Result+e[". Could not revert into active branch"]+"</span>"):(i.Severity="Warning",i.HTML=!1,i.Message=t.Result),o.getService("orion.page.message").setProgressResult(i)},u)},visibleWhen:function(e){return"Commit"===e.Type}});a.addCommand(wt)},E.createGitClonesCommands=function(o,a,l,h,u,p){function g(t){var i={};i.Severity="Error",i.HTML=!1;try{var n=JSON.parse(t.responseText);i.Message=n.DetailedMessage?n.DetailedMessage:n.Message?n.Message:e["Problem while performing the action"]}catch(r){i.Message=e["Problem while performing the action"]}o.getService("orion.page.message").setProgressResult(i)}function v(e){return Array.isArray(e)&&(e=e.length>1?{}:e[0]),e}var w=new s.ParametersDescription([new s.CommandParameter("key","text",e["Key:"]),new s.CommandParameter("value","text",e["Value:"])]),_=new r.Command({name:e["New Configuration Entry"],tooltip:"Add a new entry to the repository configuration",id:"eclipse.orion.git.addConfigEntryCommand",parameters:w,callback:function(e){var t=e.items,i=o.getService("orion.git.provider"),n=o.getService("orion.page.progress");e.parameters.valueFor("key")&&e.parameters.valueFor("value")&&n.progress(i.addCloneConfigurationProperty(t.ConfigLocation,e.parameters.valueFor("key"),e.parameters.valueFor("value")),"Setting configuration propetry: "+e.parameters.valueFor("key")).then(function(){l.changedItem(t)},g)}});a.addCommand(_);var b=new s.ParametersDescription([],null,function(t){var i,n=t.items;return n&&(i=n.Value),[new s.CommandParameter("value","text",e["Value:"],i)]}),S=new r.Command({name:e.Edit,tooltip:e["Edit the configuration entry"],imageClass:"core-sprite-edit",id:"eclipse.orion.git.editConfigEntryCommand",parameters:b,callback:function(e){var t=e.items,i=o.getService("orion.git.provider"),n=o.getService("orion.page.progress");e.parameters.valueFor("value")&&n.progress(i.editCloneConfigurationProperty(t.Location,e.parameters.valueFor("value")),"Editing configuration property "+t.Key).then(function(){l.changedItem(t)},g)},visibleWhen:function(e){return e.Key&&e.Value&&e.Location}});a.addCommand(S);var L=new r.Command({name:e.Delete,tooltip:e["Delete the configuration entry"],imageClass:"core-sprite-delete",id:"eclipse.orion.git.deleteConfigEntryCommand",callback:function(t){var i=t.items,r=o.getService("orion.git.provider"),s=o.getService("orion.page.progress");confirm(n.formatMessage(e["Are you sure you want to delete ${0}?"],i.Key))&&s.progress(r.deleteCloneConfigurationProperty(i.Location),"Deleting configuration property "+i.Key).then(function(){l.changedItem(i)},g)},visibleWhen:function(e){return e.Key&&e.Value&&e.Location}});a.addCommand(L);var R=new s.ParametersDescription([new s.CommandParameter("url","url",e["Repository URL:"])],{hasOptionalParameters:!0}),P=new r.Command({name:e["Clone Repository"],tooltip:e["Clone an existing Git repository to a folder"],id:"eclipse.createGitProject",callback:function(i){var n=i.items,r=o.getService("orion.git.provider"),s=o.getService("orion.page.progress"),a=function(i,a,c){n.GitUrl=i,E.getDefaultSshOptions(o,n).then(function(h){var u=arguments.callee,m=new d(o);o.getService("orion.page.message").setProgressMessage("Your project is being set up. This may take a minute..."),m.getConfig().then(function(d){var m=s.progress(r.cloneGitRepository(c,i,a,l.defaultPath,h.gitSshUsername,h.gitSshPassword,h.knownHosts,h.gitPrivateKey,h.gitPassphrase,d,!0),"Cloning repository "+c);m.then(function(i){E.handleProgressServiceResponse(i,h,o,function(e){r.getGitClone(e.Location).then(function(e){var i="";for(var o in n.projectDescription)i+=o+"="+n.projectDescription[o]+"\n";p.write(e.Children[0].ContentLocation+".git/.projectInfo",i).then(function(){var i=t.toUrl(k.expand({resource:e.Children[0].ContentLocation}));window.location=i})})},u,e["Clone Git Repository"])},function(t){E.handleProgressServiceResponse(t,h,o,function(){},u,e["Clone Git Repository"])})})})};n.url&&n.projectDescription.name&&(o.getService("orion.page.message").setProgressMessage("Looking for project "+n.projectDescription.name),p.loadWorkspace().then(function(e){for(var i=0;i<e.Children.length;++i){var o=e.Children[i];if(o.Name===n.projectDescription.name)return void(o.Git?r.getGitClone(o.Git.CloneLocation).then(function(e){e.Children[0].GitUrl===n.url?window.location=t.toUrl(k.expand({resource:e.Children[0].ContentLocation})):console.info("Folder project is used")}):console.info("Folder project is used"))}a(n.url,null,n.projectDescription.name)}))},visibleWhen:function(){return!0}});a.addCommand(P);var N=new r.Command({name:e["Clone Repository"],tooltip:e["Clone an existing Git repository to a folder"],id:"eclipse.cloneGitRepository",parameters:R,callback:function(t){var i=t.items,n=o.getService("orion.git.provider"),r=o.getService("orion.page.progress"),s=function(t,s,a){i.GitUrl=t,E.getDefaultSshOptions(o,i).then(function(i){var c=arguments.callee,h=new d(o);h.getConfig().then(function(d){var h=r.progress(n.cloneGitRepository(a,t,s,l.defaultPath,i.gitSshUsername,i.gitSshPassword,i.knownHosts,i.gitPrivateKey,i.gitPassphrase,d),"Cloning repository "+a);o.getService("orion.page.message").createProgressMonitor(h,e["Cloning repository: "]+t),h.then(function(t){E.handleProgressServiceResponse(t,i,o,function(){l.changedItem&&l.changedItem()},c,e["Clone Git Repository"])},function(t){E.handleProgressServiceResponse(t,i,o,function(){},c,e["Clone Git Repository"])})})})};if(t.parameters.valueFor("url")&&!t.parameters.optionsRequested)s(t.parameters.valueFor("url"));else{var a=new m.CloneGitRepositoryDialog({serviceRegistry:o,fileClient:p,url:t.parameters.valueFor("url"),alwaysShowAdvanced:t.parameters.optionsRequested,func:s});a.show()}},visibleWhen:function(){return!0}});a.addCommand(N);var x=new r.Command({name:e["Clone Repository"],tooltip:e["Clone an existing Git repository to a folder"],id:"eclipse.cloneGitRepositoryReviewReq",callback:function(t){var i=t.items,n=o.getService("orion.git.provider"),r=o.getService("orion.page.progress"),s=function(t,s,a){i.GitUrl=t,E.getDefaultSshOptions(o,i).then(function(i){var c=arguments.callee,h=new d(o);h.getConfig().then(function(d){var h=r.progress(n.cloneGitRepository(a,t,s,l.defaultPath,i.gitSshUsername,i.gitSshPassword,i.knownHosts,i.gitPrivateKey,i.gitPassphrase,d),"Cloning git repository "+a);o.getService("orion.page.message").createProgressMonitor(h,e["Cloning repository: "]+t),h.then(function(t){E.handleProgressServiceResponse(t,i,o,function(){l.changedItem&&l.changedItem()},c,e["Clone Git Repository"])},function(t){E.handleProgressServiceResponse(t,i,o,function(){},c,e["Clone Git Repository"])})})})},a=new m.CloneGitRepositoryDialog({serviceRegistry:o,fileClient:p,url:t.userData,alwaysShowAdvanced:!1,func:s});a.show()},visibleWhen:function(){return!0}});a.addCommand(x);var A=new r.Command({name:e["Add Remote"],tooltip:e["Add a new remote to the repository"],id:"eclipse.addRemoteReviewRequestCommand",imageClass:"git-sprite-fetch",spriteClass:"gitCommandSprite",callback:function(t){t.parameters&&t.parameters.valueFor("remoteName")&&(t.remoteName=t.parameters.valueFor("remoteName"));var i=t,n=function(t,i){if(t.JsonData.HostKey)i.parameters=null,i.errorData=t.JsonData,a.collectParameters(i);else if(i.optionsRequested)i.errorData=t.JsonData,a.collectParameters(i);else{var n=new c(o);n.isEnabled().then(function(n){i.parameters=n?t.JsonData.User?new s.ParametersDescription([new s.CommandParameter("sshpassword","password",e["Password:"]),new s.CommandParameter("saveCredentials","boolean",e["Don't prompt me again:"])],{hasOptionalParameters:!0}):new s.ParametersDescription([new s.CommandParameter("sshuser","text",e["User Name:"]),new s.CommandParameter("sshpassword","password",e["Password:"]),new s.CommandParameter("saveCredentials","boolean",e["Don't prompt me again:"])],{hasOptionalParameters:!0}):t.JsonData.User?new s.ParametersDescription([new s.CommandParameter("sshpassword","password",e["Password:"])],{hasOptionalParameters:!0}):new s.ParametersDescription([new s.CommandParameter("sshuser","text",e["User Name:"]),new s.CommandParameter("sshpassword","password",e["Password:"])],{hasOptionalParameters:!0}),i.errorData=t.JsonData,a.collectParameters(i)})}};if(i.parameters&&i.parameters.optionsRequested)return i.parameters=null,i.optionsRequested=!0,void a.collectParameters(i);var r=function(r,s,a){var c=o.getService("orion.page.progress");c.progress(o.getService("orion.git.provider").addRemote(r,s,t.userData),"Adding git remote "+s).then(function(){E.gatherSshCredentials(o,t).then(function(r){o.getService("orion.git.provider").getGitRemote(a.RemoteLocation).then(function(d){for(var h,u=0;u<d.Children.length;u++)d.Children[u].Name===s&&(h=d.Children[u]);var p=a,m=o.getService("orion.git.provider"),f=o.getService("orion.page.message"),v=c.progress(m.doFetch(h.Location,!1,r.gitSshUsername,r.gitSshPassword,r.knownHosts,r.gitPrivateKey,r.gitPassphrase),"Fetching remote "+s);f.createProgressMonitor(v,e["Fetching remote: "]+h.Location),v.then(function(e){E.handleGitServiceResponse(e,o,function(){c.progress(m.getGitRemote(h.Location),"Getting remote details "+s).then(function(){l.changedItem(p)},g)},function(e){n(e,t)})},function(e){E.handleGitServiceResponse(e,o,function(){l.changedItem(p)},function(e){n(e,i)})})})})},g)};i.remoteName?r(i.items.RemoteLocation,i.remoteName,i.items):(i.parameters=new s.ParametersDescription([new s.CommandParameter("remoteName","text",e["Remote Name:"])],{hasOptionalParameters:!1}),a.collectParameters(i))},visibleWhen:function(){return!0}});a.addCommand(A);var I=new s.ParametersDescription([new s.CommandParameter("folderName","text",e["New folder:"])],{hasOptionalParameters:!0}),O=new r.Command({name:e["Init Repository"],tooltip:e["Create a new Git repository in a new folder"],id:"eclipse.initGitRepository",parameters:I,callback:function(t){var i=t.items,n=o.getService("orion.git.provider"),r=o.getService("orion.page.progress"),s=function(t,s,a){i.GitUrl=t,E.getDefaultSshOptions(o,i).then(function(i){var c=arguments.callee,h=new d(o);h.getConfig().then(function(d){var h=r.progress(n.cloneGitRepository(a,t,s,l.defaultPath,null,null,null,null,null,d),e["Initializing repository: "]+a);o.getService("orion.page.message").createProgressMonitor(h,e["Initializing repository: "]+a),h.then(function(t){E.handleProgressServiceResponse(t,i,o,function(){l.changedItem&&l.changedItem()},c,e["Init Git Repository"])},function(t){E.handleProgressServiceResponse(t,i,o,function(){},c,e["Init Git Repository"])})})})};if(t.parameters.valueFor("folderName")&&!t.parameters.optionsRequested)s(null,null,t.parameters.valueFor("folderName"));else{var a=new m.CloneGitRepositoryDialog({serviceRegistry:o,title:e["Init Git Repository"],fileClient:p,advancedOnly:!0,func:s});a.show()}},visibleWhen:function(){return!0}});a.addCommand(O);var D=new r.Command({name:e.Delete,tooltip:e["Delete the repository"],imageClass:"core-sprite-delete",id:"eclipse.git.deleteClone",visibleWhen:function(e){return"Clone"===e.Type},callback:function(i){var r=i.items,s=o.getService("orion.git.provider"),a=o.getService("orion.page.progress");if(Array.isArray(r)){if(confirm(n.formatMessage(e["Are you sure you want do delete ${0} repositories?"],r.length)))for(var c=0,d=0;d<r.length;d++)a.progress(s.removeGitRepository(r[d].Location),"Removing repository "+r.Name).then(function(){c++,c>=r.length&&l.changedItem&&l.changedItem()},g)}else confirm(n.formatMessage(e["Are you sure you want to delete ${0}?"],r.Name))&&a.progress(s.removeGitRepository(r.Location),"Removing repository "+r.Name).then(function(){l.changedItem&&(window.location=t.toUrl(C.expand({})),l.changedItem())},g)}});a.addCommand(D);var M=new r.Command({name:e["Apply Patch"],tooltip:e["Apply a patch on the selected repository"],id:"eclipse.orion.git.applyPatch",imageClass:"git-sprite-apply-patch",spriteClass:"gitCommandSprite",callback:function(t){var n=v(t.items),r=new i,s=new y.ApplyPatchDialog({title:e["Apply Patch"],diffLocation:n.DiffLocation||n.repository.DiffLocation,deferred:r});s.show();var a=o.getService("orion.page.message");r.then(function(e){var t;try{var i=JSON.parse(e);if(i.JsonData&&i.JsonData.modifiedFieles){t="Patch applied, files modified: ";for(var n=!0,o=0;o<i.JsonData.modifiedFieles.length;o++)n||(t+=", "),t+=i.JsonData.modifiedFieles[o],n=!1;var r=[];return r.Severity="Info",r.HTML=!1,r.Message=t,void a.setProgressResult(r)}}catch(s){}t="Patch applied",a.setMessage(t)},function(e){var t=JSON.parse(e),i="Apply patch failed.";t.DetailedMessage?(i+=" ",i+=t.DetailedMessage):t.Message&&(i+=" ",i+=t.Message);var n=[];n.Severity="Error",n.HTML=!1,n.Message=i,a.setProgressResult(n)})},visibleWhen:function(e){return"Clone"===e.Type||e.repository}});a.addCommand(M);var F=new s.ParametersDescription([new s.CommandParameter("commitName","text",e["Commit name:"])],{hasOptionalParameters:!0}),$=new r.Command({name:e["Open Commit"],tooltip:e["Open the commit with the given name"],id:"eclipse.orion.git.openCommitCommand",imageClass:"git-sprite-apply-patch",spriteClass:"gitCommandSprite",parameters:F,callback:function(n){var r=o.getService("orion.page.progress"),s=function(t,a,l){return null==l&&(l=new i),t.length>0?r.progress(o.getService("orion.git.provider").doGitLog("/gitapi/commit/"+n.parameters.valueFor("commitName")+t[0].ContentLocation+"?page=1&pageSize=1",null,null,e["Looking for the commit"]),"Looking for commit "+n.parameters.valueFor("commitName")).then(function(e){l.resolve(e.Children[0].Location)},function(){s(t.slice(1),a,l)}):l.reject(),l},a=function(i){n.parameters.optionsRequested?new f.OpenCommitDialog({repositories:i,serviceRegistry:o,commitName:n.parameters.valueFor("commitName")}).show():(o.getService("orion.page.message").setProgressMessage(e["Looking for the commit"]),s(i,n.parameters.valueFor("commitName")).then(function(e){if(e){var i=t.toUrl(T.expand({resource:e}));window.open(i)}o.getService("orion.page.message").setProgressMessage("")},function(){var t=[];t.Severity="warning",t.HTML=!1,t.Message=e["No commits found"],o.getService("orion.page.message").setProgressResult(t)}))};if("Clone"===n.items.Type){var l=[n.items];a(l)}else if(n.items.CloneLocation)r.progress(o.getService("orion.git.provider").getGitClone(n.items.CloneLocation),"Getting git repository details").then(function(e){var t=e.Children;a(t)});else{var l=n.items;a(l)}},visibleWhen:function(e){return"Clone"===e.Type||e.CloneLocation||e.length>1&&"Clone"===e[0].Type}});a.addCommand($)},E.createGitStatusCommands=function(t,i,o,s){function l(e){return Array.isArray(e)||(e=[e]),e}function c(i,n){var r=t.getService("orion.page.message"),s=t.getService("orion.page.progress"),a=s.progress(t.getService("orion.git.provider").doRebase(i,"",n),"Rebasing git repository");r.createProgressMonitor(a,n),a.then(function(i){if("OK"===i.Result||"ABORTED"===i.Result||"FAST_FORWARD"===i.Result||"UP_TO_DATE"===i.Result){var n=[];n.Severity="Ok",n.HTML=!1,n.Message=i.Result,t.getService("orion.page.message").setProgressResult(n),o.changedItem({})}if("STOPPED"===i.Result){var n=[];n.Severity="Warning",n.HTML=!1,n.Message=i.Result+e[". Repository still contains conflicts."],t.getService("orion.page.message").setProgressResult(n),o.changedItem({})}else if("FAILED_UNMERGED_PATHS"===i.Result){var n=[];n.Severity="Error",n.HTML=!1,n.Message=i.Result+e[". Repository contains unmerged paths. Resolve conflicts first."],t.getService("orion.page.message").setProgressResult(n)}},g)}var d=function(){o.changedItem()},h={serviceRegistry:t,commandService:i},u=S(h),p=u.perform,m=u.createParameters(s),g=(u.amendEventListener,u.displayErrorOnStatus),f=new r.Command({name:e.Stage,tooltip:e["Stage the change"],imageClass:s?"core-sprite-check":"git-sprite-stage",spriteClass:s?"commandSprite":"gitCommandSprite",id:"eclipse.orion.git.stageCommand",callback:function(i){var n=l(i.items),r=t.getService("orion.page.message"),a=t.getService("orion.page.progress");if(1===n.length){var c=a.progress(t.getService("orion.git.provider").stage(n[0].indexURI),e["Staging changes"]);r.createProgressMonitor(c,e["Staging changes"]),c.then(function(){s?i.handler.changedItem(n):o.changedItem(n)},g)}else{for(var d=[],h=0;h<n.length;h++)d[h]=n[h].name;var c=a.progress(t.getService("orion.git.provider").stageMultipleFiles(i.userData.Clone.IndexLocation,d),e["Staging changes"]);r.createProgressMonitor(c,"Staging changes"),c.then(function(){s?i.handler.changedItem(n):o.changedItem(n)},g)}},visibleWhen:function(e){var t=l(e);if(0===t.length)return!1;for(var i=0;i<t.length;i++)if(!a.isChange(t[i])||a.isStaged(t[i]))return!1;return!0}});i.addCommand(f);var v=function(i){var n,o=l(i.items),r=t.getService("orion.page.message"),s=t.getService("orion.page.progress");if(1===o.length)n=s.progress(t.getService("orion.git.provider").unstage(o[0].indexURI,o[0].name),"Unstaging changes"),r.createProgressMonitor(n,e["Staging changes"]);else{for(var a=[],c=0;c<o.length;c++)a[c]=o[c].name;n=s.progress(t.getService("orion.git.provider").unstage(i.userData.Clone.IndexLocation,a),"Unstaging changes"),r.createProgressMonitor(n,e["Staging changes"])}return n.then(function(){return o})},y=new r.Command({name:e.Unstage,tooltip:e["Unstage the change"],imageClass:s?"core-sprite-check_on":"git-sprite-unstage",spriteClass:s?"commandSprite":"gitCommandSprite",id:"eclipse.orion.git.unstageCommand",callback:function(e){v(e).then(function(t){s?e.handler.changedItem(t):o.changedItem(t)},g)},visibleWhen:function(e){var t=l(e);if(0===t.length)return!1;for(var i=0;i<t.length;i++)if(!a.isChange(t[i])||!a.isStaged(t[i]))return!1;return!0}});i.addCommand(y);var C=new r.Command({name:s?e.SmartCommit:e.Commit,tooltip:s?"":e.Commit,id:"eclipse.orion.git.commitCommand",parameters:m,callback:function(e){p(e).then(function(){d()})},visibleWhen:function(){return!0}});i.addCommand(C);var w=new r.Command({name:e.Reset,tooltip:e["Reset the branch, discarding all staged and unstaged changes"],imageClass:"core-sprite-refresh",id:"eclipse.orion.git.resetCommand",callback:function(i){var n=i.items,r=t.getService("orion.page.dialog");r.confirm(e["All unstaged and staged changes in the working directory and index will be discarded and cannot be recovered."]+"\n"+e["Are you sure you want to continue?"],function(i){if(i){var r=t.getService("orion.page.message"),s=t.getService("orion.page.progress"),a=s.progress(t.getService("orion.git.provider").unstageAll(n.IndexLocation,"HARD"),e["Resetting local changes"]);r.createProgressMonitor(a,e["Resetting local changes"]),a.then(function(){o.changedItem(n)},g)}})},visibleWhen:function(e){return"Status"!==e.Type?!1:a.hasStagedChanges(e)||a.hasUnstagedChanges(e)}});i.addCommand(w);var _=new r.Command({name:e.Checkout,tooltip:e["Checkout all the selected files, discarding all changes"],imageClass:"git-sprite-checkout",spriteClass:"gitCommandSprite",id:"eclipse.orion.git.checkoutCommand",callback:function(i){var n=l(i.items),r=t.getService("orion.page.dialog");r.confirm(e["Your changes to the selected files will be discarded and cannot be recovered."]+"\n"+e["Are you sure you want to continue?"],function(r){if(r){for(var s=t.getService("orion.page.message"),a=t.getService("orion.page.progress"),l=[],c=0;c<n.length;c++)l[c]=n[c].name;var d=a.progress(t.getService("orion.git.provider").checkoutPath(i.userData.Clone.Location,l),e["Resetting local changes"]);s.createProgressMonitor(d,e["Resetting local changes"]),d.then(function(){o.changedItem(n)},g)}})},visibleWhen:function(e){var t=l(e);if(0===t.length)return!1;for(var i=0;i<t.length;i++)if(!a.isChange(t[i])||a.isStaged(t[i]))return!1;return!0}});i.addCommand(_);var b=new r.Command({name:e.Discard,tooltip:e["Checkout all the selected files, discarding all changes"],imageClass:"git-sprite-checkout",spriteClass:"gitCommandSprite",id:"eclipse.orion.git.checkoutStagedCommand",callback:function(i){var n=t.getService("orion.page.dialog");n.confirm(e["Your changes to the selected files will be discarded and cannot be recovered."]+"\n"+e["Are you sure you want to continue?"],function(n){n&&v(i).then(function(n){for(var r=t.getService("orion.page.message"),a=t.getService("orion.page.progress"),l=[],c=0;c<n.length;c++)l[c]=n[c].name;var d=a.progress(t.getService("orion.git.provider").checkoutPath(i.userData.Clone.Location,l),e["Resetting local changes"]);return r.createProgressMonitor(d,e["Resetting local changes"]),d.then(function(){s?i.handler.changedItem(n):o.changedItem(n)},g)})})},visibleWhen:function(t){var i=l(t);return b.name=n.formatMessage(e.Discard,i.length),!0}});i.addCommand(b);var L=new r.Command({name:e["Show Patch"],tooltip:e["Show workspace changes as a patch"],id:"eclipse.orion.git.showPatchCommand",hrefCallback:function(e){for(var t=l(e.items),i=e.userData.Clone.DiffLocation+"?parts=diff",n=0;n<t.length;n++)i+="&Path=",i+=t[n].name;return i},visibleWhen:function(e){var t=l(e);if(0===t.length)return!1;for(var i=0;i<t.length;i++)if(a.isStaged(t[i]))return!1;return!0}});i.addCommand(L);var E=new r.Command({name:e["Show Patch"],tooltip:e["Show checked changes as a patch"],id:"eclipse.orion.git.showStagedPatchCommand",hrefCallback:function(e){for(var t=l(e.items),i=e.userData.Clone.DiffLocation.replace("/Default/","/Cached/")+"?parts=diff",n=0;n<t.length;n++)i+="&Path=",i+=t[n].name;return i},visibleWhen:function(){return!0}});i.addCommand(E);var R=new r.Command({name:e.Continue,tooltip:e["Contibue Rebase"],id:"eclipse.orion.git.rebaseContinueCommand",callback:function(e){var t=e.items;return c(t.Clone.HeadLocation,"CONTINUE")},visibleWhen:function(e){return e.RepositoryState&&-1!==e.RepositoryState.indexOf("REBASING")}});i.addCommand(R);var P=new r.Command({name:e["Skip Patch"],tooltip:e["Skip Patch"],id:"eclipse.orion.git.rebaseSkipPatchCommand",callback:function(e){var t=e.items;return c(t.Clone.HeadLocation,"SKIP")},visibleWhen:function(e){return e.RepositoryState&&-1!==e.RepositoryState.indexOf("REBASING")}});i.addCommand(P);var T=new r.Command({name:e.Abort,tooltip:e["Abort Rebase"],id:"eclipse.orion.git.rebaseAbortCommand",callback:function(e){var t=e.items;return c(t.Clone.HeadLocation,"ABORT")},visibleWhen:function(e){return e.RepositoryState&&-1!==e.RepositoryState.indexOf("REBASING")}});i.addCommand(T)},E.createSharedCommands=function(t,i,n,o){var s=function(){n.changedItem()},a={serviceRegistry:t,commandService:i,explorer:n,toolbarId:o,tags:!0,confirmDialogCloseCallback:s,remotePrompterDialogCloseCallback:s,sshCredentialsDialogCloseCallback:s,sshSlideoutCloseCallback:s},l={serviceRegistry:t,commandService:i},c=b(a),d=S(l),h=d.createParameters(!1),u=d.perform,p=d.displayErrorOnStatus,m=c.perform,g=new r.Command({name:e["Commit and Push"],tooltip:e["Commit and Push"],id:"eclipse.orion.git.commitAndPushCommand",parameters:h,callback:function(e){u(e).then(function(){t.getService("orion.git.provider").getGitBranch(e.items.status.Clone.BranchLocation).then(function(t){for(var i,n=t.Children,o=0;o<n.length;o++)if(n[o].Current){i=n[o];break}e.command=void 0,e.targetBranch=void 0,e.parameters=void 0,e.items=i,m(e).then(function(){s()})},function(e){p(e)})},function(e){p(e),s()})},visibleWhen:function(){return!0}});i.addCommand(g)}}(),E}),define("orion/git/gitLogExplorer",["require","i18n!git/nls/gitmessages","orion/git/widgets/gitCommitList","orion/section","orion/Deferred","orion/URITemplate","orion/globalCommands","orion/git/gitCommands","orion/i18nUtil","orion/PageUtil","orion/webui/littlelib"],function(e,t,i,n,o,r,s,a,l,c,d){var h={},u=new r("git/git-repository.html#{,resource,params*}");
return h.GitLogExplorer=function(){function r(e){e=e||{},this.registry=e.registry,this.fileClient=e.fileClient,this.gitClient=e.gitClient,this.commandService=e.commandService,this.statusService=e.statusService,this.progressService=e.progressService,this.preferencesService=e.preferencesService,this.selection=e.selection,this.checkbox=e.checkbox,this.minimal=e.minimal,this.parentId=e.parentId,this.pageTitleId=e.pageTitleId,this.toolbarId=e.toolbarId,this.selectionToolsId=e.selectionToolsId,this.pageNavId=e.pageNavId,this.actionScopeId=e.actionScopeId}return r.prototype.getCloneFileUri=function(){var e,t=c.matchResourceParameters(),i=t.resource.split("gitapi/commit/");if(2===i.length&&(i=i[1].split("/"),i.length>1)){e="";for(var n=0;n<i.length-1;n++)e+="/"+i[n];e+="/"+i[i.length-1].split("?")[0]}return e},r.prototype.initTitleBar=function(i){var n,r,c=new o,d=i.toRef&&"RemoteTrackingBranch"===i.toRef.Type,h=i.toRef&&"Branch"===i.toRef.Type;d||h?(n=i.ContentLocation+i.RepositoryPath,r=i.toRef.Name):n=this.getCloneFileUri();var p=this;return n?this.progressService.progress(this.fileClient.read(n,!0),"Getting metadata of "+n).then(function(n){this.isDirectory=this.commitNavigator.isDirectory=n.Directory;var o={};o.Parents=[],o.Name=n.ETag?l.formatMessage(t["Log (0) - 1"],r,n.Name):l.formatMessage(t["Log (0)"],r),o.Parents[0]={},o.Parents[0].Name=i.Clone.Name,o.Parents[0].Location=i.Clone.Location,o.Parents[0].ChildrenLocation=i.Clone.Location,o.Parents[1]={},o.Parents[1].Name=t.Repo,s.setPageTarget({task:t["Git Log"],target:i,breadcrumbTarget:o,makeBreadcrumbLink:function(t,i){t.href=e.toUrl(u.expand({resource:i||"".Location}))},serviceRegistry:p.registry,commandService:p.commandService}),a.updateNavTools(p.registry,p.commandService,p,"pageActions","selectionTools",i),c.resolve()}.bind(this),function(e){c.reject(e)}):c.resolve(),c},r.prototype.redisplay=function(){var e=c.matchResourceParameters();this.display(e.resource)},r.prototype.changedItem=function(){this.redisplay()},r.prototype.handleError=function(e){var t={};t.Severity="Error",t.HTML=!1;try{var i=JSON.parse(e.responseText);t.Message=i.DetailedMessage?i.DetailedMessage:i.Message}catch(n){t.Message=e.DetailedMessage||e.Message||e.message}this.statusService.setProgressResult(t)},r.prototype.display=function(e){var o=d.node("table");d.empty(o);var r=new n.Section(o,{id:"commitSection",title:t.Commits,slideout:!0,content:'<div class="mainPadding" id="logNode"></div>',canHide:!0,preferenceService:this.preferencesService}),s=this.commitNavigator=new i.GitCommitListExplorer({serviceRegistry:this.registry,commandRegistry:this.commandService,fileClient:this.fileClient,gitClient:this.gitClient,progressService:this.progressService,statusService:this.statusService,selection:this.selection,actionScopeId:this.actionScopeId,parentId:"logNode",location:e,section:r,legacyLog:!0,handleError:this.handleError,root:{Type:"CommitRoot"}}),l=this;s.display().then(function(e){l.initTitleBar(e),a.updateNavTools(l.registry,l.commandService,l,l.toolbarId,l.selectionToolsId,e,l.pageNavId)})},r}(),h}),define("orion/links",[],function(){function e(e){this._init(e)}return e.prototype={_init:function(e){this._registry=e.serviceRegistry,this._serviceRegistration=this._registry.registerService("orion.core.textlink",this)},_replaceLink:function(e,t,i,n,o){var r=e.search(i);r>0&&(t.appendChild(document.createTextNode(e.substring(0,r))),e=e.substring(r));var s=e.replace(i,""),a=e.substring(0,e.length-s.length),l=a.split(" ",n);if(l.length===n){for(var c=document.createElement("a"),d=o,h=0;n>h;h++)d=d.replace("%"+(h+1),l[h]);c.setAttribute("href",d),c.textContent=a,t.appendChild(c),e=s}return e},addLinks:function(e,t){var i=t||document.createElement("div"),n=this._registry.getServiceReferences("orion.core.linkScanner");if(n.length>0)for(var o=n[0],r=new RegExp(o.getProperty("pattern"),"i"),s=o.getProperty("words"),a=o.getProperty("anchor"),l=e.search(r);l>=0;)e=this._replaceLink(e,i,r,s,a),l=e.search(r);return e.length>0&&i.appendChild(document.createTextNode(e)),i}},e.prototype.constructor=e,{TextLinkService:e}}),define("git/git-log",["i18n!git/nls/gitmessages","require","orion/browserCompatibility","orion/bootstrap","orion/status","orion/progress","orion/commandRegistry","orion/dialogs","orion/selection","orion/fileClient","orion/operationsClient","orion/searchClient","orion/globalCommands","orion/git/gitClient","orion/ssh/sshTools","orion/git/gitLogExplorer","orion/git/gitCommands","orion/links","orion/PageUtil"],function(e,t,i,n,o,r,s,a,l,c,d,h,u,p,m,g,f,v,y){n.startup().then(function(t){var i=t.serviceRegistry,n=t.preferences,C=new d.OperationsClient(i),w=new o.StatusReportingService(i,C,"statusPane","notifications","notificationArea");new a.DialogService(i);var _=new l.Selection(i);new m.SshService(i);var b=new s.CommandRegistry({selection:_}),S=new r.ProgressService(i,C,b),L=new v.TextLinkService({serviceRegistry:i}),E=new p.GitService(i),R=new c.FileClient(i),P=new h.Searcher({serviceRegistry:i,fileService:R,commandService:b}),T=new g.GitLogExplorer({registry:i,fileClient:R,gitClient:E,statusService:w,progressService:S,preferencesService:n,commandService:b,linkService:L,selection:_,parentId:"table",pageTitleId:"pageTitle",toolbarId:"pageActions",selectionToolsId:"selectionTools",pageNavId:"pageNavigationActions",actionScopeId:"itemLevelCommands"});u.setPageCommandExclusions(["eclipse.git.remote","eclipse.git.log"]),u.generateBanner("orion-gitlog",i,b,n,P,T),f.createFileCommands(i,b,T,"pageActions","selectionTools"),b.addCommandGroup("itemLevelCommands","eclipse.gitGroup.nav",200,e.More),b.addCommandGroup("pageActions","eclipse.gitGroup.page",100),b.addCommandGroup("selectionTools","eclipse.selectionGroup",500,"More"),b.registerCommandContribution("itemLevelCommands","eclipse.openGitCommit",1),b.registerCommandContribution("itemLevelCommands","eclipse.compareWithWorkingTree",2),b.registerCommandContribution("selectionTools","eclipse.compareGitCommits",1,"eclipse.selectionGroup"),b.addCommandGroup("pageActions","eclipse.gitPushGroup",100,"Push",null,null,null,"Push",null,"eclipse.orion.git.push"),b.registerCommandContribution("pageActions","eclipse.orion.git.push",100,"eclipse.gitPushGroup"),b.registerCommandContribution("pageActions","eclipse.orion.git.pushForce",200,"eclipse.gitPushGroup"),b.registerCommandContribution("pageActions","eclipse.orion.git.pushBranch",300,"eclipse.gitPushGroup"),b.registerCommandContribution("pageActions","eclipse.orion.git.pushForceBranch",400,"eclipse.gitPushGroup"),b.registerCommandContribution("pageActions","eclipse.orion.git.pushToGerrit",500,"eclipse.gitPushGroup"),b.addCommandGroup("pageActions","eclipse.gitFetchGroup",100,"Fetch",null,null,null,"Fetch",null,"eclipse.orion.git.fetch"),b.registerCommandContribution("pageActions","eclipse.orion.git.fetch",100,"eclipse.gitFetchGroup"),b.registerCommandContribution("pageActions","eclipse.orion.git.fetchForce",100,"eclipse.gitFetchGroup"),b.registerCommandContribution("pageActions","eclipse.orion.git.merge",100,"eclipse.gitGroup.page"),b.registerCommandContribution("itemLevelCommands","eclipse.orion.git.addTag",3),b.registerCommandContribution("itemLevelCommands","eclipse.orion.git.cherryPick",3),b.registerCommandContribution("itemLevelCommands","eclipse.orion.git.revert",3),b.registerCommandContribution("pageNavigationActions","eclipse.orion.git.previousLogPage",1),b.registerCommandContribution("pageNavigationActions","eclipse.orion.git.nextLogPage",2);var k=y.matchResourceParameters();T.display(k.resource),window.addEventListener("hashchange",function(){var e=y.matchResourceParameters();T.display(e.resource)},!1)})});